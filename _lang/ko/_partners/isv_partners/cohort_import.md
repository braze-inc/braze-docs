---
nav_title: 코호트 가져오기 통합
alias: /cohort_import/
hidden: true
---

# 파트너 코호트 가져오기 통합

> 파트너 코호트 가져오기 통합 기능을 사용하면 파트너가 Braze와 통합하여 파트너의 애플리케이션 내에서 생성된 사용자 코호트를 전송할 수 있습니다.

## 클러스터 URL

Braze는 미국과 유럽 전역의 여러 클러스터에서 애플리케이션을 호스팅합니다. 가져오기 엔드포인트의 URL은 클라이언트의 회사 인스턴스가 호스팅되는 클러스터에 따라 달라집니다.

| 인스턴스 | REST 엔드포인트 |
| ----- | ------------------------------- |
| US-01 | `https://rest.iad-01.braze.com` |
| US-02 | `https://rest.iad-02.braze.com` |
| US-03 | `https://rest.iad-03.braze.com` |
| US-04 | `https://rest.iad-04.braze.com` |
| US-05 | `https://rest.iad-05.braze.com` |
| US-06 | `https://rest.iad-06.braze.com` |
| US-07 | `https://rest.iad-07.braze.com` |
| US-08 | `https://rest.iad-08.braze.com` |
| EU-01 | `https://rest.fra-01.braze.eu`  |
| EU-02 | `https://rest.fra-02.braze.eu`  |
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

## 엔드포인트 URL

최상위 URL은 클러스터별로 다를 뿐만 아니라 각 엔드포인트도 파트너별로 다릅니다. 예를 들어 US01 클러스터로 가져올 때 URL의 형식은 `https://rest.iad-01.braze.com/partners/[partner_name]/…`입니다. 여기서 `[partner_name]`은 일반적으로 파트너의 비즈니스 이름입니다. 각 엔드포인트에 대한 구체적인 내용은 다음 섹션에서 설명합니다.

## 인증

코호트 데이터를 Braze로 가져오려면 두 가지 인증 키가 필요합니다.

### 파트너 API 키

파트너 API 키는 통합 파트너를 식별하고 가져오기에 유효한지 요청을 인증합니다. 키는 요청 본문의 `partner_api_key` 필드에 포함되어야 합니다.

파트너의 애플리케이션에서 통합 설정 시, 데이터를 가져올 때 사용할 클러스터 URL과 파트너 API 키를 통합에서 알 수 있도록 클라이언트는 Braze 클러스터를 지정해야 합니다.

Braze는 파트너가 통합 개발을 시작하기 전에 파트너에게 파트너 API 키를 제공합니다. 일반적으로 모든 미국 클러스터에 유효한 단일 키와 EU 클러스터에 유효한 또 다른 키를 제공합니다.

### 클라이언트 데이터 가져오기 키

클라이언트 데이터 가져오기 키는 코호트를 가져와야 하는 클라이언트 워크스페이스를 식별합니다. 키는 요청 본문의 `client_secret` 필드에 포함되어야 합니다.

이 키는 파트너의 연동 설정에 있는 클라이언트 대시보드에서 생성됩니다. 파트너의 애플리케이션에서 통합 설정 시, 데이터를 전송할 클라이언트 및 워크스페이스를 통합에서 알 수 있도록 데이터 가져오기 키를 지정할 것을 클라이언트에 요청해야 합니다.

## API 엔드포인트 사양

### 코호트 이름 엔드포인트

코호트 이름 엔드포인트를 사용하여 ID를 기반으로 코호트의 이름을 지정할 수 있습니다. 이 엔드포인트는 코호트를 처음 Braze로 내보낼 때 또는 이미 Braze에 알려진 코호트의 이름이 변경될 때마다 호출해야 합니다.

| 필드 | 유형 | 필수 | 참고 |
| ----- | ---- | -------- | ----- |
| `partner_api_key` | 문자열 | 예 | 파트너가 Braze에 보내는 모든 요청에 사용되는 파트너별 API 키입니다. 이 키는 클러스터별로 다르므로 [파트너 API 키](#partner-api-key) 참조) 파트너는 코호트를 작성할 클러스터를 알고 있어야 합니다. |
| `client_secret` | 문자열 | 예 | 해당 코호트가 속한 클라이언트의 데이터 가져오기 키입니다. |
| `cohort_id` | 문자열 | 예 | 코호트의 식별자입니다. 이 식별자는 지정된 클라이언트에 대해 고유해야 합니다. |
| `name` | 문자열 | 예 | 클라이언트가 지정한 코호트 이름 |
| `created_at` | 문자열 | 예 | ISO-8601 형식의 타임스탬프 |
{: .reset-td-br-1 .reset-td-br-2 .reset-td-br-3  .reset-td-br-4 role="presentation" }

#### 요청 예시:

`POST: https://rest.iad-01.braze.com/partners/[partner_name]/cohorts`
```
{
	"partner_api_key" : "123456-1234-1234-12345678",
	"client_secret" : "234567-2345-2345-23456789",
	"cohort_id" : "[some unique identifier generated by the partner]",
	"name" : "Name of the cohort that will appear in the Braze dashboard",
	"created_at" : "2021-01-21T19:20:30+05:00"
}
```

### 사용자 코호트 엔드포인트

사용자 코호트 엔드포인트를 사용하면 특정 코호트에 추가되거나 제거된 사용자를 지정할 수 있습니다. 이 엔드포인트는 코호트를 새로 고칠 때 호출해야 합니다. 코호트에 새로 들어왔거나 마지막 새로고침 이후 코호트를 떠난 사용자만 Braze로 보내야 합니다.

| 필드 | 유형 | 필수 | 참고 |
| ----- | ---- | -------- | ----- |
| `partner_api_key` | 문자열 | 예 | 파트너가 Braze에 보내는 모든 요청에 사용되는 파트너별 API 키입니다. 이 키는 클러스터별로 다르므로 [파트너 API 키](#partner-api-key) 참조) 통합에서는 코호트를 작성할 클러스터를 알고 있어야 합니다. |
| `client_secret` | 문자열 | 예 | 해당 코호트가 속한 클라이언트의 데이터 가져오기 키입니다. |
| `cohort_id` | 문자열 | 예 | 코호트의 식별자입니다. 식별자는 지정된 클라이언트에 대해 고유해야 합니다. |
| `cohort_changes` | 객체 배열 | 예 | 객체에는 두 개의 필드가 있을 수 있습니다. `user_ids`는 필수이며 `external_ids`, `device_ids`, `aliases`의 배열일 수 있습니다 . 각 요소는 코호트에서 상태가 변경된 사용자의 ID입니다. 두 번째 필드인 `should_remove`는 이 오브젝트의 사용자를 코호트에서 추가할지 아니면 제거할지를 나타내는 선택적 부울입니다. 기본값은 거짓입니다. 단일 요청에서 사용자 ID의 최대 합산 길이는 1,000입니다.<br/><br/>식별된 사용자는 `external_id` 또는 `alias` 으로 일치시킬 수 있습니다. 익명 사용자는 `device_id`. 식별된 사용자의 디바이스 ID를 전달하면 Braze는 해당 사용자를 추가하거나 제거하지 않습니다. 식별된 사용자에게는 외부 ID 또는 별칭을 사용해야 합니다. |
{: .reset-td-br-1 .reset-td-br-2 .reset-td-br-3  .reset-td-br-4 role="presentation" }

#### 요청 예시:

`POST: https://rest.iad-01.braze.com/partners/[partner_name]/cohorts/users`
```
{
	"partner_api_key" : "123456-1234-1234-12345678",
	"client_secret" : "234567-2345-2345-23456789",
	"cohort_id" : "[some unique identifier generated by the partner]",
	"cohort_changes" : "[
	   {"user_ids": ["test_user_1", "test_user_2"]}
	]"
}
```

## 사용량 제한

사용자 코호트 엔드포인트의 요청당 최대 1,000개의 사용자 ID에 더해, 이러한 엔드포인트 요청은 시간당 250,000개의 요청으로 속도가 제한됩니다.

## 코호트 필터

Braze는 대시보드 사용자가 파트너 코호트에 속한 경우 타겟 오디언스에서 사용자를 포함하거나 제외할 수 있는 필터를 추가합니다. 필터는 해당 클라이언트에 대해 Braze에 알려진 모든 코호트의 이름을 드롭다운 목록으로 제공합니다. 이 필터는 파트너와 Braze가 이 통합에서 파트너로 동의한 클라이언트에게만 표시됩니다.

## 문제 해결

코호트 가져오기 엔드포인트와 관련된 오류 코드와 문제 해결 방법은 다음 표를 참조하세요.

| 오류 코드 | 설명 |
| ----- | ---- |
| `400` | `cohort_id` 는 유효한 문자열이어야 합니다. |
|  | `cohort_changes`는 각각 `aliases` 오브젝트이거나 문자열 배열에 대한 `user_ids` 및/또는 `device_ids` 키의 매핑을 포함하는 오브젝트 배열이어야 함 |
|  | 요청당 1,000개 `user_ids`, `device_ids`, `aliases`만 허용됨 |
|  | `name` 는 비어 있지 않은 문자열이어야 합니다. |
|  | `created_at` 는 [ISO-8601](https://en.wikipedia.org/wiki/ISO_8601) 문자열로서 유효한 시간이어야 합니다. |
| `401` | 잘못된 파트너 API 키 |
|  | 잘못된 클라이언트 비밀 |
|  | 클라이언트 비밀이 있는 클라이언트에 대해 파트너가 활성화되지 않음: **<클라이언트 비밀>** |
|  | 무단 액세스 |
| `423` | 리소스 잠김 |
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

추가적인 문제 해결은 [오류 및 응답]({{site.baseurl}}/api/errors/)을 참조하세요. 여기에서는 Braze API를 사용하는 동안 발생할 수 있는 다양한 오류 및 서버 응답에 대해 설명합니다.
