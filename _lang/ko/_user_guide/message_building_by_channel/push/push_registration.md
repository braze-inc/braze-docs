---
nav_title: "푸시 등록"
article_title: 푸시 등록
page_order: 2
page_type: reference
description: "이 참고 문서에서는 푸시 등록의 의미와 Braze에서 푸시 메시지를 보내고 푸시 토큰과 푸시 등록을 처리하는 방법에 대해 설명합니다."
channel:
 - push

---

# 푸시 등록

> 이 문서에서는 사용자에게 푸시 토큰이 할당되는 과정과 Braze가 사용자에게 푸시 메시지를 보내는 방법에 대해 설명합니다.

## 푸시 토큰 정보 {#push-tokens}

앱이 기기에 푸시 권한을 요청하면 기기의 푸시 서비스 제공업체가 해당 앱에 대한 푸시 토큰을 생성합니다. 각 앱에는 푸시 알림을 보낼 때 기기와 현재 앱 인스턴스를 식별하는 고유한 익명 푸시 토큰이 제공됩니다.

푸시 토큰은 영원히 지속되는 고정 식별자가 아니며, 업데이트될 수 있고 [만료될](#push-token-expire) 수 있다는 점을 명심하세요.

{% alert tip %}
플랫폼별 자세한 내용은 [푸시 토큰 등록을](#push-token-registration) 참조하세요.
{% endalert %}

### 전경 대 배경 푸시 {#foreground-vs-background}

푸시 토큰은 포그라운드 및 백그라운드 푸시 알림을 모두 보내는 데 사용됩니다.

| 유형       | 옵트인이 필요하신가요? | 설명                                                 |
|------------------|------------------|--------------------------------------------------------------------------------------------------------------|
| 포 그라운드 푸시 | 예       | 앱이 포그라운드에 있는 동안 알림이 사용자에게 눈에 띄게 표시됩니다.           |
| 백그라운드 푸시 | 아니요        | 알림은 표시되지 않고 백그라운드에서 조용히 전달됩니다. 제거 추적과 같은 기능에 자주 사용됩니다. |
{: .reset-td-br-1 .reset-td-br-2 .reset-td-br-3 role="presentation" }

사용자가 앱의 푸시 알림을 옵트인하면 "푸시 등록"으로 간주되며, 이제 Braze의 `Foreground Push Enabled for App` 세분화 필터를 사용하여 타겟팅할 수 있습니다.

{% alert note %}
이는 특정 앱이 아닌 앱 중 하나 이상에 옵트인한 사용자를 식별하는 데 사용되는 `Foreground Push Enabled` 세분화 필터와는 다릅니다. 자세한 내용은 [세분화 필터를]({{site.baseurl}}/user_guide/engagement_tools/segments/segmentation_filters/#foreground-push-enabled) 참조하세요.
{% endalert %}

### 기기의 여러 사용자

푸시 토큰은 기기와 앱 모두에 고유하므로 여러 사용자가 동일한 기기를 사용하는 경우 특정 사용자를 타겟팅하는 데 푸시 토큰을 사용할 수 없습니다.

예를 들어 사용자가 두 명이라고 가정해 보겠습니다: 찰리와 킴. 찰리가 자신의 휴대폰에서 앱에 대한 푸시 알림을 인에이블먼트한 상태에서 김이 찰리의 휴대폰을 사용하여 찰리의 프로필에서 로그아웃하고 자신의 프로필에 로그인하면 푸시 토큰이 김의 프로필에 다시 할당됩니다. 그러면 푸시 토큰은 김씨가 로그아웃하고 찰리가 다시 로그인할 때까지 해당 기기의 김씨의 프로필에 할당된 상태로 유지됩니다.

앱 또는 웹사이트는 기기당 푸시 구독을 하나만 할 수 있습니다. 따라서 사용자가 기기나 웹사이트에서 로그아웃하고 새 사용자가 로그인하면 푸시 토큰이 새 사용자에게 다시 할당됩니다. 이는 **참여** 탭의 **연락처 설정** 섹션에 있는 사용자 프로필에 반영됩니다:

고객 프로필의 \*\*참여** 탭에 있는 푸시 토큰 체인지로그에는 푸시 토큰이 다른 사용자에게 이동된 시점과 토큰이 무엇인지 나와 있습니다.]({% image_buster /assets/img/push_token_changelog.png %})

푸시 공급자(APN/FCM)가 하나의 기기에 있는 여러 사용자를 구분할 수 있는 방법이 없기 때문에 푸시 토큰을 마지막으로 로그인한 사용자에게 전달하여 푸시할 기기에서 어떤 사용자를 타겟팅할지 결정합니다.

## 푸시 토큰 등록

각 기기 플랫폼은 푸시 토큰 등록을 다르게 처리합니다. 플랫폼별 세부 정보는 다음을 참조하세요:

{% tabs local %}
{% tab android %}
앱이 설치되면 앱에 대한 푸시 토큰이 자동으로 생성되지만, 사용자가 명시적으로 옵트인할 때까지는 [백그라운드 푸시 알림에만](#foreground-vs-background) 사용할 수 있습니다. 또한 등록은 Android 버전에 따라 다르게 처리됩니다:

| 버전       | 세부 정보                                                                                                                                                |
|------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Android 13**         | 푸시 권한은 사용자가 요청하여 부여받아야 합니다. 앱에서 수동으로 권한을 요청하거나 [알림 채널이](https://developer.android.com/reference/android/app/NotificationChannel) 생성된 후 사용자에게 자동으로 메시지를 표시할 수 있습니다. |
| **Android 12 및 이전 버전** | 모든 사용자는 첫 번째 세션 이후에는 `Subscribed` 으로 간주됩니다. 이 시점에서 Braze는 자동으로 푸시 토큰을 요청하여 유효한 토큰과 기본 구독 상태인 `Subscribed` 로 사용자 푸시를 인에이블먼트합니다. |
{: .reset-td-br-1 .reset-td-br-2 role="presentation"}
{% endtab %}

{% tab ios %}
iOS는 앱이 설치될 때 푸시 토큰을 자동으로 생성하지 않습니다. 또한 등록은 iOS 버전에 따라 다르게 처리됩니다: 

| 버전                         | 임시 승인? | 세부 정보                                                                                                                                                     |
|------------------------------------|-----------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **iOS 12**      | 예                         | 사용자가 푸시 알림을 옵트인하면 표준 권한이 부여되어 [포그라운드 푸시 알림을](#foreground-vs-background) 보낼 수 있습니다. 그러나 [임시 승인을]({{site.baseurl}}/user_guide/message_building_by_channel/push/ios/notification_options/#provisional-push) 요청하면 알림 센터로 바로 무음 [백그라운드 푸시 알림을](#foreground-vs-background) 보낼 수 있습니다. |
| **iOS 11 이상** | 아니요                          | 모든 사용자는 푸시 알림을 받으려면 명시적으로 옵트인해야 합니다. 푸시 토큰은 권한이 부여된 후에만 생성됩니다.                                     |
{: .reset-td-br-1 .reset-td-br-2 .reset-td-br-3 role="presentation" }
{% endtab %}

{% tab web %}
기본 브라우저 권한 대화 상자를 통해 사용자에게 명시적인 옵트인을 요청해야 합니다. 사용자가 옵트인한 후 토큰을 받게 됩니다. 앱에서 언제든지 권한 프롬프트를 표시할 수 있는 iOS 및 Android와 달리 일부 최신 브라우저에서는 '사용자 제스처'(마우스 클릭 또는 키 입력)에 의해 트리거된 경우에만 프롬프트가 표시됩니다. 사이트에서 페이지 로드 시 푸시 알림 권한을 요청하려고 하면 브라우저에서 무시되거나 무음 처리될 가능성이 높습니다.
{% endtab %}
{% endtabs %}

### 사용자의 푸시 구독 상태 확인

!!! 푸시 구독 상태가 가입한 것으로 설정된 신원 미상의 고객 프로필입니다.]({% image_buster /assets/img/push_example.png %}){: style="float:right;max-width:35%;margin-left:15px;"}

Braze에서 사용자의 푸시 구독 상태를 확인할 수 있는 방법은 두 가지가 있습니다:

- **고객 프로필**: [사용자 검색]({{site.baseurl}}/user_guide/engagement_tools/segments/user_profiles/) 페이지의 Braze 대시보드를 통해 개별 사용자 프로필에 액세스할 수 있습니다. 이메일 주소, 전화번호 또는 외부 사용자 ID를 통해 사용자 프로필을 찾은 후 **참여** 탭을 선택하여 사용자의 가입 상태를 확인하고 수동으로 조정할 수 있습니다.
- **REST API 내보내기**: [세그먼트별 사용자]({{site.baseurl}}/api/endpoints/export/user_data/post_users_segment/) 내보내기 또는 [식별자별 사용자]({{site.baseurl}}/api/endpoints/export/user_data/post_users_identifier/) 내보내기 엔드포인트를 사용하여 개별 고객 프로필을 JSON 형식으로 내보낼 수 있습니다. Braze는 기기별 푸시 인에이블먼트 정보가 포함된 푸시 토큰 객체를 반환합니다.

### 푸시 등록 상태 확인하기

사용자 프로필의 **참여** 탭에 **푸시 등록 대상과** 앱 이름이 표시됩니다. 해당 기기에 대한 앱 정보가 없는 경우 두 개의 대시**(--)**가 표시됩니다. 사용자 소유의 모든 기기에 대한 항목이 표시됩니다.

기기 항목의 앱 이름 앞에 `Foreground:` 이 붙으면 앱은 해당 기기에서 포그라운드 푸시 알림(사용자에게 표시됨)과 백그라운드 푸시 알림(사용자에게 표시되지 않음)을 모두 수신할 수 있는 권한이 부여됩니다.

푸시 토큰 예시로 체인지로그를 푸시합니다.]({% image_buster /assets/img/push_changelog.png %}){: style="float:right;max-width:40%;margin-left:15px;margin-top:10px;"}

반면, 기기 항목의 앱 이름 앞에 `Background:` 이 붙으면 앱은 [백그라운드 푸시]({{site.baseurl}}/user_guide/message_building_by_channel/push/types/#background-push-notifications) 수신 권한만 부여되며 해당 기기에서 사용자에게 표시되는 알림을 표시할 수 없습니다. 이는 일반적으로 사용자가 해당 기기에서 앱에 대한 알림을 비활성화했음을 나타냅니다.

푸시 토큰이 같은 기기의 다른 사용자로 이동하면 첫 번째 사용자는 더 이상 푸시 등록이 되지 않습니다.

## 푸시 토큰 관리

고객 프로필에서 푸시 토큰을 변경하거나 제거할 수 있는 작업은 다음 차트를 참조하세요. 

| 액션 | 설명 |
| ------ | ----------- |
| `changeUser()` 메서드를 호출하는 | Braze `changeUser()` 메서드는 SDK가 사용자 행동 데이터를 할당하는 사용자 ID를 전환합니다. 이 메서드는 일반적으로 사용자가 애플리케이션에 로그인할 때 호출됩니다. 특정 기기에서 다른 또는 새로운 사용자 ID로 `changeUser()` 을 호출하면 해당 기기의 푸시 토큰이 해당 사용자 ID를 가진 적절한 Braze 프로필로 이동합니다. |
| 푸시 오류 발생 | 토큰 제거로 이어지는 몇 가지 일반적인 푸시 오류로는 `MismatchSenderId`, `InvalidRegistration`, 기타 유형의 푸시 반송이 있습니다. <br><br>일반적인 [푸시 오류의]({{site.baseurl}}/help/help_articles/push/push_error_codes/#push-bounced-mismatchsenderid) 전체 목록을 확인하세요. |
| 사용자 제거 | 사용자가 기기에서 애플리케이션을 제거하면 Braze는 프로필에서 사용자의 푸시 토큰을 제거합니다. |
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

### 더 넓은 규모에서는 어떤 모습일까요?

사용자가 새 애플리케이션을 열고 푸시 프롬프트에서 푸시 액세스 권한을 부여하면 Braze 소프트웨어 개발 키트에서 푸시 제공업체로 호출이 이루어집니다. 해당 호출이 이루어지면 푸시 제공업체는 모든 것이 올바르게 설정되었는지 확인을 실행합니다. 그렇다면 푸시 토큰이 기기로 전달됩니다. 토큰이 도착하면 소프트웨어 개발 키트에서 이를 Braze에 전달합니다. Braze가 푸시 공급자로부터 토큰을 받으면 새 고객 프로필을 업데이트하거나 생성합니다. 이제 이러한 사용자는 등록된 것으로 간주됩니다.

캠페인을 시작하려면 Braze에서 푸시 페이로드를 생성하여 푸시 제공업체에 전송하는 캠페인을 생성합니다. 이후 공급자는 푸시 페이로드를 사용자의 기기에 전달하고 소프트웨어 개발 키트(SDK)는 메시징 상태를 Braze에 전달합니다.

앞서 언급한 푸시 프로세스를 Braze, 고객, Apple 푸시 알림 서비스 또는 Firebase 클라우드 메시징 간에 매핑한 플로우 차트입니다.]({% image_buster /assets/img/push_process.png %})

| 등록 단계 | 메시징 단계 |
| ------------------ | --------------- |
| 1\. 고객(기기)이 푸시 제공업체에 등록합니다.<br>2\. 공급자는 푸시 토큰을 생성하고 전달합니다.<br>3\. Braze에서 토큰 플러시하기 |1\. Braze가 공급자에게 푸시 페이로드를 전송합니다.<br>2\. 공급자가 푸시 페이로드를 기기에 전달합니다.<br>3\. 소프트웨어 개발 키트가 Braze에 메시징 통계를 전달합니다. |
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

## 자주 묻는 질문

### 옵트인한 사용자가 내 앱을 삭제했다가 다시 다운로드하면 어떻게 되나요?

사용자가 푸시를 옵트인하고 일부 푸시 메시지를 수신한 후 나중에 앱을 삭제한다고 가정해 보겠습니다. 이렇게 하면 기기 수준에서 푸시 동의가 제거됩니다. 여기에서 제거 후 처음으로 반송된 푸시는 자동으로 해당 사용자가 향후 푸시 메시징에서 옵트아웃됩니다. 이후 사용자가 앱을 재설치했지만 실행하지 않으면 앱에 대한 푸시 토큰이 다시 부여되지 않았기 때문에 Braze는 사용자에게 푸시를 보낼 수 없습니다.

또한 사용자가 포그라운드 푸시를 다시 사용하도록 설정하는 경우 푸시 메시징 수신을 시작하려면 고객 프로필에서 이 정보를 업데이트하기 위해 세션을 시작해야 합니다.
 
### 푸시 토큰은 언제 만료되나요? {#push-token-expire}

안타깝게도 APN과 FCM은 이를 실제로 정의하지 않습니다. 푸시 토큰은 앱이 업데이트되거나 사용자가 사용자 데이터를 새 기기로 전송하거나 운영 체제를 다시 설치할 때 만료될 수 있습니다. 대부분의 경우 푸시 제공업체가 특정 푸시 토큰을 만료하는 이유에 대한 인사이트가 없습니다.

이러한 모호성을 고려하기 위해 SDK 푸시 통합은 세션 시작 시 항상 토큰을 등록하고 플러시하여 최신 토큰을 보유하도록 합니다.
