---
nav_title: "サブスクリプショングループ"
article_title: SMSおよびRCSサブスクリプショングループ
page_order: 1
description: "このリファレンス記事では、サブスクリプショングループ、サブスクリプションステート、およびSMS、MMS、RCSチャネルのサブスクリプショングループセットアッププロセスについて説明する。"
page_type: reference
alias: /sms_rcs_subscription_groups/
channel:
  - SMS
  - MMS
  - RCS
  
---

# SMSおよびRCSサブスクリプショングループ

> サブスクリプショングループは、Braze から SMS、MMS、RCS メッセージを送信するための基盤です。サブスクリプショングループは、特定のタイプのメッセージング目的のために使用される、[送信エンティティの]({{site.baseurl}}/user_guide/message_building_by_channel/sms_mms_rcs/short_and_long_codes/)集まりである(RCSによって検証された送信者、SMSショートコード、SMSロングコード、またはSMS英数字送信者IDなど)。例えば、ブランドがトランザクションとプロモーションの両方のSMSメッセージングを送信する計画がある場合、Brazeダッシュボード内で、送信電話番号の別々のプールを持つ2つのサブスクリプショングループを設定する必要がある。

## サブスクリプショングループの状態

SMSとRCSのユーザーには、`subscribed` と`unsubscribed` の2つのサブスクリプション状態がある。ユーザーのサブスクリプションの状態は、サブスクリプショングループレベルに存在し、サブスクリプショングループ間で共有されない。つまり、ユーザーは、トランザクションサブスクリプショングループに`subscribed` 、プロモーションサブスクリプショングループに`unsubscribed` 。ブランドの場合、この状態の分離により、関連する SMS メッセージと RCS メッセージをユーザーに送信し続けることができます。

| 状態 | 定義 |
| --------- | ---------- |
| 配信登録済み | ユーザーが特定のサブスクリプショングループから SMS と RCSを受信することを明示的に確認しました。ユーザーは、Braze の購読 API を介して購読状態を更新するか、オプトインのキーワード応答テキストを送信することで、購読に登録できます。ユーザーが SMS または RCS あるいはこの両方を受信するには、SMS または RCS サブスクリプショングループに登録している必要があります。 |
| 配信停止済み | ユーザーは SMS および RCSサブスクリプショングループからのメッセージング、およびサブスクリプショングループ内での電話番号の送信を明示的にオプトアウトしました。ユーザーはオプトアウトのキーワード応答テキストを送信することで購読解除できます。また、ブランドは [Braze の購読 API]({{ site.baseurl}}/api/endpoints/subscription_groups/post_update_user_subscription_group_status/) を通じてユーザーを購読解除できます。SMS およびRCS サブスクリプショングループからのユーザ配信停止d は、サブスクリプショングループに属する電話番号の送信からSMS またはRCS を受信しなくなります。|
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

### ユーザーの状態の設定

ユーザープロファイルで電話番号が更新されると、新しい電話番号はそのユーザーの契約グループステータスを継承する。電話番号が Braze に既に存在する番号に更新された場合、その既存の電話番号の購読ステータスが継承されます。

例えば、ユーザー A の電話番号が複数の購読グループに登録されていて、その電話番号がユーザー B に追加された場合、ユーザー B は同じ購読グループに登録されます。ユーザーが既存のサブスクリプションを継承しないようにするには、ユーザーが番号を変更するたびに、Braze REST APIを通じて古い番号のサブスクリプショングループをリセットすることができる。複数のユーザーがこの電話番号を共有している場合、その全員が登録解除される。

ユーザーのサブスクリプショングループの状態を設定するには、以下のいずれかの方法を使用する：

- **Rest API:**ユーザプロファイルは、[\`/サブスクリプション/ステータス/set\` エンドポイント]({{ site.baseurl}}/api/endpoints/subscription_groups/post_update_user_subscription_group_status/) によって、Braze REST API を使用してプログラムで設定できます。
- **SDKの統合** [Android](https://braze-inc.github.io/braze-android-sdk/kdoc/braze-android-sdk/com.braze/-braze-user/add-to-subscription-group.html)、[iOS](https://braze-inc.github.io/braze-swift-sdk/documentation/brazekit/braze/user-swift.class/addtosubscriptiongroup(id:fileid:line:))、[Web](https://js.appboycdn.com/web-sdk/latest/doc/classes/braze.user.html#addtosubscriptiongroup)用の`addToSubscriptionGroup` メソッドを使用して、メールまたはSMS、RCSサブスクリプショングループにユーザーを追加できる。
- **ユーザーのオプトイン / オプトアウト時に自動的に処理される:**ユーザーがデフォルトのオプトインまたはオプトアウト[キーワード]({{site.baseurl}}/user_guide/message_building_by_channel/sms_mms_rcs/keywords/optin_optout/)をテキスト入力すると、Braze はユーザーの配信登録状態を自動的に設定、更新します。
- **ユーザー輸入**：**ユーザーのインポート**を使用してユーザーをメールまたは SMS および RCS サブスクリプショングループに追加できます。購読グループのステータスを更新する場合、CSV には `subscription_group_id` と `subscription_state` の2 列が必要です。詳細については、[「ユーザーインポート」]({{site.baseurl}}/user_guide/data_and_analytics/user_data_collection/user_import/#updating-subscription-group-status)を参照してください。

### ユーザーのグループをチェックする

ユーザーのサブスクリプショングループを確認するには、以下のいずれかの方法を使用する：

- **ユーザープロフィール:**Braze ダッシュボードのサイドバーにある [**ユーザー検索**] を使用して、個々のユーザープロファイルにアクセスできます。ここでは、メールアドレス、電話番号、または外部ユーザーIDでユーザープロフィールを検索できます。ユーザープロファイルのエンゲージメントタブで、ユーザーのSMSとRCSのサブスクリプショングループを見ることができる。 
- **Rest API:**Braze REST API を使用することで、[ユーザーの購読グループをリストするエンドポイント]({{site.baseurl}}/api/endpoints/subscription_groups/get_list_user_subscription_groups/)または[ユーザーの購読グループのステータスをリストするエンドポイント]({{site.baseurl}}/api/endpoints/subscription_groups/get_list_user_subscription_group_status/)で、個々のユーザープロファイルの購読グループを確認できます。 

## サブスクリプショングループを使用したメッセージの送信

Braze 経由でSMS またはRCS キャンペーンを起動するには、**SMS/MMS/RCS Variants** ドロップダウンからサブスクリプショングループを選択します。購読グループを選択すると、オーディエンスフィルターがキャンペーンまたはキャンバスに自動的に追加され、選択した購読グループを購読している (`subscribed`) ユーザーのみが確実にターゲットオーディエンスに含まれます。

{% alert important %}
国際的な[通信コンプライアンスとガイドラインに]({{site.baseurl}}/user_guide/message_building_by_channel/sms_mms_rcs/laws_and_regulations/)準拠し、Brazeは選択したサブスクリプショングループに加入していないユーザーにSMSやRCSを送信することはない。  
{% endalert %}

![ユーザーが購読グループのドロップダウンを開き、[Messaging Service A for SMS] を強調表示した SMS 作成画面。]({% image_buster /assets/img/sms/sms_subgroup_select.png %})

## サブスクリプショングループを有効にする

SMS、MMS、またはRCSのサブスクリプショングループを有効にするには、以下を参照のこと：

{% tabs local %}
{% tab SMS %}
お客様の SMS オンボーディングプロセスで、Braze のオンボーディングマネージャーがお客様のダッシュボードアカウントに購読グループを設定します。お客様に協力して、必要な購読グループの数を決定し、適切な送信電話番号を購読グループに追加します。サブスクリプショングループのセットアップにかかる時間は、追加する電話番号のタイプによって異なる。例えば、ショートコードの申請には8～12週間かかるが、ロングコードは1日で設定できる。Braze ダッシュボードの設定についてご不明な点がある場合は、Braze担当者にお問い合わせください。  
{% endtab %}

{% tab MMS %}
MMS メッセージを送信するには、購読グループ内の少なくとも 1 つの番号で MMS の送信を有効にする必要があります。これは、購読グループの横にあるタグによって示されます。 

![[Messaging Service A for SMS] が強調表示された購読グループのドロップダウン。エントリーの先頭に "MMS "というタグが付く。]({% image_buster /assets/img/sms/mms_sub_group_tag.png %}){: style="max-width:40%"}
{% endtab %}

{% tab RCS %}
RCS メッセージを送信する前に、サブスクリプショングループ内に RCS 検証済み送信者が存在が存在している必要があります。 

RCS 検証済み送信者を追加するには、次の2通りの方法があります。
- 既存のサブスクリプショングループに追加する
- 新しいRCSサブスクリプショングループを作成する
いずれの方法を選択するかは、関心がある RCS ユースケースに大きく依存します。 

ご利用の連携に応じて、Braze は RCS 検証済み送信者を既存の SMS サブスクリプショングループに追加するか、または新しいサブスクリプショングループを設定します。いずれの場合も、カスタマーサクセスマネージャーがシームレスでコンプライアンスを維持した SMS トラフィックアップグレードをガイドします。
{% endtab %}
{% endtabs %}

## SMSトラフィックをRCSに移行する

SMS と RCS のサブスクリプショングループが分かれている場合、ワンステップキャンバスを使用して SMS または RCS からユーザーを移行できます。 

Brazeでは、最初は少量のユーザーにRCSを送信するテストを行い、時間をかけてより多くのユーザーをRCSサブスクリプショングループに移行することを推奨している。例えば、1,000,000人のユーザーがSMSサブスクリプショングループに登録している場合、まず全ユーザーを新しいサブスクリプショングループに移行し、次に50,000～100,000人（5～10%）の少人数のオーディエンスにセグメンテーションを行い、RCSメッセージをテストする。

### ステップ1:キャンバスの作成とエントリスケジュールの入力

キャンバスを作成し、識別しやすい名前を付ける（「SMS-RCS サブスクリプショングループ ユーザー転送」など）。適切なタイミングでキャンペーンをスケジュールします。

### ステップ2: オーディエンスを定義する

以下のいずれかの方法でオーディエンスを定義します。次に、[**送信設定**] ステップに進み、[**登録済みまたはオプトイン済みのユーザー**] を選択する。

| 方法                          | 説明                                                                                                                                                                                                 |
|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **セグメントを作成する**         | サブスクリプショングループのすべてのユーザー、またはセグメンテーションフィルター (e.g、ランダムな 5-10%) を使用したサブセットを含むセグメントを作成します。現在のユーザー群を反映するため、セグメントは送信のたびに送信前に更新されます。        |
| **キャンペーンまたはキャンバスフィルターを適用する** | キャンバスまたはキャンペーンの [**ターゲットオーディエンス**] ステップでオーディエンスを絞り込みます。柔軟性を高めるため、ページを離れずにターゲティングオプションを調整します。                                         |
{: .reset-td-br-1 .reset-td-br-2 role="presentation"}

### ステップ 3:ユーザー更新ステップを設定する

キャンバスにユーザー更新ステップを追加します。このステップで**高度な JSON エディター**を開いて以下の内容を入力します (一意のユーザー ID のフィールドには `braze_id` フィールドを使用することをお勧めします)。

{% raw %}
```json
{
  "attributes": [
    {
      "braze_id": "{{${braze_id}}}",
      "subscription_groups": [
        {
          "subscription_group_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxx",
          "subscription_state": "subscribed",
          "use_double_opt_in_logic": true
        }
      ]
    }
  ]
}
```
{% endraw %}

![前述の JSON コードが表示されている [ユーザー更新オブジェクト]。]({% image_buster /assets/img/sms/user_update_object.png %})()

### ステップ 4: キャンバスをテストする

より多くのオーディエンスにキャンバスを送信する前に、キャンバスが期待通りに機能することを確認するため、[キャンバスをテスト]({{site.baseurl}}/user_guide/engagement_tools/canvas/testing_canvases/sending_test_canvases/)することを強くお勧めします。

### ステップ 5: キャンバスを起動する

キャンバスのテストに成功したら、ユーザーサブセットに対してキャンバスを開始します。

ユーザーが正常に移行されたことを確認するには、更新されたいくつかの個々のユーザープロファイルをチェックすることをお勧めします。[**エンゲージメント**] タブで [**連絡先の設定**] を探し、スクロールしてユーザーが登録されているサブスクリプショングループを確認します。この時点で RCS サブスクリプショングループのトグルはオンになっているはずです。
