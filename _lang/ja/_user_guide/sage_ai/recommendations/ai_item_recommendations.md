---
nav_title: AI 項目のレコメンデーション
article_title: AI 項目のレコメンデーション
page_order: 15
alias: "/ai_item_recommendations/"
description: "この参照記事では、カタログ内のアイテムのAI アイテム推奨を作成する方法について説明します。"
---

# AI 項目のレコメンデーション

> カタログ内のアイテムのAI アイテム推奨を作成する方法について説明します。

AI アイテムの推奨事項を使用して、最も人気のある製品を計算したり、特定の[カタログ]({{site.baseurl}}/user_guide/personalization_and_dynamic_content/catalogs/) に対してカスタマイズされたAI 推奨事項を作成したりできます。レコメンデーションの作成後、パーソナライゼーションを使用してそれらの製品をメッセージに挿入できます。

## 前提条件

- 以下で説明する推奨タイプを使用するには、少なくとも1 つの[catalog][catalog] が必要です。
- カタログに保存されている一意の製品ID への参照を含む、Braze (カスタムイベントまたは購入オブジェクト) の購入またはイベントデータが必要です。
- AI パーソナライズされたレコメンドは、数百または数千のアイテムで最適に動作し、通常、購入またはインタラクションデータを持つ30,000 人以上のユーザーが使用できます。これはあくまでも目安であり、様々です。他の推奨タイプは、より少ないデータで動作できます。

## AI アイテムの推奨の作成

アイテムの推奨を作成するには:

1. **Analytics**> **AI Item Recommendation** に移動します。
2. **Create Prediction**> **AI Item Recommendation**を選択します。

また、個々のカタログからレコメンドストレートを作成することもできます。**Catalogs**ページからカタログを選択し、**推奨事項の作成**をクリックします。

### ステップ 1:推奨事項の詳細を追加する

まず、お勧めの名前とオプションの説明を入力します。

![][1]

### ステップ 2:おすすめを定義する {#recommendation-type}

次に、推奨タイプを選択します。すべての推奨タイプで、過去6 か月の項目インタラクション(購入またはカスタムイベント) データが使用されます。以下で説明するインタラクションとは、ステップ3 で選択した購入イベントまたはカスタムイベントのいずれかを指します。

- **最も人気がある:**カタログから最大30 個のアイテムを計算し、ワークスペース内のすべてのユーザーが最も頻繁に(最も購入された製品など) やり取りするようにします。
- **最新:**ユーザが最近操作した製品のリストを最大30 個作成します。
- **AI パーソナライズ:**新しい種類のディープラーニングである変圧器を使用して、各ユーザーが次に対話する可能性の高い項目のセットを予測します。次の最も可能性の高い項目のうち、最も可能性が高い項目から最も可能性が低い項目までを30 個まで計算します。このタイプの推奨では、Large Language Models (LLM) を使用してデータを他のBraze カスタマのデータと組み合わせることはありません。

{% alert tip %}
**最新の**または**AI Personalized**を使用している場合、個別の推奨事項を作成するのに十分なデータがないユーザーは、**最も人気のある**項目をフォールバックとして受け取ります。**最も人気のある**フォールバックを受信したユーザーの割合は、**Analytics**ページに表示されます。
{% endalert %}

#### ステップ2a:事前の購入またはやり取りを除外する(オプション)

ユーザがすでに購入した、またはインタラクションしたアイテムを提案しないようにするには、**ユーザが以前に**とインタラクションしたアイテムを推奨しません。このオプションは、推奨**Type** が**AI Personalized** に設定されている場合にのみ使用できます。

![][2-3]

この設定により、ユーザがすでに購入または対話している項目が、最近推奨が更新された場合、メッセージで再び表示されないようにします。おすすめの更新間に購入された、またはやり取りされたアイテムがまだ表示される場合があります。アイテムレコメンドの無料バージョンでは、更新は毎週行われます。AI Item Recommendations Pro の場合、更新は24 時間ごとに行われます。

たとえば、AI Item Recommendations Pro を使用している場合、ユーザが何かを購入し、その後30 分以内にマーケティングメールを受信した場合、購入したばかりのアイテムは、メールから期限内に除外されないことがあります。ただし、24時間後に送信されるメッセージには、その項目は含まれません。

#### ステップ2b:カタログを選択

まだ入力されていない場合は、この推奨がアイテムをプルする[catalog][catalog] を選択します。

#### ステップ2c:選択範囲の追加(オプション)

推奨事項をさらに制御したい場合は、[選択]({{site.baseurl}}/user_guide/personalization_and_dynamic_content/catalogs/selections/)を選択してカスタムフィルタを適用します。選択は、ブランド、サイズ、場所など、カタログ内の特定の列によって推奨事項をフィルタリングします。「Liquid」を含む選択は、おすすめでは使用できません。

![][2-2]

{% alert tip %}
選択したものが見つからない場合は、まずカタログに設定されていることを確認してください。
{% endalert %}

### ステップ 3:推奨を駆動するインタラクションを選択します

次に、この推奨を最適化するイベントを選択します。このイベントは、通常は購入ですが、アイテムとのあらゆる種類のやり取りでもかまいません。

次のために最適化できます。

- [Purchase Object]({{site.baseurl}}/api/objects_filters/purchase_object/)のイベントを購入する
- 購入を表すカスタムイベント
- 他のアイテムインタラクションを表すカスタムイベント(製品ビュー、クリック、メディア再生など)

**カスタムイベント**を選択した場合は、リストからイベントを選択します。

![][3]

### ステップ 4: 対応するプロパティ名を選択します {#property-name}

おすすめを作成するには、インタラクションイベント(購入オブジェクトまたはカスタムイベント) のどのフィールドに、カタログ内のアイテムの`id` フィールドに一致する一意の識別子があるかをBraze に伝える必要があります。わかりませんか?[要件](#requirements)を参照してください。

**Property Name**でこのフィールドを選択します。

**Property Name** フィールドには、SDK からBraze に送信されるフィールドのリストが事前に入力されます。十分なデータが提供されている場合、これらのプロパティは、正しいプロパティである確率順にランク付けされます。カタログの`id` フィールドに対応するものを選択します。

![][4]

#### 要件

プロパティを選択するには、いくつかの要件があります。

- 選択したカタログの`id` フィールドにマップする必要があります。
- **オブジェクトの購入を選択した場合:**`product_id` またはインタラクションイベントの`properties` フィールドである必要があります。
- **カスタムイベントを選択した場合:**カスタムイベントの`properties` のフィールドである必要があります。
- フィールドはネストできます
- このフィールドは、1 つのイベント内の複数のカタログアイテムの配列に含めることができます。自動的に平坦化されます。

#### マッピングの例

以下のマッピング例は、どちらもこのサンプル・カタログを参照します。

<style type="text/css">
.tg td{word-break:normal;}
.tg th{word-break:normal;font-size: 14px; font-weight: bold; background-color: #f4f4f7; text-transform: lowercase; color: #212123; font-family: "Sailec W00 Bold",Arial,Helvetica,sans-serif;}
.tg .tg-0pky{border-color:inherit;text-align:left;vertical-align:top;word-break:normal}
</style>
<table class="tg">
<thead>
  <tr>
    <th class="tg-0pky">ID</th>
    <th class="tg-0pky">タイトル</th>
    <th class="tg-0pky">価格</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0pky">ADI-BL-7</td>
    <td class="tg-0pky">アディダスブラックサイズ7</td>
    <td class="tg-0pky">100.00 米ドル</td>
  </tr>
  <tr>
    <td class="tg-0pky">ADI-RD-8</td>
    <td class="tg-0pky">アディダスレッドサイズ8</td>
    <td class="tg-0pky">100.00 米ドル</td>
  </tr>
  <tr>
    <td class="tg-0pky">ADI-WH-9</td>
    <td class="tg-0pky">アディダスホワイトサイズ9</td>
    <td class="tg-0pky">100.00 米ドル</td>
  </tr>
  <tr>
    <td class="tg-0pky">ADI-PP-10</td>
    <td class="tg-0pky">アディダスパープルサイズ10</td>
    <td class="tg-0pky">75.00 米ドル</td>
  </tr>
</tbody>
</table>

{% tabs %}
{% tab Custom event %}

たとえば、カスタムイベント`added_to_cart` を使用して、顧客がチェックアウトする前に同様の製品をお勧めできるようにしましょう。イベント`added_to_cart` のイベント・プロパティーは`product_sku` です。

次に、`product_sku` プロパティには、サンプルカタログの`id` 列の値の少なくとも1 つが含まれている必要があります。"ADI-BL-7"、"ADI-RD-8"、"ADI-WH-9"、または"ADI-PP-10"すべてのカタログアイテムにイベントは必要ありませんが、推奨エンジンが作業するのに十分なコンテンツを持つように、それらの一部が必要です。

##### カスタムイベントオブジェクトの例

このイベントには`"product_sku": "ADI-BL-7"` があり、サンプルカタログの最初の項目と一致します。

```json
{
  "events" : [
    {
      "external_id" : "user1",
      "app_id" : "your-app-id",
      "name" : "added_to_cart",
      "time" : "2024-07-16T19:20:30+01:00",
      "properties" : {
        "product_sku": "ADI-BL-7"
      }
    }
  ]
}
```

{% endtab %}
{% tab Purchase object %}

購入オブジェクトは、購入が行われるとAPI を通過します。

マッピングに関しては、カスタムイベントと同様に購入オブジェクトにも同様のロジックが適用されますが、購入オブジェクトの`product_id` または`properties` オブジェクトの項目を使用するか選択できます。

すべてのカタログアイテムのイベントは必要ありませんが、推奨エンジンに十分なコンテンツが含まれるようにするには、これらのイベントの一部が必要です。

##### 製品ID にマップされた購入オブジェクトの例

このイベントには`"product_id": "ADI-BL-7` があり、カタログの最初の項目にマップされます。

```json
{
  "purchases": [
    {
      "external_id": "user1",
      "app_id": "11ae5b4b-2445-4440-a04f-bf537764c9ad",
      "product_id": "ADI-BL-7",
      "currency": "USD",
      "price": 100.00,
      "time": "2024-07-16T19:20:30+01:00",
      "properties": {
        "color": "black",
        "checkout_duration": 180,
        "size": "7",
        "brand": "Adidas"
      }
    }
  ]
}
```

##### プロパティフィールドにマップされた購入オブジェクトの例

このイベントのプロパティは`"sku": "ADI-RD-8"` で、カタログの2 番目の項目にマップされます。

```json
{
  "purchases": [
    {
      "external_id": "user1",
      "app_id": "11ae5b4b-2445-4440-a04f-bf537764c9ad",
      "product_id": "shoes",
      "currency": "USD",
      "price": 100.00,
      "time": "2024-07-16T19:20:30+01:00",
      "properties": {
        "sku": "ADI-RD-8",
        "color": "red",
        "checkout_duration": 180,
        "size": "8",
        "brand": "Adidas"
      }
    }
  ]
}
```

{% endtab %}
{% endtabs %}

### ステップ 5: 推奨事項をトレーニングする

準備ができたら、**推奨の作成**を選択します。このプロセスは、完了までに10 分から36 時間かかることがあります。推奨事項が正常にトレーニングされるか、作成が失敗した理由の説明が表示されると、E メールの更新が表示されます。

推奨事項は**Predictions** ページにあり、必要に応じて編集またはアーカイブできます。推奨は、毎月1回自動的に再試行されます。

## 分析

おすすめの分析を表示して、ユーザがおすすめした項目とおすすめモデルの精度を確認できます。

1. **Analytics**> **Item Recommendation**に移動します。
2. リストからおすすめを選択します。

ページの上部で、精度やカバレッジなど、おすすめに関する統計を見つけることができます。

![][5]

これらのメトリックは、次の表で定義されます。 

| メトリック| 説明|
| ------------------- | ---------- |
| Precision | モデルがユーザーが購入した次のアイテムを正しく推測した時間のパーセンテージ。精度は、特定のカタログサイズとミックスに大きく依存します。また、モデルが正しい頻度を理解するためのガイドとして使用する必要があります。<br><br>過去のテストでは、モデルが6～20%の精度で良好な性能を発揮していることがわかりました。このメトリックは、モデルが次回再試行するときに更新されます。|
| Coverage | カタログ内の使用可能なアイテムのうち、少なくとも1 人のユーザーに推奨されるものの割合。最も人気のあるものよりも、パーソナライズされたアイテムのおすすめで、より高いアイテムのカバレッジが期待できます。|
| レコメンドタイプ| パーソナライズされた、または最新のレコメンドを受信するユーザの割合と、最も人気のあるアイテムのフォールバックの割合。フォールバックは、パーソナライズされた、または最新の推奨を生成するのに十分なデータがないユーザーに送信されます。|
{: .reset-td-br-1 .reset-td-br-2}

次のセクションでは、カタログ内のアイテムの内訳を2つの列に分割して示します。

- **パーソナライズされたアイテム**または**最新のアイテム:**この列には、カタログ内の各項目が、最も推奨されるユーザーの降順で表示されます。この列には、モデルによって各項目に割り当てられたユーザの数も表示されます。
- **最も人気のある商品**この列には、カタログ内の各項目が人気の高い順に表示されます。ここでの人気とは、ユーザーがワークスペース全体で最も頻繁に操作するカタログ内の項目を指します。パーソナライズされた場合や、個々のユーザに対して最新の計算ができない場合に、フォールバックとして使用されます。

![][6]

**おすすめ概要**には、おすすめが最後に更新された日時など、選択したおすすめ設定の概要が表示されます。

![][7]{: style="max-width:45%" }

## メッセージングでの推奨事項の使用

![][10]{: style="max-width:30%;float:right;margin-left:15px;"}

おすすめがトレーニングを終了したら、Liquidでメッセージをカスタマイズして、そのカタログで最も人気のある製品を挿入できます。リキッドは、メッセージコンポーザーのパーソナライゼーションウィンドウで生成できます。

1. パーソナライゼーションをサポートするメッセージコンポーザでは、<i class="fa-solid fa-circle-plus" style="color: #12aec5;" title="パーソナライゼーションを追加"></i>をクリックしてパーソナライゼーションウィンドウを開きます。
2. **Personalization Type** では、**Item Recommendation** を選択します。
3. **Item Recommendation Name**の場合は、作成した推奨を選択します。
4. **Number of Predicted Items**には、挿入したい上位製品の数を入力します。たとえば、購入数の多い上位3 つのアイテムを表示できます。
5. **Information to Display**では、カタログのどのフィールドを各アイテムに含めるかを選択します。各アイテムのこれらのフィールドの値は、この推奨に関連付けられたカタログから取得されます。
6. **Copy**アイコンをクリックし、メッセージ内の必要な場所に液体を貼り付けます。

## AI アイテムの推奨階層

次の表に、AI Item Recommendations の無償バージョンとpro バージョンの違いを示します。

| Area                   | Free version                          | AI Item Recommendations Pro              |
| :---------------------- | ------------------------------------- | :--------------------------------------- |
| 項目更新頻度| 毎週| 毎日|
| モデルの再トレーニング頻度| Monthly | Monthly |
| 最大推奨事項| タイプごとに1 推奨事項<sup>1</sup> | タイプごとに100 推奨事項<sup>1</sup> |

<sup>1\.利用可能な推奨タイプは、AI パーソナライズ、最新、および最も一般的です。</sup>

## よくある質問

### " 最も人気のある" 項目が他のモデルの推奨事項に混在する原因は何ですか?

推奨エンジンがリストをキュレーションすると、まず"Most lanced"または"AI Personalized"のように、選択した特定のモデルに基づいてパーソナライズされた選択が優先されます。このモデルが、何らかの理由で30の推奨事項の完全なリストを満たすことができない場合、すべてのユーザーの中で最も人気のある項目の一部が追加され、各ユーザーが常に完全な推奨事項を持っていることを確認します。

これは、いくつかの特定の条件下で発生します。

- このモデルでは、条件に一致する項目が30 個未満検出されます。
- 関連する品目は、もはや入手できず、在庫にありません。
- 品目は現在の選択基準を満たしていません。おそらく、在庫やユーザーの好みの変更によるものです。

[1]: {% image_buster /assets/img/item_recs_1.png %}
[2-1]: {% image_buster /assets/img/item_recs_2-1.png %}
[2-2]: {% image_buster /assets/img/item_recs_2-2.png %}
[2-3]: {% image_buster /assets/img/item_recs_2-3.png %}
[3]: {% image_buster /assets/img/item_recs_3.png %}
[4]: {% image_buster /assets/img/item_recs_4.png %}
[5]: {% image_buster /assets/img/item_recs_analytics_1.png %}
[6]: {% image_buster /assets/img/item_recs_analytics_2.png %}
[7]: {% image_buster /assets/img/item_recs_analytics_3.png %}
[10]: {% image_buster /assets/img/add_personalization.png %}
[catalog]: {{site.baseurl}}/user_guide/personalization_and_dynamic_content/catalogs/
