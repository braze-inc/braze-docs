---
nav_title: プロモーション・コード
article_title: プロモーション・コード
page_order: 5
toc_headers: h2
alias: "/promotion_codes/"
description: "この参考記事では、プロモーションコード・リストを作成し、キャンペーンやキャンバスに追加する方法について説明する。"
---

# プロモーションコード

> このページでは、プロモーションコードリストを作成し、キャンペーンおよびキャンバスに追加する方法について説明します。

## CDI の仕組み

プロモーションコード (別名「プロモコード」) は、購入に重点を置いたインタラクションを促進することで、ユーザーのエンゲージメントを維持するための優れた方法です。プロモーションコードのリストからプルするメッセージを作成できます。 

各プロモーションコードの有効期限は6 か月までで、[Support]({{site.baseurl}}/user_guide/administrative/access_braze/support/) に連絡することで、有効期限前に削除できます。1つのリストにつき最大2000万個のコードを保存および管理できます。プロモーションコードのパフォーマンスを管理し、分析することで、プロモーション戦略やメッセージングのターゲットを決定できます。

{% alert important %}
プロモーションコードは、キャンバスのアプリ内メッセージでは送信できません。[early access](#promotion-codes-iam-campaigns)に参加している場合、アプリ内メッセージキャンペーンでプロモーションコードを送信できます。
{% endalert %}

## プロモーションコードのリストを作成する

### ステップ 1:プロモーションコードセクションに進む

![プロモーションコードを作成するボタン。]({% image_buster /assets/img/promocodes/promocode1.png %}){: style="float:right;max-width:30%;margin-left:15px;"}

1. ダッシュボードから [**データ設定**] > [**プロモーションコード**] に移動します。
2. **プロモーションコードリストの作成**を選択します。

### ステップ 2:プロモーションコードの名前は?

1. プロモーションコードのリストに名前を付け、任意の説明を追加する。
2. 次に、プロモーション・コードのコード・スニペットを作成する。 

コードスニペットを作成する際に考慮すべき詳細を次に示します。

- 一度保存したコードスニペットは編集できません。
- スニペットは大文字と小文字を区別する。例えば、"Birthday_promo "と "birthday_promo "は異なるスニペットとして認識される。
- この一連のプロモーションコードを参照するには、Liquid でスニペット名を使用します。
- コードスニペットが別のリストでまだ使用されていないことを確認します。

![コードスニペット「spring25」が示されている「SpringSale2025」という名前のプロモーションコードリスト。]({% image_buster /assets/img/promocodes/promocode3.png %}){: style="max-width:80%"}

### ステップ 3:プロモーションコードオプションの選択

各プロモーションコード・リストには、作成時に設定された有効期限と時間がある。最長有効期限は、リストを作成または編集した日から6ヶ月先までである。 

その時間内であれば、有効期限を何度でも変更・更新することができる。この有効期限は、このリストに追加されたすべてのコードに適用される。有効期限が切れると、そのコードはBrazeシステムから削除され、そのリストのコードスニペットを呼び出すメッセージは送信されなくなる。

![残りのすべてのコードが2025年4 月30 日の午前12 時に期限切れになる期限設定をリストします。]({% image_buster /assets/img/promocodes/promocode4.png %}){: style="max-width:80%"}

また、オプションでカスタマイズした閾値アラートを設定するオプションもある。これらのアラートを設定すると、リスト内の利用可能なプロモーションコードが少なくなったとき、またはプロモーションコードリストの有効期限が近づいたときに、指定された受信者にEメールが送信される。受信者は 1 日 1 回通知を受け取ります。

!["marketing@abc.com" を通知するしきい値アラートの例。プロモーションコードリストの有効期限が5 日以内の場合。]({% image_buster /assets/img/promocodes/promocode5.png %}){: style="max-width:80%"}

### ステップ 4:プロモーションコードのアップロード

Braze ではコードの作成や償還が管理されません。つまり、プロモーションコードを CSV ファイルに生成し、Braze にアップロードする必要があります。 

CSV ファイルが次のガイドラインに従っていることを確認します。

- プロモーションコードの列も含まれています。
- 1行に1つのプロモーションコードがある。

[Voucherify]({{site.baseurl}}/partners/ecommerce/loyalty/voucherify/) との組み込み統合または [Talon.One]({{site.baseurl}}/partners/ecommerce/loyalty/talonone/) を使用して、プロモーションコードを作成しエクスポートすることができます。

{% alert important %}
最大ファイルサイズは 100 MB、最大リストサイズは 20 MM の未使用コードです。間違ったファイルがアップロードされた場合は、新しいファイルをアップロードすれば、前のファイルは置き換えられる。
{% endalert %}

1. アップロードが完了したら、「**リストを保存**」を選択し、入力したすべての詳細とコードを保存する。

!["springsale" という名前のCSV ファイル。正常にアップロードされました。]({% image_buster /assets/img/promocodes/promocode7.png %})

{:start="2"}
2\.保存を選択すると、[**インポート履歴**] に新しい行が表示されます。
3\.インポートが完了したかどうかを確認するためにテーブルを更新するには、テーブルの上部にある <span style="font-size: 14px;margin-bottom: .5rem;height: 16px;width: 16px;" class="fas fa-sync" ></span> [**同期**] を選択します。

![アップロード中のプロモーションコード。]({% image_buster /assets/img/promocodes/promocode8.png %})

{% alert note %}
大きなファイルはインポートに数分かかる。待つ間、インポートが進行している間はページを離れて他の作業をすることができます。インポートが終了すると、ステータスはテーブルの**Complete** に変わります。
{% endalert %}

#### プロモーションコード一覧を更新する

リストを更新するには、既存のリストを1つ選択する。名前、説明、リストの有効期限、しきい値アラートを変更できる。また、新しいファイルをアップロードし、「**Update List**」を選択することで、リストにさらにコードを追加することもできる。

インポート日に関係なく、リスト内のすべてのコードの有効期限が同じになります。

### ステップ 5: プロモーションコードを使用する

プロモーションコードをメッセージで送信するには:

1. プロモーションコードリストの作成時に設定したコードスニペットをコピーするには、**Copy Snippet** を選択します。

![メッセージに貼り付けるスニペットをコピーするオプション。]({% image_buster /assets/img/promocodes/promocode9.png %}){: style="max-width:70%"}

{:start="2"}
2\.そこから、このコードをダッシュボード内のメッセージに貼り付けることができる。

![「Treat yourself to something nice this spring with our exclusive offer」とその後にコードスニペットが続くメッセージの例。]({% image_buster /assets/img/promocodes/promocode10.png %}){: style="max-width:70%"}

[Liquid]({{site.baseurl}}/user_guide/personalization_and_dynamic_content/liquid/)を使用すると、アップロードされたCSVファイルから固有のプロモーションコードの1つをメッセージに挿入できます。そのコードはBrazeのバックエンドで送信済みとマークされ、他のメッセージが同じコードを送信しないようにする。

#### プロモーションコードをユーザーに送信する

マルチチャネルキャンペーンやキャンバスステップでコードスニペットが使用されると、各ユーザーは常にユニークなコードを受け取る。キャンバスのさまざまなステップで、各ユーザーは複数のプロモーションコードを受け取る。

ユーザが複数のチャネルを介してコードを受信できる場合、ユーザは各チャネルを介して同じコードを受信します。たとえば、ユーザが2 つのチャネルを介して2 つのメッセージを受信した場合、そのユーザは1 つのコードのみを受信します。これは、レポートの目的でも同様です。1 つのコードが送信され、ユーザーは 2 つのチャネルを通じてこのコードを受信します。例えば、マルチチャンネルのキャンバス・ステップの場合、ユーザーが使用するコードは1つだけである。

{% alert important %}
プロモーションコードを取り込むキャンペーンからテストまたはライブメッセージを送信する際に、利用可能なプロモーションコードが残っていない場合、メッセージは送信されない。
{% endalert %}

#### プロモーションコード付きのテストメッセージを送信する

テスト送信とシードグループのメール送信では、特にリクエストがない限り、プロモーションコードが使用される。Brazeのアカウントマネージャーに連絡して、この機能の動作を更新し、テスト送信やシードグループのメール送信時にプロモーションコードが使用されないようにする。

## 使用されたコードの数の判断

残りのコード数は、**プロモーションコード**ページのプロモーションコード一覧の**残り**列にあります。

![未使用コードがあるプロモーションコードの例。]({% image_buster /assets/img/promocodes/promocode11.png %})

このコード数は、既存のプロモーションコード一覧ページを再訪した際にも確認できる。未使用のコードをCSV ファイルとしてエクスポートすることもできます。 

!["Black Friday Sale"という名前のプロモーションコード。残りのコードが992 個あります。]({% image_buster /assets/img/promocodes/promocode12.png %}){: style="max-width:70%"}

### アプリ内メッセージキャンペーンでのプロモーションコードの使用 {#promotion-codes-iam-campaigns}

{% alert important %}
アプリ内メッセージキャンペーンでのプロモーションコードの使用は、現在早期アクセス段階です。この初期のアクセスに参加したい場合は、Braze アカウントマネージャーに連絡してください。
{% endalert %}

[アプリ内メッセージキャンペーン]({{site.baseurl}}/user_guide/message_building_by_channel/in-app_messages)を作成した後、[プロモーションコードリストスニペット]({{site.baseurl}}/user_guide/personalization_and_dynamic_content/promotion_codes#creating-a-promotion-code-list)をアプリ内メッセージボディに挿入できます。 

アプリ内メッセージのプロモーションコードは、ユーザがアプリ内メッセージの表示をトリガした場合にのみ控除され、使用されます。

## マルチチャネルとシングルチャネルの送信

マルチチャネル、シングル送信キャンペーン、キャンバスでは、メッセージのリキッドで参照されるすべてのプロモーションコードは、メッセージが送信される**前に**使用されるように差し引かれ、次のことが起こることを確認する：

- マルチチャネル・メッセージでは、同じプロモーション・コードが複数のチャネルで使用される。
- 余分なプロモーションコードは、メッセージが失敗したり中断した場合には使用されない。

リキッド条件ロジックタグによって分割された1つのメッセージの中で、ユーザーが2つのプロモーションコードリストを参照している場合、ユーザーがどちらの条件フローをたどったかにかかわらず、すべてのプロモーションコードが差し引かれる。

ユーザーが新しいキャンバスステップにエントリする場合またはキャンバスに再エントリする場合に、プロモーションコード Liquid スニペットがそのユーザー宛てのメッセージに再度適用されると、新しいプロモーションコードが使用されます。

### ユースケース

以下の例では、プロモーションコード・リスト`vip-deal` と`regular-deal` の両方が差し引かれる。Liquid は以下のとおりです。

{% raw %}
```
{% if user.is_vip %}
  {% promotion('vip-deal') %}
{% else %}
  {% promotion('regular-deal') %}
{% endif %} 
```
{% endraw %}

Brazeでは、使用予定数よりも多くのプロモーションコードをアップロードすることを推奨している。プロモーションコード・リストの有効期限が切れたり、プロモーションコードがなくなったりすると、それ以降のメッセージは中断される。

{% alert tip %}
**Brazeでプロモーションコードがどのように使われるかを例えてみよう。**<br><br>メッセージを送ることは、郵便局で手紙を送るようなものだと想像してほしい。その手紙を店員に渡すと、クーポン券が同封されていることがわかる。店員は1枚目のクーポンを束から取り出し、封筒に入れる。店員は手紙を送ったが、何らかの理由で手紙は郵便物の中に紛れ込んでしまった（クーポンも紛失してしまった）。<br><br>このシナリオでは、ブレイズは郵便局員であり、あなたのプロモーション・コードはクーポンである。ウェブフックの結果にかかわらず、プロモーションコードのスタックから引き出された後は、それを取り戻すことはできない。
{% endalert %}

## よくある質問

### プロモーション・コードで使用できるメッセージング・チャンネルは？

プロモーションコードは現在、Eメール、モバイルプッシュ、ウェブプッシュ、コンテンツカード、ウェブフック、SMS、WhatsAppに対応している。Brazeのトランザクションメールキャンペーンとアプリ内メッセージは、現在プロモーションコードをサポートしていない。

### テスト送信やシード送信はプロモーションコードを使い切るのか？

デフォルトでは、テスト送信とシードグループのメール送信では、テスト送信ごとにユーザーごとのプロモーションコードが使用されます。しかし、Brazeのアカウントマネージャーに連絡すれば、テスト中にプロモーションコードを使用しないようにこの動作を更新することができる。

### マルチチャネルキャンペーンやキャンバスステップにおいて、プロモーションコードはどのように機能するのか？

プロモーションコードは、メッセージが送信される前に差し引かれる。キャンペーンやキャンバスのメッセージングチャンネルが送信する場合、クワイエットアワー、レート制限、回数制限、終了基準などの理由でプロモーションコードが使用される可能性がある。ただし、いずれかのメッセージ・チャンネルが送信された場合は、1つのプロモーション・コードが使用される。

### 同じプロモーションコード一覧を参照するリキッドスニペットがメッセージ内に複数ある場合はどうなるのか？

同じプロモーションコードが、メッセージ内の Liquid スニペットのすべてのインスタンスにテンプレート化されます。

### プロモーションコードのリストが期限切れや空だった場合はどうなるのか？

期限切れのコードは6 か月後に削除されます。

メッセージに空または期限切れのリストからのプロモーションコードが含まれているはずだった場合、メッセージはキャンセルされる。 

メッセージに条件付きでプロモーションコードを挿入するリキッドロジックが含まれている場合、メッセージにプロモーションコードが含まれているはずだった場合のみ、メッセージはキャンセルされる。メッセージにプロモーションコードが含まれていなければ、メッセージは正常に送信される。

### プロモーションコードをユーザのプロファイルに保存して、フォローアップメッセージで使用できるようにするにはどうすればよいですか?

後続のメッセージで同じプロモーションコードを参照するには、コードをカスタム属性としてユーザープロファイルに保存する必要があります。これを行うには、[Braze-to-Braze webhook]({{site.baseurl}}/user_guide/message_building_by_channel/webhooks/braze_to_braze_webhooks/) を同じキャンペーンまたはキャンバスメッセージステップにアタッチします。

