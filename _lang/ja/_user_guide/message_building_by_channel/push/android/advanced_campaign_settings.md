---
nav_title: "プッシュキャンペーンの詳細設定"
article_title: プッシュキャンペーンの詳細設定
page_order: 5
page_layout: reference
description: "この参考記事では、優先度、カスタムURL、配信オプションなど、アドバンストプッシュキャンペーンの設定について説明します。"
platform: Android
channel:
  - push
tool:
  - Campaigns

---

# プッシュキャンペーンの詳細設定

> Braze ダッシュボードから送信される Android および Fire OS のプッシュ通知には、さまざまな詳細設定が用意されています。この記事では、これらの機能と、それらをうまく使用する方法について説明します。

## 通知 ID {#notification-id}

通知IDは、選択したメッセージカテゴリの一意の識別子であり、そのIDからの最新のメッセージのみを尊重するようにメッセージングサービスに通知します。通知 ID を設定すると、古くて無関係なメッセージが山積みになるのではなく、最新の関連性の高いメッセージのみを送信できます。

通知 ID を割り当てるには、ID を追加したいプッシュの作成ページに移動して [**設定**] タブを選択します。「**通知 ID**」セクションに整数を入力します。発行後にこの通知を更新するには、以前に使用したのと同じ ID で別の通知を送信します。

![\]({% image_buster /assets/img_archive/notification_ids.png %}){: style="max-width:80%;" }

## タイム・トゥ・ライブ (TTL) {#ttl}

Time-to-Live (TTL) フィールドでは、プッシュメッセージサービスにメッセージを保存する期間をカスタマイズできます。有効期間のデフォルト値は、Firebase クラウドメッセージング (FCM) の場合は 4 週間、Amazon デバイスメッセージング (ADM) の場合は 31 日です。

たとえば、アプリがゲームで、ユーザーが毎日ゲームを続けている場合にゲーム内通貨ボーナスを提供するとします。特定の日数を超えると、そのストリークが壊れる危険性があることをユーザーに通知するプッシュを送信できます。ただし、ユーザーが4週間後にデバイスをゲームアプリに再接続し、存続時間をデフォルトに設定した場合、それらのメッセージはメッセージングサービスですでに期限切れになり、配信されません。

## Firebase メッセージ配信の優先順位 {#fcm-priority}

**Firebase Messaging の配信優先度フィールドでは**、プッシュを Firebase Cloud Messaging に「通常」または「高」の優先度で送信するかどうかを制御できます。詳細については、[FCM のドキュメントを参照してください](https://firebase.google.com/docs/cloud-messaging/concept-options#setting-the-priority-of-a-message)。

## 要約テキスト

概要テキストを使用すると、**拡張通知ビューに追加のテキストを設定できます**。概要テキストは、展開されたビューのメッセージ本文の下に表示されます。画像付きの通知のキャプションとしても機能します。

![][9]

画像を含むプッシュ通知の場合、メッセージテキストは折りたたまれたビューに表示され、概要テキストは通知が展開されると画像のキャプションとして表示されます。この動作の例については、次のアニメーションをご覧ください。

![概要テキストの動作] [15]

## カスタム URI

**カスタム URI** 機能では、通知がクリックされたときに移動するウェブ URL または Android リソースを指定できます。カスタム URI が指定されていない場合は、通知をクリックするとユーザーがアプリに移動します。カスタム URI を使用してアプリ内のディープリンクを作成したり、アプリの外部にあるリソースにユーザーを誘導したりできます。これは [Messaging API] [13] **またはプッシュコンポーザーの設定で指定できます**。

![カスタム URI] [12]

## 通知の表示優先度

{% alert important %}
通知表示優先度設定は、Android O 以降を搭載しているデバイスでは使用されなくなりました。新しいデバイスの場合は、[通知チャネル設定で優先順位を設定します](https://developer.android.com/training/notify-user/channels#importance)。
{% endalert %}

プッシュ通知の優先度レベルは、他の通知と比較して通知トレイでの通知の表示方法に影響します。また、優先度の高いメッセージは常に直ちに送信されるのに対し、通常のメッセージや優先度の低いメッセージはレイテンシーを少し長くして送信したり、バッテリー寿命を延ばすためにバッチ処理したりする場合があるため、速度と配信方法にも影響します。

この機能は、メッセージの重要度や時間的制約に基づいてメッセージを区別するのに役立ちます。たとえば、危険な道路状況に関する通知は高い優先度を受け取るのに適していますが、進行中の販売に関する通知は優先度を低くする必要があります。ユーザーの受信トレイで常にトップの座を占めたり、他のアクティビティを中断したりすると、悪影響が生じる可能性があるため、送信する通知に混乱を招くような優先度を使用する必要があるかどうかを検討する必要があります。

Android O では、通知の優先度が通知チャネルのプロパティになりました。設定時に開発者と協力してチャンネルの優先順位を定義し、通知音を送信するときにダッシュボードを使用して適切なチャンネルを選択する必要があります。OS以前のバージョンのAndroidを実行しているデバイスでは、BrazeダッシュボードとMessaging APIを使用してAndroidおよびFire OS通知の優先度レベルを指定できます。

特定の優先順位をユーザー全体に伝えるには、[通知チャネル構成] [17] で間接的に優先度を指定し (O+ デバイスを対象)、ダッシュボードから個別の優先度を (ターゲット O デバイスに) 送信することをお勧めします。

Android または Fire OS のプッシュ通知に設定できる優先度レベルについては、次の表を参照してください。

| 優先順位 | 説明| `priority` 値 (API メッセージ用) |
|------|-----------|----------------------------|
| 最大 | 緊急または緊急のメッセージ。| | `2`
| 高 | 友達からの新着メッセージなどの重要なコミュニケーション | `1` |
| デフォルト | ほとんどの通知。メッセージが他の優先度タイプに明示的に該当しない場合に使用してください。| `0` |
| 低い | ユーザーに知ってもらいたいが、すぐに行動する必要はない情報 | `-1` |
| 最小 | コンテキスト情報または背景情報 | | `-2`
{: .reset-td-br-1 .reset-td-br-2 .reset-td-br-3}

詳細については、[Android 通知に関する][2] Google のドキュメントを参照してください。

## プッシュカテゴリー

Android プッシュ通知には、通知が事前定義されたカテゴリに分類されるかどうかを指定するオプションがあります。Android システムの UI では、このカテゴリを使用して、ユーザーの通知トレイのどこに通知を配置するかについて、ランキングやフィルタリングの決定を行う場合があります。

![カテゴリがデフォルト設定の None に設定された設定タブ] [52]

| カテゴリー | 説明 |
|---|-------|
| なし | デフォルトオプション。|
| アラーム | アラームまたはタイマー。|
| コール | 着信コール（音声またはビデオ）または同様の同期通信要求。|
| 電子メール | 非同期一括メッセージ (電子メール)。|
| エラー | バックグラウンド操作または認証ステータスのエラー。|
| イベント | カレンダーイベント。|
| メッセージ | 受信ダイレクトメッセージ (SMS、インスタントメッセージなど)。|
| 進行状況 | 長時間実行されているバックグラウンド操作の進行状況。|
| プロモーション | プロモーションまたは広告。|
| 推奨事項 | 1つのことに対する具体的でタイムリーな推奨事項。|
| リマインダー | ユーザーがスケジュールしたリマインダー。|
| サービス| 実行中のバックグラウンドサービスの表示。|
| ソーシャル| ソーシャルネットワークまたは共有の更新。|
| ステータス | デバイスまたはコンテキストステータスに関する継続的な情報。|
| システム | システムまたはデバイスのステータス更新。システム用に予約されています。|
| トランスポート| 再生用のメディアトランスポートコントロール。|
{: .reset-td-br-1 .reset-td-br-2}

## プッシュ・ビジビリティ

Android プッシュ通知には、ユーザーのロック画面での通知の表示方法を決定するオプションフィールドが用意されています。可視性のオプションと説明については、次の表を参照してください。

| 可視性 | 説明 |
|---|-----|
| 公開 | 通知がロック画面に表示される |
| 非公開 | 通知はメッセージとして「コンテンツを非表示」として表示されます|
| シークレット| ロック画面に通知が表示されない |
{: .reset-td-br-1 .reset-td-br-2}

さらに、Android ユーザーは、デバイスの通知プライバシー設定を変更することで、ロック画面でのプッシュ通知の表示方法を無効にできます。この設定は、プッシュ通知の可視性を上書きします。

![可視性の設定が有効で、プライベートに設定されたダッシュボードのプッシュ優先ロケーション] [53]{: style="float:right;max-width:60%;margin-left:15px;"}

デバイスの通知プライバシー設定が「**すべてのコンテンツを表示」（デフォルト設定）の場合、可視性に関係なく、すべての通知がユーザーのロック画面に表示されます**。同様に、通知のプライバシーが「通知を表示しない」に設定されている場合、**通知はロック画面に表示されません**。通知のプライバシーが [**機密コンテンツを非表示**] に設定されている場合のみ、表示が反映されます。

Android Lollipop 5.0.0より前のデバイスでは、表示は影響を受けません。つまり、これらのデバイスにはすべての通知が表示されます。

詳細については、[Android ドキュメント] [51] を参照してください。

## 通知サウンド

Android O では、通知音は通知チャンネルのプロパティになりました。設定時に開発者と協力してチャンネルのサウンドを定義し、通知を送信するときにダッシュボードを使用して適切なチャンネルを選択する必要があります。

Android O より前のバージョンの Android を実行しているデバイスでは、Braze ではダッシュボードコンポーザーを使用して個々のプッシュメッセージのサウンドを設定できます。そのためには、デバイス上のローカルサウンドリソース (など`android.resource://com.mycompany.myapp/raw/mysound`) を指定します。 

このフィールドで [**デフォルト**] を選択すると、デバイス上でデフォルトの通知音が再生されます。これは [Messaging API] [13] **またはプッシュコンポーザーの設定で指定できます**。

![][11]

次に、ダッシュボードプロンプトに完全なサウンドリソース URI (たとえば`android.resource://com.mycompany.myapp/raw/mysound`) を入力します。

特定のサウンドでユーザー全体にメッセージを送るには、[通知チャンネル設定] [16] で間接的にサウンドを指定し（O+デバイスを対象）、ダッシュボードから個別のサウンドを送信する（ターゲット<Oデバイス）ことをお勧めします。

[2]: http://developer.android.com/design/patterns/notifications.html
[9]: {% image_buster /assets/img_archive/summary_text.png %}
[11]: {% image_buster /assets/img_archive/sound_android.png %}
[12]: {% image_buster /assets/img_archive/deep_link.png %}
[13]: {{site.baseurl}}/api/endpoints/messaging/
[15]: {% image_buster /assets/img_archive/messagesummary.gif %}
[17]: https://developer.android.com/training/notify-user/channels#importance
[16]: https://developer.android.com/training/notify-user/channels
[51]: https://developer.android.com/guide/topics/ui/notifiers/notifications
[52]: {% image_buster /assets/img_archive/braze_category.png %}
[53]: {% image_buster /assets/img_archive/braze_visibility.png %}
