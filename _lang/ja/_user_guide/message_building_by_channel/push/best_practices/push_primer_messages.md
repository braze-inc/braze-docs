---
nav_title: プッシュ・プライマー アプリ内メッセージ
article_title: プッシュ・プライマー アプリ内メッセージ
page_order: 1
page_type: reference
description: "この記事では、プッシュ・プライマー・アプリ内メッセージの前提条件と設定方法について説明する。"
channel: push

---

# アプリ内メッセージのプッシュプライマー

![ストリーミングアプリのアプリ内メッセージのプッシュプライマー。この通知は、「Movie Cannon からプッシュ通知を受け取りますか? 通知には新作映画やテレビ番組、その他のお知らせが含まれることがあり、いつでもオフにすることができます」というものです。][1]{: style="float:right;max-width:40%;margin-left:15px;border:none;"}

> ユーザーにプッシュ許可を求めるチャンスは一度しかないため、プッシュ登録を最適化することは、プッシュメッセージのリーチを最大化するために極めて重要である。これを実現するには、アプリ内メッセージを使って、ユーザーがオプトインを選択した場合、どのようなメッセージを受け取ることが期待できるかを、ネイティブのプッシュプロンプトを表示する前に説明すればよい。これはプッシュ・プライマーと呼ばれる。

Braze でプッシュプライマーのアプリ内メッセージを作成するには、iOS、Android、または Web のアプリ内メッセージを作成するときに、ボタンのクリック時動作「プッシュ通知の権限を要求」を使用できます。

## 前提条件

このガイドでは、新しいSDKバージョンでのみサポートされている、ボタンの[クリック時の動作を](#button-actions)使用している。これらのSDKの中には、まだリリースされていないものもある。現在のバージョンを確認するには、以下のリンクを参照のこと：

{% sdk_min_versions swift:5.4.0 android:21.0.0 web:4.0.3 %}

### 開発チームへの注意事項

#### Android

- **Android 12 以下: **プッシュはデフォルトでオプトインされているため、プッシュプライマーの実装は推奨しません。
- **Android 13 以上: **テスト中にプロンプトを何度か表示したい場合は、デバイス設定に入り、アプリのプッシュを無効にして、プライマーを再度表示できるようにします。

#### iOS

- iOSプロンプトは、オペレーティングシステムによって強制され、1回のインストー ルにつき1回しか表示できない。
- アプリのプッシュ設定が明示的にオンまたはオフの場合、プロンプトは表示されません。プロンプトは[暫定承認](https://developer.apple.com/documentation/usernotifications/asking_permission_to_use_notifications#3544375)を得たユーザーにのみ表示されます。
  - アプリのプッシュ設定がオンになっている場合、ユーザーがすでにオプトインしているため、Braze はアプリ内メッセージを表示しません。
  - アプリのプッシュ設定がオフになっている場合は、設定アプリでアプリの通知設定にユーザーを転送する必要がある。

##### 手動でコードを除去する

このチュートリアルを使って設定したアプリ内メッセージは、ユーザーがアプリ内メッセージボタンをクリックすると、ネイティブのプッシュ・プロンプト・コードを自動的に呼び出す。プッシュ通知の許可を 2 回要求したり、間違った時間に要求したりしないようにするには、開発者は、実装されている既存のプッシュ通知統合を変更して、アプリ内メッセージがユーザーに表示される最初のプッシュ通知プライマーであることを確認する必要があります。

開発者は、アプリやサイトのプッシュ通知の実装を見直し、プッシュ許可を要求するようなコードを手動で削除すべきである。例えば、以下のコードへの参照を探し、削除する：

{% tabs %}
{% tab OBJECTIVE-C %}
```objc
requestAuthorizationWithOptions
```
{% endtab %}
{% tab swift %}
```swift
requestAuthorization
```
{% endtab %}
{% tab JavaScript %}
```javascript
braze.requestPushPermission()
// or
appboy.registerAppboyPushMessages()
```
{% endtab %}
{% tab Java %}
```java
android.permission.POST_NOTIFICATIONS
```
{% endtab %}
{% endtabs %}

## ステップ 1:アプリ内メッセージを作成する

通常どおり [アプリ内メッセージを作成][2] します。

メッセージの種類とレイアウトを選択する。ユーザーが期待するプッシュ通知の内容を説明するのに十分なスペースを確保するため（そしてボタンが使えるようにするため）、Brazeはフルスクリーンかモーダルメッセージのどちらかを提案する。全画面のアプリ内メッセージの場合は画像が必要なことに注意してください。 

## ステップ 2:メッセージを構築する

さて、いよいよコピーを加える番だ！ここで、プッシュプライマーは、プッシュ通知をオンにするようにユーザーをプライミングする必要があることに注意してください。メッセージ本文では、ユーザーがプッシュ通知をオンにすべき理由を強調することをお勧めする。どのような種類の通知を送りたいのか、どのような価値を提供できるのか、具体的に説明すること。

例えば、あるニュースアプリは次のようなプッシュ・プライマーを使うかもしれない：

> 外出先でニュース速報プッシュ通知を有効にすると、重要なストーリーやトピックに関するアラートが表示されます。

ストリーミングアプリでは、次が使用される場合があります。

> Movie Cannon からプッシュ通知を取得しますか?通知には新作映画やテレビ番組、その他のお知らせが含まれることがあり、いつでもオフにすることができる。

ベストプラクティスとその他のリソースについては、[カスタムオプトインプロンプトの作成][3] を参照してください。

## ステップ 3:ボタン動作を指定する {#button-actions}

アプリ内メッセージにボタンを追加するには、[**ボタン 1**] と [**ボタン 2**] のテキストフィールドにテキストを追加します。これらがアプリ内メッセージのプライマリボタンとセカンダリボタンになります。ボタンテキストには「通知を許可する」と「今は許可しない」をお勧めしますが、割り当てることのできるボタンプロンプトはたくさんあります。

ボタンコピーを追加したら、各ボタンのクリック時の動作を指定する：

- **ボタン 1:**これを「メッセージを閉じる」に設定します。これはセカンダリーボタンで「今は許可しない」オプションです。
- **ボタン 2: **これを「プッシュ通知の権限を要求」に設定します。これはプライマリボタンで「通知を許可する」オプションです。

![][4]

## ステップ 4:配信のスケジュール

プッシュプライマーを適切な時間に送信するように設定するには、アプリ内メッセージをアクションベースのメッセージとしてスケジュールし、トリガーアクションとして**カスタムイベントを実行する**必要がある。

理想的なタイミングはさまざまだが、Brazeは、ユーザーが何らかの[価値の高いアクションを](https://www.braze.com/resources/videos/mapping-high-value-actions)完了するまで待つことを提案している。これは、ユーザーがアプリやサイトに価値を見出し始めていることを示すか、プッシュ通知で対応できる切実なニーズがある場合だ（例えば、ユーザーが注文をした後で、配送追跡情報を提供したい場合など）。こうすることで、プロンプトはあなたのブランドにとってだけでなく、顧客にとっても有益なものとなる。

![][5]

## ステップ 5: ユーザーのターゲット設定

プッシュプライマーキャンペーンの目的は、ユーザーにプッシュメッセージングのオプトインを促すことなので、すでにオプトインしているユーザーをターゲットにすることは避けます。そのためには、`Push Subscription Status is not Opted In` にセグメントまたはフィルターを追加する。

そのうえで、どのような追加セグメントが最も適切だと感じるかを決めることができます。例えば、2回目の購入を完了したユーザー、会員になるためにアカウントを作成したばかりのユーザー、あるいは週に2回以上アプリを訪れるユーザーなどをターゲットにすることができる。これらの重要なセグメントでユーザーをターゲティングすることで、ユーザーがオプトインし、プッシュを有効にする可能性が高くなります。

## ステップ 6:コンバージョンイベント

Brazeは、コンバージョンのデフォルト設定を提案しているが、プッシュ・プライマーを取り巻く[コンバージョンイベントを]({{site.baseurl}}/user_guide/engagement_tools/campaigns/building_campaigns/conversion_events/)設定したい場合もあるだろう。

[1]: {% image_buster /assets/img_archive/push_primer_iam.png %}
[2]: {{site.baseurl}}/user_guide/message_building_by_channel/in-app_messages/create/
[3]: {{site.baseurl}}/user_guide/message_building_by_channel/push/best_practices/creating_custom_opt-in_prompts/
[4]: {% image_buster /assets/img_archive/push_primer_button_behavior.png %}
[5]: {% image_buster /assets/img_archive/push_primer_trigger.png %}
