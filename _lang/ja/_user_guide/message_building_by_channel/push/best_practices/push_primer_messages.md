---
nav_title: プッシュ入門アプリ内メッセージ
article_title: プッシュ入門アプリ内メッセージ
page_order: 1
page_type: reference
description: "この記事では、プッシュ入門アプリ内メッセージの前提条件とその設定方法について説明します。"
channel: push

---

# プッシュプライマーアプリ内メッセージ

![ストリーミングアプリ用のプッシュ入門アプリ内メッセージ。通知には「ムービーキャノンからプッシュ通知を受け取る?通知には、新しい映画、テレビ番組、またはその他の通知が含まれる場合があり、いつでもオフにできます。「] [1]{: style="float:right;max-width:40%;margin-left:15px;border:none;"}

> ユーザーにプッシュ許可を求める機会は一度しかないため、プッシュメッセージのリーチを最大化するには、プッシュ登録を最適化することが重要です。これを実現するために、ネイティブのプッシュプロンプトを表示する前に、アプリ内メッセージを使用して、ユーザーがオプトインを選択した場合に受信すると予想されるメッセージの種類を説明できます。これはプッシュプライマーと呼ばれます。

Brazeでプッシュ入門アプリ内メッセージを作成するには、iOS、Android、またはWeb用のアプリ内メッセージを作成するときに、ボタンクリック時の動作「プッシュ許可のリクエスト」を使用できます。

## 前提条件

このガイドでは、新しい SDK [バージョンでのみサポートされているボタンオンクリック動作を使用しています](#button-actions)。これらの SDK の中には、まだリリースされていないものもあります。現在のバージョンを確認するには、次のリンクにアクセスしてください。

{% sdk_min_versions swift:5.4.0 android:21.0.0 web:4.0.3 %}

### 開発チーム向けメモ

#### Android

- **アンドロイド 12 以下:**プッシュはデフォルトでオプトインされているため、プッシュ入門書の実装はお勧めしません。
- **アンドロイド 13 以上:**テスト中にプロンプトを複数回表示したい場合は、デバイスの設定に移動し、アプリのプッシュを無効にして、プライマーが再び表示されるようにします。

#### iOS

- iOS プロンプトは、インストールごとに 1 回のみ表示でき、オペレーティングシステムによって強制されます。
- アプリのプッシュ設定が明示的にオンまたはオフになっている場合、プロンプトは表示されず、[暫定的な権限を持つユーザーにのみ表示されます](https://developer.apple.com/documentation/usernotifications/asking_permission_to_use_notifications#3544375)。
  - アプリのプッシュ設定がオンになっている場合、ユーザーはすでにオプトインしているため、Brazeはアプリ内メッセージを表示しません。
  - アプリのプッシュ設定がオフの場合は、設定アプリのアプリの通知設定にユーザーを転送する必要があります。

##### 手動コード削除

このチュートリアルを使用して設定したアプリ内メッセージは、ユーザーがアプリ内メッセージボタンをクリックしたときに、ネイティブプッシュプロンプトコードを自動的に呼び出します。プッシュ通知の許可を 2 回リクエストしたり、間違ったタイミングでリクエストしたりすることを避けるため、開発者は実装済みの既存のプッシュ通知インテグレーションを変更して、アプリ内メッセージがユーザーに表示される最初のプッシュ通知入門書になるようにする必要があります。

開発者は、アプリやサイトへのプッシュ通知の実装を確認し、プッシュ許可を要求するコードはすべて手動で削除する必要があります。たとえば、次のコードへの参照を探して削除してください。

{% tabs %}
{% tab OBJECTIVE-C %}
```objc
requestAuthorizationWithOptions
```
{% endtab %}
{% tab swift %}
```swift
requestAuthorization
```
{% endtab %}
{% tab JavaScript %}
```javascript
braze.requestPushPermission()
// or
appboy.registerAppboyPushMessages()
```
{% endtab %}
{% tab Java %}
```java
android.permission.POST_NOTIFICATIONS
```
{% endtab %}
{% endtabs %}

## ステップ 1:アプリ内メッセージを作成する

[アプリ内メッセージを作成] [2] 通常どおり。

メッセージタイプとレイアウトを選択します。Braze では、ユーザーがどのようなプッシュ通知を期待できるかを説明するための十分なスペースを確保するために (また、ボタンも表示できるように)、フルスクリーンまたはモーダルメッセージのどちらかを提案しています。フルスクリーンのアプリ内メッセージには、画像が必要であることに注意してください。 

## ステップ 2:メッセージを作成

さあ、コピーを追加しましょう！プッシュ入門書は、ユーザーにプッシュ通知をオンにするように促すことになっていることを覚えておいてください。メッセージ本文では、ユーザーにプッシュ通知を有効にすべき理由を明記することをおすすめします。送信する通知の種類と、通知が提供できる値を具体的に指定してください。

たとえば、ニュースアプリは次のプッシュ入門書を使用する場合があります。

> 外出先での最新ニュース！プッシュ通知を有効にすると、重要な記事や重要なトピックに関するアラートを受け取ることができます。

ストリーミングアプリでは次のものを使用する場合があります。

> ムービーキャノンからプッシュ通知を受け取る?通知には、新しい映画、テレビ番組、またはその他の通知が含まれる場合があり、いつでもオフにできます。

ベストプラクティスやその他のリソースについては、[カスタムオプトインプロンプトの作成] [3] を参照してください。

## ステップ 3:ボタンの動作を指定 {#button-actions}

アプリ内メッセージにボタンを追加するには、****ボタン1とボタン2のテキストフィールド****（それぞれアプリ内メッセージの2番目と1番目のボタン）にテキストを追加します。スターターボタンとして「通知を許可する」と「今すぐしない」をお勧めしますが、割り当てることができるボタンプロンプトにはさまざまなものがあります。

ボタンコピーを追加したら、各ボタンのクリック時の動作を指定します。

- **ボタン 1:**これを「メッセージを閉じる」に設定します。これはサブボタン、つまり「今はしない」オプションです。
- **ボタン 2:**これを「プッシュ許可をリクエスト」に設定します。これはメインボタン、つまり「通知を許可する」オプションです。

![][4]

## ステップ 4: 配信のスケジュール設定

Push Primerを適切な時間に送信するように設定するには、Perform **Custom Eventをトリガーアクションとして**、アプリ内メッセージをアクションベースのメッセージとしてスケジュールする必要があります。

理想的な時期はさまざまですが、Brazeは、[ユーザーが何らかの価値の高いアクションを完了するまで待つことを推奨しています](https://www.braze.com/resources/videos/mapping-high-value-actions)。つまり、ユーザーがアプリやサイトに価値を見出し始めていることを示すか、プッシュ通知で対処できる切実なニーズがある場合（注文後に配送追跡情報を提供したい場合など）です。このように、プロンプトはブランドだけでなく、顧客にとっても有益です。

![][5]

## ステップ 5: ターゲットユーザー

プッシュ入門キャンペーンの目的は、ユーザーにプッシュメッセージへのオプトインを促すことなので、すでにオプトインしているユーザーをターゲットにすることは望ましくありません。そのためには、「where」にセグメントまたはフィルターを追加します`Push Subscription Status is not Opted In`。

それ以外にも、どのセグメントが最も適切だと思うかを決めることができます。たとえば、2 回目の購入を完了したユーザー、メンバーになるためにアカウントを作成したばかりのユーザー、または週に 2 回以上アプリにアクセスするユーザーをターゲットにすることができます。これらの重要なセグメントのユーザーをターゲットにすることで、ユーザーがオプトインしてプッシュ対応になる可能性が高まります。

## ステップ 6:コンバージョンイベント

Braze ではコンバージョンのデフォルト設定を推奨していますが、[プッシュプライマーを中心としたコンバージョンイベントを設定することもできます]({{site.baseurl}}/user_guide/engagement_tools/campaigns/building_campaigns/conversion_events/)。

[1]: {% image_buster /assets/img_archive/push_primer_iam.png %}
[2]: {{site.baseurl}}/user_guide/message_building_by_channel/in-app_messages/create/
[3]: {{site.baseurl}}/user_guide/message_building_by_channel/push/best_practices/creating_custom_opt-in_prompts/
[4]: {% image_buster /assets/img_archive/push_primer_button_behavior.png %}
[5]: {% image_buster /assets/img_archive/push_primer_trigger.png %}
