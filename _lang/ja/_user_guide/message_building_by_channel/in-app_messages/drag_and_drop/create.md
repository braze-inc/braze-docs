---
nav_title: アプリ内メッセージを作成する
article_title: "ドラッグアンドドロップでアプリ内メッセージを作成する"
description: "このリファレンス記事では、ドラッグアンドドロップエディタを使用してアプリ内メッセージを作成する方法、前提条件、クリエイティブの詳細などについて説明します。"
alias: "/create_dnd_iam/"
page_order: 1
local_redirect: #set-message-level-styles, #add-a-custom-font, #drag-and-drop-in-app-message-components, #creative-details
  set-message-level-styles: '/docs/user_guide/message_building_by_channel/in-app_messages/drag_and_drop/style_settings/#message-level-styles'
  add-a-custom-font: '/docs/user_guide/message_building_by_channel/in-app_messages/drag_and_drop/style_settings/#custom-fonts'
  drag-and-drop-in-app-message-components: '/docs/user_guide/message_building_by_channel/in-app_messages/drag_and_drop/style_settings/#message-components'
  creative-details: '/docs/user_guide/message_building_by_channel/in-app_messages/drag_and_drop/style_settings/#creative-details'
---

# ドラッグアンドドロップでアプリ内メッセージを作成する

> ドラッグ＆ドロップエディタを使用すると、キャンペーンやキャンバスのいずれかでドラッグ＆ドロップ編集体験を使用して、完全にカスタムおよびパーソナライズされたアプリ内メッセージを作成できます。


{% multi_lang_include video.html id="j94omgo73o" align="right" source="wistia" %}

既存のカスタムHTMLテンプレートやサードパーティが作成したテンプレートを使用したい場合は、ドラッグアンドドロップエディタで再作成する必要があります。

アプリ内メッセージはキャンペーンを使用して送信するべきか[キャンバス]({{site.baseurl}}/user_guide/engagement_tools/canvas/create_a_canvas/canvas_by_channel/in-app_messages_in_canvas/)を使用するべきか分からない場合は？キャンペーンは単一のシンプルなメッセージングキャンペーンに適していますが、キャンバスはマルチステップのユーザーのジャーニーに適しています。メッセージを作成する場所を選択したら、次のステップに進み、ドラッグ＆ドロップでアプリ内メッセージを作成します。

## 前提条件

### SDK の要件

| 最小SDKバージョン                                                          | 推奨SDKバージョン                                                       |
| ---------------------------------------------------------------------------- | ----------------------------------------------------------------------------- |
| {::nomarkdown}{% sdk_min_versions swift:5.0.0 android:8.0.0 web:2.5.0 %}{:/} | {::nomarkdown}{% sdk_min_versions swift:6.5.0 android:26.0.0 web:4.8.1 %}{:/} |
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

{% details More information on minimum SDKs %}

ドラッグアンドドロップエディタを使用して作成されたメッセージは、最小SDKバージョンのユーザーにのみ送信できます（上記の表を参照）。ユーザーがアプリケーションを更新していない場合（つまり、古いSDKバージョンを使用している場合）、アプリ内メッセージを受信しません。

ドラッグアンドドロップエディタで利用可能なすべての機能を活用するには、SDKを推奨されるSDKバージョンに更新してください。これにより、次の追加機能を利用できます:

- メッセージを閉じないテキストリンク
- プッシュプライマーを要求するためのボタンアクション

以下に、これらの機能に関する個々の最小 SDK 要件の概要を示します。

| テキストリンク*                                                         | プッシュプライマーのリクエスト                                                           |
| ------------------------------------------------------------------- | ----------------------------------------------------------------------------- |
| {::nomarkdown}{% sdk_min_versions swift:6.2.0 android:26.0.0 %}{:/} | {::nomarkdown}{% sdk_min_versions web:4.8.1 swift:6.5.0 android:26.0.0 %}{:/} |
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

\*アプリ内メッセージにURLへリダイレクトするリンクが含まれ、エンドユーザーが指定された最小SDKバージョンを使用していない場合、リンクを選択するとメッセージが閉じ、ユーザーはフォームを送信するためにメッセージに戻ることができない。

{% enddetails %}

### 追加の前提条件

- Web SDKの場合、初期化オプション[`allowUserSuppliedJavascript`](https://js.appboycdn.com/web-sdk/latest/doc/modules/braze.html#initializationoptions)を`true`に設定する必要があります。`enableHtmlInAppMessages`オプションでもこれらのメッセージを機能させることができますが、非推奨であり、`allowUserSuppliedJavascript`に更新する必要があります。
- Google Tag Manager を使用している場合は、GTM の構成で「Allow HTML In-App Messages」を有効にする必要があります。

## ステップ1:アプリ内メッセージを作成する

新しいアプリ内メッセージまたはキャンバスステップを作成し、編集体験として**ドラッグアンドドロップエディター**を選択します。

## ステップ 2: テンプレートを選択してください

ドラッグアンドドロップエディタを編集体験として選択した後、次のことができます:

- 空白のモーダルテンプレートから始める
- Brazeのドラッグアンドドロップアプリ内メッセージテンプレートを使用する
- 保存されたドラッグアンドドロップのアプリ内メッセージテンプレートを選択

[**メッセージを作成**] を選択して、ドラッグ＆ドロップエディターでアプリ内メッセージのデザインを開始します。

![基本、バックグラウンド "画像、電話番号キャプチャ、または空白のテンプレートを選択できるBraze テンプレート s 欄。]({% image_buster /assets/img_archive/dnd_iam_select_template.png %})

ダッシュボードの**テンプレート**セクションからすべてのテンプレートにアクセスすることもできます。

## ステップ 3: 追加のページを追加する（オプション） {#multi-page}

アプリ内メッセージにページを追加すると、オンボーディングフローやウェルカムジャーニーのように、ユーザーを順次のフローに案内できます。**ページ**セクションの**ビルド**タブからページを管理できます。

![3頁からなるヘルスケア企業のアプリ内メッセージ。]({% image_buster /assets/img_archive/dnd_iam_mockup.png %})

{% tabs %}
{% tab Adding pages %}

アプリ内メッセージはデフォルトで1ページから始まります。新しいページを追加するには:

1. [**\+ ページを追加**] を選択します。
2. カスタムまたはBraze提供のテンプレートから選択します。
3. ページに意味のある名前を付けてください。これは、ページをつなぐときに役立ちます。

{% alert tip %}
アプリ内メッセージごとに最大10ページ追加できます。
{% endalert %}

既存のページを複製するには: 

1. リスト内のページにカーソルを合わせて<i class="fas fa-ellipsis-vertical"></i>を選択し、さらにオプションを開封します。
2. [**複製**] を選択します。
3. ページに意味のある名前を付けてください。これは、ページをつなぐときに役立ちます。

{% endtab %}
{% tab Deleting or renaming pages %}

ページを削除または名前を変更するには:

1. リスト内のページにカーソルを合わせて<i class="fas fa-ellipsis-vertical"></i>を選択し、さらにオプションを開封します。
2. **名前を変更** または **削除** を選択します。

{% endtab %}
{% endtabs %}

### ステップ 3a: ページを接続する

複数ページのアプリ内メッセージはシーケンシャルです。したがって、ユーザーがアプリをタップするかクリックすると、フロー内の次のページに移動します。

ページを接続するには:

1. 開始ページを選択してください。
2. キャンバス内のボタンまたは画像要素を選択します。
3. **クリック時の動作**を**ページに移動**に設定します。
4. 開始ページからリンクしたいページを選択します。
5. すべてのページがリンクされるまで続けます。

![ユーザーは、プライマリアクションを編集して、アプリ内メッセージのページ2 に移動します。]({% image_buster/assets/img_archive/dnd_iam_multipage.gif %})

ページが他のページにリンクされていない場合、メッセージを起動できません。

{% alert note %}
ユーザーはいつでも X (閉じる) ボタンを選択してメッセージを閉じることができます。このボタンは削除できません。
{% endalert %}

## ステップ 4: アプリ内メッセージを構築および設計する

ここでは、あなたのメッセージをブランドのシグネチャースタイルで演出し、オーディエンスに注目してもらいます。エディターブロックとスタイル設定の組み合わせで、アプリ内メッセージをカスタマイズしてデザインできる。

- 利用可能なエディターブロックとそのプロパティのリストについては、[エディターブロック]({{site.baseurl}}/user_guide/message_building_by_channel/in-app_messages/drag_and_drop/editor_blocks/)を参照してください。
- メッセージの外観と感触をカスタマイズするためのヘルプについては、[スタイル設定]({{site.baseurl}}/user_guide/message_building_by_channel/in-app_messages/drag_and_drop/style_settings/)をチェックしてください。
- 右から左へのメッセージの作成に関するベストプラクティスについては、[右から左へのメッセージの作成]({{site.baseurl}}/user_guide/engagement_tools/messaging_fundamentals/localization/right_to_left_messages/)を参照してください。

## ステップ 5: アプリ内メッセージをテストする

**プレビュー & Test** セクションでは、さまざまなデバイス間でアプリ内メッセージをプレビューし、テストメッセージをデバイスに送信できます。ここでは、ドラッグアンドドロップのアプリ内メッセージキャンペーンの詳細がすべてのプラットフォームで一致していることを確認できます。 

キャンペーンを送る前に必ずアプリ内メッセージをテストし、ユーザー目線で最終的なメッセージがどのように見えるかをイメージすることが重要だ。

### ユーザーとしてメッセージをプレビュー

{% alert warning %}
テストをコンテンツテストグループまたは個々のユーザーに送信するには、送信前にテストデバイスでプッシュを有効にする必要があります。
{% endalert %}

** プレビュー & Test** タブからユーザーのようにプレビューできます。特定のユーザー、ランダムなユーザー、またはカスタムユーザーを選択できます。

- **ランダムユーザー:**Brazeはデータベースからユーザーをランダムに選択し、属性やイベント情報に基づいてアプリ内メッセージをプレビューします。
- **ユーザーの選択:**メールアドレスや`external_id` に基づいて特定のユーザーを選択することができる。アプリ内メッセージは、そのユーザーの属性とイベント情報に基づいてプレビューされます。
- **カスタムユーザー:**ユーザーをカスタマイズできます。Brazeは、利用可能なすべての属性とイベントの入力を提供します。プレビューメールに表示したい情報を入力する。

### テストチェックリスト

アプリ内メッセージをテストする際に、以下の質問を考えてみよう：

- メッセージをさまざまなデバイスでテストしましたか?
- 画像やメディアは期待通りに表示され、機能しているか？
- 液体は期待通りに機能しますか？Liquidが情報を返さない場合に、デフォルト属性値を考慮しましたか？
- あなたのコピーは明確で簡潔で正しいですか？
- ボタンはユーザーを行くべき場所に誘導していますか？

## よくある質問

#### 本文クリック数がアプリの分析画面に表示されないのはなぜですか?

ドラッグアンドドロップエディタで作成されたアプリ内メッセージのボディクリックは自動的に収集されません。詳細については、[iOS]({{site.baseurl}}/developer_guide/platform_integration_guides/ios/changelog/objc_changelog#3310)および[Android]({{site.baseurl}}/developer_guide/platform_integration_guides/android/changelog#1100)のSDK変更ログを参照してください。

#### ボタンクリックに基づいてSegmentできますか？

はい、メッセージ内のボタンクリックに基づいて、最大2つのボタンをセグメント化できます。そのためには、ボタンの**レポート用識別子**を「0」と「1」に設定します。これにより、それぞれ「アプリ内メッセージボタン1をクリックした」と「アプリ内メッセージボタン2をクリックした」というセグメンテーションフィルターに対応します。

!["Reporting&quot の識別子; "0"の値を持つフィールド。]({% image_buster /assets/img/identifier_for_reporting.png %}){: style="max-width:50%;"}

#### カスタムHTMLやJavaScriptを使用してアプリ内メッセージをカスタマイズしたり、既存のHTMLメッセージをエディタに転送したりできますか？

既存のHTMLメッセージをエディターに直接転送することはできませんが、カスタムコードブロックに生のHTML、CSS、およびJavaScriptを挿入することができます。カスタムコードブロックを使用して、サードパーティのビデオや高度なLiquid（コネクテッドコンテンツや条件文など）を埋め込むことができます。

#### スライドアップアプリ内メッセージを作成するにはどうすればよいですか？

現在、エディターはモーダルおよび全画面メッセージのみに制限されています。**メッセージコンテナ**セクションの**メッセージスタイル**パネルで表示タイプを切り替えることができます。

#### キャンペーンまたはキャンバス内で作成した後、アプリ内メッセージをテンプレートとして保存できますか?

そうです。将来のキャンペーンやキャンバスステップで再利用したいアプリ内メッセージがある場合は、エディタを終了した後に利用可能な**テンプレートとして保存**ボタンを使用してカスタムテンプレートとして保存できます。テンプレートとして保存する前に、まずキャンペーンを開始するか、下書きとして保存する必要があります。

![商品見学のためのアプリ内メッセージのプレビュー。]({% image_buster /assets/img_archive/dnd_iam_save_as_template.png %})

**テンプレート** > **アプリ内メッセージテンプレート** に移動して、アプリ内メッセージテンプレートを作成および保存することもできます。
