---
nav_title: カスタム・キーワード・ハンドリング
article_title: カスタム・キーワード・ハンドリング
page_order: 3
description: "この参考記事では、Brazeが双方向SMSメッセージングと自動応答をどのように扱うかを取り上げている。これには、キーワード・トリガーの仕組みやカスタム・キーワード・カテゴリー、多言語サポートについての説明が含まれる。"
page_type: reference
channel:
  - SMS

---

# カスタムキーワードの処理

> この参考記事では、Brazeが双方向SMSメッセージングと自動応答をどのように扱うかを取り上げている。これには、キーワード・トリガーの仕組みやカスタム・キーワード・カテゴリー、多言語サポートについての説明が含まれる。

## 双方向メッセージング（カスタムキーワードレスポンス）

双方向メッセージングでは、メッセージを送信し、それに対する応答を処理することができる。エンドユーザーがBrazeにキーワードを送る必要があり、それに対してユーザーが自動返信を受け取る。正しく適用すれば、双方向メッセージングは、カスタマーマーケティングのシンプルで、即時的かつダイナミックなソリューションになり、その過程で時間とリソースを節約できます。

## キーワードと自動応答を管理する

BrazeのSMSでは、キーワード・トリガー、カスタム・レスポンス、多言語キーワード・セットの定義、カスタム・キーワード・カテゴリの設定ができる。 

{% tabs %}
{% tab キーワードトリガーの追加 %}

#### キーワード・トリガーを追加する

デフォルトのオプトインおよびオプトアウトのキーワードに加えて、オプトイン、オプトアウト、およびヘルプの応答をトリガーする独自のキーワードを定義することもできます。

独自のキーワードを定義するには、以下のようにする：

1. Brazeダッシュボードで、[**オーディエンス**] > [**サブスクリプショングループ**] に移動し、SMS サブスクリプショングループを選択します。<br><br>
2. [**SMS グローバルキーワード**] の下で、キーワードを追加するキーワードカテゴリの横にある鉛筆アイコンをクリックします。![]({% image_buster /assets/img/sms/sms_keywords.png %})<br><br>
3. 開いたタブで、このキーワード・カテゴリーをトリガーしたいキーワードを追加する。キーワードは大文字小文字を区別せず、`START` 、`YES` 、`UNSTOP` のようなユニバーサルキーワードは変更できないことに注意。![「オプトイン」カテゴリのキーワードの編集追加されたキーワードは、"START"、"UNSTOP"、"YES "である。返信メッセージフィールドに、「この番号からのメッセージを配信停止しました」と表示されます。ヘルプの場合は HELP と返信します。配信停止するには STOP と返信します。メッセージ料金とデータ料金が適用される場合があります。"]({% image_buster /assets/img/sms/keyword_edit2.png %})

キーワードとキーワード回答には以下のルールが適用される：

| キーワード | キーワード応答 |
| -------- | ----------------- |
| \- 有効なUTF-8エンコード文字<br>\- 各カテゴリー合計で最大20キーワード<br>\- 最大34文字<br>\- 1 文字以上 <br>\- スペースを含めることはできません<br>\- 大文字と小文字を区別せず、サブスクリプション・グループ全体で一意である必要がある。 | \- 空白は許されない<br>\- 最大300文字<br>\- 有効なUTF-8文字 |
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

{% alert tip %}
これらのキーワードをキャンペーンやキャンバスで使用して、メッセージのリターゲティングやトリガーを行う方法に興味がある場合、詳しくは[SMSリターゲティングの]({{site.baseurl}}/user_guide/message_building_by_channel/sms/campaign/retargeting/)記事をご覧いただきたい。
{% endalert %}
{% endtab %}

{% tab 応答の管理 %}

#### 応答の管理

ユーザーが特定のキーワードカテゴリーにキーワードをテキスト入力した後に送信される独自のレスポンスを管理することができる。

1. Brazeダッシュボードで、[**オーディエンス**] > [**サブスクリプショングループ**] に移動し、SMS サブスクリプショングループを選択します。<br><br>
2. [**SMS グローバルキーワード**] の下にある鉛筆アイコンを選択して、応答を編集するキーワードカテゴリを選択します。![]({% image_buster /assets/img/sms/sms_keywords.png %})<br><br> 
3. 開いたタブで、応答を編集します。応答を作成するときには、[コンプライアンスを正しく実施するためのルール 6 項目]({{site.baseurl}}/user_guide/message_building_by_channel/sms/sms_laws_and_regulations/#the-six-rules-to-get-compliance-right)に留意し、キーワードとキーワード応答に適用される以下のルールを読んでください。![応答]({% image_buster /assets/img/sms/keyword_home.png %})<br><br>
4. 回答中の静的URLを自動的に短縮するには、**リンク短縮**トグルを選択する。文字数カウンターが更新され、短縮URLの予想される長さが表示される。![リンク短縮」トグルがオンになっているときに更新される文字カウンターを示すGIF。]({% image_buster /assets/img/sms/link_shortening.gif %}){: style="max-width:50%;"}

##### 考慮事項

| キーワード | キーワード応答 |
| -------- | ----------------- |
| \- 有効なUTF-8エンコード文字<br>\- 各カテゴリー合計で最大20キーワード<br>\- 最大34文字<br>\- 1 文字以上 <br>\- スペースを含めることはできません<br>\- 大文字と小文字を区別せず、サブスクリプション・グループ全体で一意である必要がある。 | \- 空白は許されない<br>\- 最大300文字<br>\- 有効なUTF-8文字 |
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

{% endtab %}
{% endtabs %}

{% alert tip %}
アクションベースのキャンバスが受信 SMS メッセージによってトリガーされる場合、キャンバスの最初の[メッセージステップ]({{site.baseurl}}/user_guide/engagement_tools/canvas/canvas_components/message_step/)で SMS プロパティを参照できます。
{% endalert %}

## 多言語サポート

特定の国に送信する場合、送信者はインバウンドのキーワードとアウトバウンドの返信を現地語でサポートする必要がある場合がある。これをサポートするために、Brazeでは言語固有のキーワード設定を作成することができる。
![][16]{: style="float:right;max-width:40%;margin-left:10px;"}

### 言語固有のキーワードを作成する

[**言語を追加**] をクリックし、目的の言語を選択するか、ドロップダウンから言語を検索します。

{% alert important %}
他の言語には、英語のようなキーワードやレスポンスがプリセットされていないため、送信者はマーケティングチームや法務チームと協力して、このセットに必要なキーワードを追加する必要がある。そうでない場合、Brazeはそれらの言語にローカライズされた受信メッセージを処理しない。
{% endalert %}

言語を削除する必要がある場合は、右下の**Delete Language**ボタンをクリックする。

![フランス語」タブを選択したSMSグローバルキーワードのページ。追加された言語ごとに追加のタブが存在する。][5]

## カスタムキーワードのカテゴリ

デフォルトの3つのキーワードカテゴリ（オプトイン、オプトアウト、ヘルプ）に加えて、独自のキーワードカテゴリを最大25個まで作成できる。これにより、任意のキーワードを特定し、ビジネスに特化した対応を設定することができる。カテゴリーの例としては、「PROMO」や「DISCOUNT」などがあり、今月実施予定のプロモに関する応答を求めることができます。 

これらのカスタム・キーワードは、「常時オン」で動作する。つまり、メッセージ・サービスに加入しているユーザーなら誰でも、いつでもキーワードをテキストで送信し、応答を受け取ることができる。この動作に加え、ユーザーのライフサイクルの[特定のポイントでのみ]({{site.baseurl}}/user_guide/message_building_by_channel/sms/keywords/keyword_handling/#lifecycle-specific-keywords)送信できる特定のキーワードを定義するオプションもある。 

![ダブルオプティン」カテゴリーのキーワード。ユーザーが「Y」と入力すると、「Hair Cuttery SMS への登録を確定くださりありがとうございます」というメッセージを受信します。][12]

### カスタム・カテゴリーを作成する

カスタム・キーワード・カテゴリーを作成するには、以下のようにする：

1. 適切なサブスクリプショングループを編集します。
2. [**カスタムキーワードを追加**] をクリックします。![][13]{: style="max-width:90%;"}
3. キーワード・カテゴリー名を指定し、ユーザーが返信メッセージを受信するために入力できるキーワードを定義する。

このキーワードカテゴリが作成されると、キャンペーンやキャンバスで[フィルタリングやトリガーをかける]({{site.baseurl}}/user_guide/message_building_by_channel/sms/campaign/retargeting/)ことができるようになる。

カスタムキーワードカテゴリで作成されたキーワードは、新しいキーワードの作成に関するすべてのルールとバリデーションに従う。 

### ライフサイクル固有のキーワード

あるユースケースで、顧客のライフサイクルにおいて顧客が特定のキーワードを送信して応答を受信できる期間を制限する場合 (顧客の最初のオンボーディング期間など)、キャンペーンまたはキャンバスの [**キーワードカテゴリ OTHER 内のサブスクリプショングループにインバウンド SMS を送信した**] トリガーを使用して、ユーザーがある時点で送信できるキーワードを定義することができます。

このトリガーは、ユーザーの入力を検証するための正規表現ルールにマッチするかしないかだけでなく、メッセージのisかisでない比較を使って、特定のインバウンドメッセージのフィルタリングをサポートする。

#### キャンバス

![メッセージ本文が正規表現「キャレット記号 skip」に一致する場合に、キーワードカテゴリが [その他] の「メッセージングサービス」サブスクリプショングループにインバウンド SMS を送信するトリガーを指定したアクションベースのキャンバスステップ。][14]{: style="max-width:90%;"}

#### Campaign

![メッセージ本文が 「Keyword1」または「Keyword2」であるか、「Keyword A」でない場合に、キーワードカテゴリが [その他] のサブスクリプショングループ「Marketing Message Service A」にインバウンド SMS を送信するトリガーを指定したアクションベースのキャンペーン。][15]{: style="max-width:90%;"}

### 不明のキーワードの処理

必須ではないが、ユーザーが既存のキーワードと一致しないSMSキーワードをインバウンド送信した場合の自動応答を設定することを強く推奨する。このメッセージは、キーワードが認識されていないことをユーザーに通知し、いくつかのガイダンスを提供する。 

これは、次のようなメッセージを持つ SMS キャンペーンを作成することで可能です。「申し訳ありません。STOPで止まれ、HELPで助けろというキーワードがわからなかったんだ」。次に、配信ステップで、[**アクションベースの配信**] を選択し、トリガー「**キーワードカテゴリ [その他] 内のサブスクリプショングループにインバウンド SMS を送信**」を使用します。

![]({% image_buster /assets/img/sms/sms_other.png %})

{% alert tip %}
キャンペーンやキャンバスで、これらのキーワードやキーワード・カテゴリーをどのように使い、リターゲティングやメッセージのトリガーにできるかを見てみたい。詳しくは[SMSリターゲティングの]({{site.baseurl}}/user_guide/message_building_by_channel/sms/campaign/retargeting/)記事をご覧いただきたい。
{% endalert %}

[oblink]: {{site.baseurl}}/user_guide/message_building_by_channel/sms/sms_subscription_group/#setup-process
[1]: {% image_buster /assets/img/sms/keyword_edit2.png %}
[2]: {% image_buster /assets/img/sms/keyword_home.png %}
[unknown]: {{site.baseurl}}/user_guide/message_building_by_channel/sms/keywords/unknown_phone_numbers/
[エンドポイント]：{{site.baseurl}}/api/endpoints/user_data/post_user_alias/
[IMAGE2] ： {% image_buster /assets/img/sms/sms_message_body.png %}
[5]: {% image_buster /assets/img/sms/multi-language2.png %}
[12]: {% image_buster /assets/img/sms/sms_custom_keyword.png %}
[13]: {% image_buster /assets/img/sms/sms_custom_step.png %}
[14]: {% image_buster /assets/img/sms/canvas_trigger.png %}
[15]: {% image_buster /assets/img/sms/campaign_trigger.png %}
[16]: {% image_buster /assets/img/sms/multi-language.png %}
