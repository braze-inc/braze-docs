---
nav_title: リードスコアリング
article_title: リードスコアリングワークフローの作成
description: "Braze を使用してシンプルなリードスコアリング、外部リードスコアリング、リードの引き継ぎを実行する方法について説明します。"
---

# リードスコアリングワークフローの作成

> このユースケースでは、Braze を使用してユーザーのリードスコアをリアルタイムで更新し、自動的にリードを営業チームに引き継ぐ方法を示します。

Braze でのリードスコアリングワークフローの作成には、次の 2 つの重要なステップがあります。

1. Braze でリードスコアリングキャンバスを作成するか、外部リードスコアリングツールと連携します。
- [シンプルなリードスコアリング](#simple-lead-scoring)
- [外部リードスコアリング](#external-lead-scoring)

2. 適格なリードを営業チームに送信する Webhook キャンペーンを作成します。
- [リードの引き継ぎ: マーケティング適格リード (MQL) を営業へ](#lead-handoff)

## 単純なリードスコアリング

### ステップ 1:キャンバスを作成する

1. [**メッセージング**] > [**キャンバス**] に移動し、[**キャンバスを作成**] を選択してから、キャンバスの基本事項を入力します。

2. キャンバスに「リードスコアリングキャンバス」などの関連する名前を付け、探しやすくするために、「リードの管理」などのタグを付けます。<br><br>![ステップ 1 の「リードスコアリングキャンバス」という名前のキャンバスの作成と、「リードマネジメント」のタグ付け。][1]{: style="max-width:80%;"}

### ステップ2:エントリ基準の設定

1. **エントリ スケジュール**ステップに進み、**Action-Based**エントリ スケジュールを選択します。これにより、ユーザーが特定のアクションを実行すると、キャンバスにユーザーが入ります。

2. **アクション ベースのオプション** で、次の2 つのアクションs を追加します。
    - [**カスタム属性値を変更**] でリードスコアリング属性の名前 (`lead score`など) を使用して、カスタム属性値を変更します。リードスコアリング属性をまだ作成していない場合は、[カスタム属性s]({{site.baseurl}}/user_guide/data_and_analytics/custom_data/custom_attributes/)のステップに従います。これにより、ユーザーのリードスコアが変化するたびに、キャンバスにユーザーが入ります。
    - **メールアドレスの追加**

![カスタム属性の「リードスコア」を変更し、メールの住所を追加する「アクションベース」およびアクションベースの選択肢をエントリ スケジュールとしたキャンバスの作成手順2。][2]{: style="max-width:80%;"}

### ステップ 3:ターゲットオーディエンスの特定

#### ステップ 3a: セグメントの選択

すべてのユーザーがリードスコアリングの対象であるため、どのユーザー[セグメント]({{site.baseurl}}/user_guide/engagement_tools/segments/)をターゲットに選択し、追加の[フィルター]({{site.baseurl}}/user_guide/engagement_tools/segments/segmentation_filters/)を適用することで、スコアの記録対象のユーザーに関する会社固有のルールを追加できます。たとえば、従業員、すでに顧客であるユーザー、および類似のユーザーを除外できます。 

![キャンバスを作成するステップ 3。セグメントとフィルターを選択して、エントリオーディエンスを絞り込むオプションがあります。][3]{: style="max-width:80%;"}

#### ステップ 3b： キャンバスの再適格性の設定

ユーザーは、このキャンバスをライフサイクル全体で何度も通過するため、必ずユーザーが前回終了した後ただちに再び入れるようにしてください。これは、再適格性の設定によって実現できます。 

[**エントリコントロール**] で、以下を実行します。
- [**ユーザーがこのキャンバスに再エントリできるようにする**] を選択します。
- **指定ウィンドウ**を選択します。
- 再適格性を「0」**秒**に設定します。

![[ユーザーがこのキャンバスに再エントリできるようにする] が選択され、[指定された期間] が 0 秒の [エントリコントロール] セクション。][4]{: style="max-width:80%;"}

#### ステップ 3c: 送信設定のアップデート

このキャンバスの運用上の性質と、これらのユーザーにメッセージが送信されないことを考慮すると、購読ステータスに従う必要はありません。

[**購読設定**] の [**次のユーザーに送信**] で、[**購読解除ユーザーを含むすべてのユーザー**] を選択します。 

![設定メール送信オプション用のキャンバスを作成する手順4。][5]{: style="max-width:80%;"}

### ステップ 4:キャンバスを作成する

#### ステップ 4a: アクションパスの追加

バリアントのプラスアイコンを選択し、[**アクションパス**] を選択します。

![プラスアイコンで開いたメニューに [アクションパス] が表示されているキャンバス。][6]{: style="max-width:60%;"}

#### ステップ 4b: アクショングループの作成

それぞれのアクション群は、同じ点の増減につながるすべてのアクションs を表します。最大8 つのアクショングループを設定できます。この例では、4つのグループを設定します。

アクションパスに次のグループを追加します。

- **グループ 1:**1 ポイントの増分でカウントするすべてのイベント。
- **グループ2:**5 ポイントの増分でカウントするすべてのイベント。
- **グループ 3:**1 ポイントの減分としてカウントされるすべてのイベント。
- **その他のユーザー:**アクションパスを使用すると、待機ウィンドウを定義し、ユーザーがアクションを受け取るかどうかを確認してから、それらを「他のすべてのユーザー」グループにドロップできます。リードスコアリングの場合、これは「非アクティブ」のスコアを減分する機会です。

![1 ポイント、5 ポイント、および 10 ポイントを加算するアクショングループ、1 ポイントと 10 ポイントを減算するアクショングループ、および「その他のユーザー」のアクショングループを含むアクションパス。][7]

#### ステップ 4c: 関連するイベントを含めるように各グループを設定する

それぞれのアクショングループで、**トリガー**を選択し、特定のアクショングループのポイント数を追加するイベントを選択します。さらにトリガーを追加して、リードスコアを 1 つ増やすすべてのイベントを含めます。たとえば、ユーザーは、任意のアプリでセッションを起動したり、カスタムイベント(ウェビナーの登録や参加など)を実行したりすると、得点を1つ増やすことができます。 

![「任意のアプリでセッションを開始する」と「カスタムイベントを実行する」のトリガーで 1 ポイント加算するアクショングループ。][8]{: style="max-width:80%;"}

#### ステップ 4d: ユーザアップデートステップの追加

アクションパスの下に作成した各キャンバスパスに、ユーザー更新ステップを追加します。 

![アクションパスと、アクショングループごとに分岐したユーザー更新パスが表示されたキャンバス。][9]{: style="max-width:80%;"}

{: start=”2”}
各ユーザー更新ステップの [**作成**] タブの対応するフィールドで、次の操作を行います。

| フィールド | アクション (Action) |
| --- | --- |
| **属性名** | ステップ 2 で選択したリードスコア属性を選択します (`lead score`)。|
| **アクション (Action)** | パスが得点を上げる場合は**増分**に、パスが得点を下げる場合は**減分**にアクションを変更します |
| **増分**または**減分** | リードスコアから増減するポイント数を入力します。|
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

### ステップ 5: キャンバスを起動する

完成しました。リードスコアリングキャンバスを起動する準備ができました。

## 外部リードスコアリング

当社の[テクノロジーパートナー]({{site.baseurl}}/partners/home/)の 1 社を使用するか、独自の内部リードスコアリングモデル、機械学習、または別のリードスコアリングツールを使用するかどうかに関わらず、複数の選択肢を用意しています。

### 外部パートナー

リードスコアリング機能を提供するB2Bパートナーについては、[Technology partners]({{site.baseurl}}/partners/home)を参照してください。ツールが用意されています。[`users/track`]({{site.baseurl}}/api/endpoints/user_data/post_user_track#track-users) API エンドポイントを呼び出すことで統合できます。 

### 内部リードスコアリングデータモデル

Brazeは、リードスコアリングモデルを含む内部データモデルとさまざまな方法で統合できます。当社のお客様が Braze 連携している一般的な例については、以下を参照してください。

#### 統合クラウドデータウェアハウス

{% tabs %}
{% tab データソースとしてのBraze %}

マーケティングツールとして、Braze には、チームの内部リードスコアモデルを補完できる、非常に関連性の高いデータが含まれています。 

例えば、メッセージングエンゲージメントデータ (メールの開封やクリック、ランディングページのエンゲージメントなど) でリードのエンゲージメントレベルを判定できます。このデータをクラウドデータウェアハウスに渡し、Brazeストリーミングエクスポートデータソリューションs を使用してリードスコアリングモデルの入力として使用できるようにすることができます。

- [Braze Currents]({{site.baseurl}}/user_guide/data_and_analytics/braze_currents/)
- [Snowflake セキュアデータ共有]({{site.baseurl}}/partners/data_and_infrastructure_agility/data_warehouses/snowflake/)

{% endtab %}
{% tab 送信先としてのBraze %}

内部チームがリードスコアリングモデルを作成して実行したら、そのデータをBraze にプルバックして、関連するメッセージングのリードをより適切にSegmentし、対象にすることができます。これは、[ Braze クラウドデータ取り込み]({{site.baseurl}}/user_guide/data_and_analytics/cloud_ingestion/overview/)で実行できます。 

クラウドデータ取り込みの場合、社内チームがユーザー識別子、最新のリードスコア、およびスコアが更新されたときのタイムスタンプを含む新しいテーブルまたはビューを作成します。Braze はテーブルまたはビューを選択し、リードスコアをユーザープロファイルs に追加します。

{% endtab %}
{% endtabs %}

## リードの引き継ぎ: マーケティング適格リード (MQL) を営業へ{#lead-handoff}

リードの引き継ぎの推奨アプローチは、対応するリードや連絡先に Braze の各ユーザーを結び付けることです。これらのリードは、リードステータスが MQL ステージに変更されたときに営業チームのキューに入ります。このステージで、営業チームはリードの巡回または割り当てのワークフローを開始します。 

Braze のリードステータスを使用して営業チームのリードレコードを更新するには、Webhook のトリガーテンプレートを使用することをお勧めします。

### ステップ 1:Webhook キャンペーンの作成

### ステップ2:Webhookの設定

#### ステップ 2a: Webhook作成

1. Webhook キャンペーンに「Salesforce > MQL へのリードの更新」などの名前を付けます。

2. Webhook URL を{% raw %}`https://YOUR_SALESFORCE_INSTANCE.my.salesforce.com/services/data/v60.0/sobjects/Lead/{{${user_id}}}`{% endraw %} の形式で入力します。{% raw %}`{{$user_id}}}`{% endraw %} の Braze ユーザー ID は、営業チームの連絡先 ID に一致する必要があります。そうでない場合は、{% raw %}`{{$user_id}}}`{% endraw %} の代わりにエイリアスを使用します。

3. **HTTP Method** を**PATCH** に更新します。

4. リードのリードスコアが、事前定義されたしきい値を超えた場合にのみ、営業チームのリードレコードを更新するようにペイロードを設定します。リードスコアが100 を超える場合は、以下のリクエストボディの例を参照してください。

{% raw %}
```liquid
{% assign threshold = 100%}
{% if custom_attribute.${lead score} > threshold %}
{
"lead_status": "MQL"
}
{% else %}{% abort_message('not at threshold')%}
{% endif %}
```
{% endraw %}

{: start="5"}
5. 次のヘッダーを含めます。

| ヘッダー | コンテンツ |
| --- | --- |
| 許可 | {% raw %}`Bearer {{result.access_token}}`{% endraw %}<br><br>トークンを取得するには、OAuth 2.0 クライアント認証情報フローの[接続アプリ](https://help.salesforce.com/s/articleView?id=sf.connected_app_client_credentials_setup.htm&type=5)を設定してから、コネクテッドコンテンツを使用して営業チームからベアラーを取得します。<br><br>{% raw %}<code>{% connected_content <mem_f103c5c8-10ef-4190-81c6-7620abe53029/>[instance].my.salesforce.com/services/oauth2/token <br>:method post <br> :body client_id=[client_id]_mem_amp_client_secret=[client_secret]_mem_amp_grant_type=client_credentials <br>:save result %}{% endraw %} <br> Bearer {% raw %}{{result.access_token}}</code>{% endraw %} |
| Content_Type | application/json |
{: .reset-td-br-1 reset-td-br-2}

![営業チームの Webhook URL、PATCH HTTP メソッド、生のテキストのリクエスト本文、およびリクエストヘッダーを含む、作成中の Webhook。][10]{: style="max-width:80%;"}

#### ステップ 2b: Webhook送信を予約する

キャンペーンは、ユーザーのリードスコアが変更されるたびにトリガーする必要があります。このキャンペーンは、スコアが変化したすべてのユーザーをトリガーしますが、現在 MQL ではなく、前のステップで設定したしきい値を超えたユーザーにのみ影響します。

**Schedule Delivery**ステップで、以下を選択します。
- **アクションベース**の配信タイプ
- **Change Custom 属性 Value**のトリガー アクションで、リードスコアリング属性の名前と**新しい値**のアクションを指定します。

#### ステップ 2c: ターゲットオーディエンスの特定

**Target Audiences**ステップには、"`lead_status``is none of``MQL`"のように、リードステータスがすでにMQL以上にあるユーザーsを除外するフィルターを含めます。

![「lead_ステータス」のフィルターを持つWebフックターゲティングオプションは、「MQL」のいずれでもありません。][11]{: style="max-width:80%;"}

### ステップ 3:キャンペーンの開始

[**開始**] を選択し、営業チームでリードステータスの変化 (顧客が MQL リードスコアのしきい値を超える) を監視します。

[1]: {% image_buster /assets/img/b2b/step_1_simple.png %}
[2]: {% image_buster /assets/img/b2b/step_2_simple.png %}
[3]: {% image_buster /assets/img/b2b/step_3_simple.png %}
[4]: {% image_buster /assets/img/b2b/entry_controls_simple.png %}
[5]: {% image_buster /assets/img/b2b/step_4_simple.png %}
[6]: {% image_buster /assets/img/b2b/action_paths_simple.png %}
[7]: {% image_buster /assets/img/b2b/action_paths_selected_simple.png %}
[8]: {% image_buster /assets/img/b2b/action_groups_simple.png %}
[9]: {% image_buster /assets/img/b2b/user_update_paths_simple.png %}
[10]: {% image_buster /assets/img/b2b/webhook.png %}
[11]: {% image_buster /assets/img/b2b/step_3_webhook.png %}