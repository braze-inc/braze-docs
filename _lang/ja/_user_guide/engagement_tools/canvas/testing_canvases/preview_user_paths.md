---
nav_title: ユーザーパスのプレビュー
article_title: ユーザーパスのプレビュー
page_order: 0.3
alias: /preview_user_paths/
description: "このページでは、キャンバスでユーザーパスをプレビューする方法について説明します。"
Tool:
  - Canvas
---

# キャンバスでユーザーパスをプレビューする

> ユーザーのために作成したキャンバスジャーニーを実際に体験することができます。これには、ユーザーが受け取るタイミングやメッセージングのプレビューも含まれる。これらのテストは、キャンバスを送信する前に、メッセージが適切なオーディエンスに送信されているかどうかの品質保証として機能します。

## テストランを作成する

ユーザージャーニーをプレビューするには、以下の手順に従ってください。

1. キャンバスビルダーに移動します。未保存の変更を保存し、エラーがある場合はすべて解決します。
2. フッターで [**キャンバスをテスト**] を選択します。
3. テストユーザーを選択します。
4. (オプション) テストの受信者を選択します。
5. [**テストを実行**] を選択します。

キャンバスを編集する権限がない場合、プレビューを実行することができるが、このプレビューは未保存の変更がある場合に実行される。

### サポートされているステップ

以下のステップがサポートされています。
- メッセージ 
- オーディエンスパス
- 条件分岐
- 遅延
- アクションパス
- 実験パス
- ユーザー更新（UIエディターのみ、つまりJSONエディターを使用するステップはスキップされる）

テストが上記にリストされていないステップタイプと重複する場合、サポートされていないステップはスキップされ、テストユーザーはサポートされている次のステップに進む。

### キャンバスステップの詳細

入団基準の詳細を見るには、「**もっと見る**」を選択する。セグメンテーションのステップでは、満たされているか満たされていないかの基準が示される。メッセージングはまた、配達検証とチャネル適格性についてもこれを示す。メッセージング・ステップは、どのチャネルが送信されたか、されなかったかを示す。

### Liquid

Brazeは、実際のテストメッセージを送信していなくても、テスト実行中にLiquidロジックを処理する。これは、[アボートメッセージロジック]({{site.baseurl}}/user_guide/personalization_and_dynamic_content/liquid/aborting_messages/#aborting-messages)とその他の Liquid ロジックが反映され、キャンバスのユーザージャーニーに影響を与える可能性があることを意味しています。

プレビューがユーザー体験の最後のステップを中止せずに送信する場合、プレビューでは、キャンバスのエントリ時間に基づいてユーザーがステップにいる実際の時間ではなく、現在の時間を Liquid 評価のテスト時間として使用している可能性があります。

## タイミングのプレビュー

スケジュールされたキャンバスの場合、テストユーザーは次の入場予定時刻に入場する。開始日時のあるアクションベースのキャンバスでは、テストユーザーは開始日時に入力する。 

デフォルトの開始時刻はそのまま適用されるが、入場時刻はすべてのインスタンスで設定可能で、過去または未来の日付をシミュレートできる。ただし、キャンバスの開始日前や終了日後のテストはできない。

メッセージと遅延のステップは、遅延を再設定する必要なく、ユーザーが次に進むかメッセージを受信する時間を示します。ステップにはインテリジェントタイミングが使用されているかどうかが示されているが、このユーザーパスのプレビューでは、テストユーザーの推定値は計算されないことに注意。

カスタム属性値の変更」のようなアクショントリガーを持つキャンバスでは、Brazeは、**キャンバスのテスト実行時のみ、**トリガー内のユーザー属性を一時的に空白に設定することで、変更をシミュレートしようとする（これはユーザープロファイルには影響しない）。これは、属性が現在の値から変化することをテストするためのものである。

## ユーザーが出入りするタイミング

テストユーザーは、現実には対象外であってもプレビューにエントリーする。もし対象外なら、条件を満たさない理由がわかります。テストユーザーがプレビューに入ると、テストユーザーがターゲットオーディエンスの基準を満たし、アクショントリガー条件を実行したと想定します。例えば、カスタムイベントをエントリ条件で使用するキャンバスでは、テストユーザーはエントリ基準で想定されるとおりにカスタムイベントを実行したと仮定されます。ただし、同じカスタムイベントがキャンバス内の他の場所 (終了条件の中など) で使用されている場合は、これがユーザーパスにどのような影響を与えるかを考慮してください。

イベント、APIトリガー、カスタム属性、キャンバスエントリプロパティは、キャンバスエントリに基づいて適用される。テスト実行では、これらの要素を適用して実際のユーザープロファイルやキャンバスフローを変更することなく、ユーザーの旅をシミュレートする。例えば、テスト中、カスタム属性がキャンバスのトリガーとして使用されるとき、トリガー基準は、**あたかも**カスタム属性の変更をトリガーしたかのように、ユーザーのプレビューに適用されます。

### 検討

終了基準（イベントプロパティを含む）に対応するアクションを持つアクションパスをテストする場合、終了基準がトリガーされ、テスト実行が終了する。終了基準に対応するメッセージステップをテストする場合、終了基準がトリガーされ、テスト実行は終了する。 

この時点では、アクションパス内の特定のイベントやプロパティを選択して、終了条件をトリガーすることはできません (パス全体のみを選択できます)。ユーザーが複数の終了条件を満たす可能性がある場合、最初に処理され、ユーザーが満たしたものが結果として表示されます。

## 実験パスとキャンバスのバリアント

- トップレベルのバリアントを持つキャンバスでは、テストの最初にバリアントを選択します。
- 実験パスでは、テストユーザーがステップに遭遇したときにユーザーが進むバリアントを選択します。
- パーソナライズされたパスまたは勝者バリアントを使用した実験パスでは、テストユーザーがメッセージステップで待機する遅延時間がありますが、Braze はユーザーが選択したバリアントにすぐに進んだと仮定しているため、この遅延は考慮されません。

## テスト送信

テスト実行の入力時に、内部テストグループまたは個々のユーザーにテストメッセージを送信することを選択できます。つまり、ユーザーがテストパスで出会ったメッセージのみが送信される。受信者はデフォルトで自分の属性でメッセージを受け取るが、テストユーザーの属性で上書きすることができる。

パスに関係なく、パスをプレビューせずにキャンバス内のすべてのテストメッセージを一度に送信するには、**Test Sends**タブで**Send All Test Messages**を選択する。

## 応答性

キャンバスのステップは、ユーザーパスをプレビューする際のタイミングに反応します。ユーザー更新ステップで行われた更新は、フロー内の後続ステップに反映されますが、実際のユーザープロファイルには適用されません。ユーザーがバリアントに入ったことの効果は、プレビューの今後のステップに反映されます。

同様にフィルターは、テストユーザーがキャンバス内の他のステップと相互作用した結果発生したアクションを認識する。例えば、このプレビューモードは、ユーザーがキャンバス内で以前に「送信」されたメッセージステップに遭遇したことを認識し、テストユーザーがアクションパスを進むために「アクションを起こした」ことを認識する。

レスポンシブな動作の詳細については、「[終了条件]({{site.baseurl}}/user_guide/engagement_tools/canvas/create_a_canvas/exit_criteria)」を参照してください。

## コネクテッドコンテンツ

コネクテッドコンテンツがキャンバスに含まれていれば実行される。つまり、コネクテッドコンテンツコールまたはコネクテッドコンテンツを含むコンテン・ブロックを持つキャンバスをテストする場合、キャンバスからコネクテッドコンテンツコールが送信され、他のキャンペーンやキャンバスで参照されているデータが変更される可能性があります。

ユーザーパスをプレビューする際、ユーザープロファイルや他のキャンバスやキャンペーンで参照されるデータを変更するコネクテッドコンテンツを削除することを検討する。

## Webhook

Webhook はテストメッセージが送信されたときに実行されるが、テストの実行中には実行されない。コネクテッドコンテンツと同様に、ユーザープロファイルや他のキャンバスやキャンペーンで参照されるデータを変更するWebhookの削除を検討する。

## ユースケース

このシナリオのキャンバスは、アプリでセッションを行っていないユーザーをターゲットに設定しています。このジャーニーには、ウェルカムメールを含むメッセージステップ、1 日に設定された遅延ステップ、そして少なくとも 1 つのセッションを持つユーザーとそれ以外のユーザーの 2 つのパスに分かれるオーディエンスパスステップが、それぞれ含まれています。ユーザーがどのオーディエンスパスに該当するかによって、後続のメッセージステップが送信される。

![メッセージステップ、遅延ステップ、オーディエンスパスステップ、2つのメッセージステップを含むキャンバスの例。]({% image_buster /assets/img/preview_user_path_example.png %}){:style="max-width:70%"}

ここではテストユーザーがキャンバスの入力条件を満たしているので、キャンバスに入ってユーザージャーニーを進むことができます。しかし、テストユーザーは過去1日アプリを開封していないため、「Everyone else」のパスを進み、次のようなプッシュ通知を受け取った：「最後のチャンスです! 最初のタスクを完了すると、限定ボーナスがもらえます。」

![テスト結果」セクションは、テストユーザーがエントリ基準を満たしたことを示し、どのステップが送信されたかを含め、彼らの旅の概要を提供する。]({% image_buster /assets/img/preview_user_path_results_example.png %})
