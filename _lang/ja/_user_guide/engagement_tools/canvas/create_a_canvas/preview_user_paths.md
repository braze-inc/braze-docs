---
nav_title: ユーザーパスのプレビュー
article_title: ユーザーパスのプレビュー
alias: /preview_user_paths/
description: "この記事では、キャンバスでユーザーパスをプレビューする方法について説明します。"
Tool:
  - Canvas
---

# キャンバスでユーザーパスをプレビューする

> ユーザーのために作成したキャンバスジャーニーを実際に体験することができます。これには、ユーザーが受け取るタイミングやメッセージのプレビューも含まれます。これらのテストは、キャンバスを送信する前に、メッセージが適切なオーディエンスに送信されているかどうかの品質保証として機能します。

## テストを開始する

ユーザージャーニーをプレビューするには、以下の手順に従ってください。

1. キャンバスビルダーに移動します。未保存の変更を保存し、エラーがある場合はすべて解決します。
2. フッターで**Test Canvasを**選択する。
3. テストユーザーを選択します。
4. (オプション) テストの受信者を選択します。
5. **Run Testを**選択する。

キャンバスを編集する権限がなくてもプレビューを実行することはできますが、このプレビューは未保存の変更がある場合でもそのまま実行されます。

### サポートされているステップ

以下のステップがサポートされています。
- メッセージ 
- 観客動線
- 条件分岐
- 遅延
- アクションパス
- 実験パス
- ユーザー・アップデート（UIエディターのみ、つまりJSONエディターを使用するステップはスキップされる）

テストが上記にリストされていないステップタイプと重複する場合、サポートされていないステップはスキップされ、テストユーザーは次のサポートされているステップに進みます。

### キャンバスステップの詳細

入団基準の詳細を見るには、「**もっと見る**」を選択する。セグメンテーションのあるステップでは、条件が満たされているか、満たされていないかが表示されます。メッセージはまた、配信の検証やチャネルの適格性についてもこれを表示します。メッセージのステップには、どのチャネルが送信され、どれが送信されなかったかが表示されます。

### Liquid

リキッドロジックは、実際のテストメッセージを送信していなくても、テスト実行中に処理される。これは、[アボートメッセージロジックと]({{site.baseurl}}/user_guide/personalization_and_dynamic_content/liquid/aborting_messages/#aborting-messages)他のリキッドロジックが反映され、キャンバスのユーザージャーニーに影響を与える可能性があることを意味する。

## タイミングのプレビュー

スケジュールされたキャンバスでは、テストユーザーが次のエントリ予定時刻にエントリします。開始日時のあるアクションベースのキャンバスでは、テストユーザーが開始日時にエントリします。 

デフォルトの開始時刻はそのまま適用されますが、エントリ時刻はすべてのインスタンスで設定可能です。したがって、過去や未来の日付をシミュレートすることができます。ただし、キャンバスの開始日の前や、終了日の後のテストはできません。

メッセージと遅延のステップは、遅延を再設定する必要なく、ユーザーが次に進むかメッセージを受信する時間を示します。ステップにはインテリジェントタイミングが使用されているかどうかが表示されますが、このユーザーパスのプレビューでは、テストユーザーの推定値は計算されないことに注意してください。

## ユーザーが出入りするタイミング

テストユーザーは、現実には対象外であってもプレビューにエントリします。もし対象外の場合、条件を満たさない理由がわかります。ユーザーがキャンバスに入る時と出る時の結果をサイドバーで確認できます。

- 終了条件 (イベントプロパティを含む) に対応するアクションを持つアクションパスをテストすると、終了条件がトリガーされ、テスト実行が終了します。
- 終了条件に該当するメッセージステップをテストすると、終了条件がトリガーされ、テスト実行が終了します。
- この時点では、アクションパス内の特定のイベントやプロパティを選択して、終了条件をトリガーすることはできません (パス全体のみを選択できます)。ユーザーが複数の終了条件を満たす可能性がある場合、最初に処理され、ユーザーが満たしたものが結果として表示されます。
- イベント、API トリガー、キャンバスエントリのプロパティは、キャンバスエントリに基づいて適用されません。これらが以降のステップの結果に影響を与えることはありません。

## 実験パスとキャンバスのバリアント

- トップレベルのバリアントを持つキャンバスでは、テストの最初にバリアントを選択します。
- 実験パスでは、テストユーザーがステップに遭遇したときにユーザーが進むバリアントを選択します。
- パーソナライズされたパスまたは勝者バリアントを使用した実験パスでは、テストユーザーがメッセージステップで待機する遅延時間がありますが、Braze はユーザーが選択したバリアントにすぐに進んだと仮定しているため、この遅延は考慮されません。

## テスト送信

テスト実行の入力時に、内部テストグループまたは個々のユーザーにテストメッセージを送信することを選択できます。その場合、ユーザーがテストパス上で遭遇するメッセージのみが送信されます。デフォルトでは、受信者は自分の属性でメッセージを受け取りますが、テストユーザーの属性で上書きすることもできます。

パスに関係なく、またパスをプレビューすることなく、キャンバス内のすべてのテストメッセージを一度に送信するには、**［Test Sends］**タブで**［Send All Test Messages］を**選択する。

## 応答性

キャンバスのステップは、ユーザーパスをプレビューする際のタイミングに反応します。ユーザー更新ステップで行われた更新は、フロー内の後続ステップに反映されますが、実際のユーザープロファイルには適用されません。ユーザーがバリアントに入ったことの効果は、プレビューの今後のステップに反映されます。

同様に、フィルターは、テストユーザーがキャンバス内の他のステップと対話した結果として発生したアクションを認識します。例えば、このプレビューモードは、ユーザーがキャンバス内で以前に「送信」されたメッセージステップに遭遇したことを認識し、テストユーザーがアクションパスを進むために「アクションを起こした」ことを認識します。

レスポンシブな動作の詳細については、「[終了条件]({{site.baseurl}}/user_guide/engagement_tools/canvas/create_a_canvas/exit_criteria)」を参照してください。

## コネクテッドコンテンツ

コネクテッドコンテンツは、キャンバスに含まれていれば実行されます。キャンバスにコネクテッドコンテンツが含まれている場合、ユーザープロファイルや他のキャンバスやキャンペーンで参照されるデータを変更するように設定されているコネクテッドコンテンツは削除してください。あるいは、ユーザージャーニーをプレビューしないというオプションもあります。

## Webhook

Webhook は、テストメッセージの送信時に実行されますが、テストの実行中には実行されません。コネクテッドコンテンツと同様に、ユーザープロファイルや他のキャンバスやキャンペーンで参照されるデータを変更するように設定されている Webhook は削除することを検討してください。

## ユースケース

このシナリオでは、キャンバスは、アプリでセッションをしていないユーザーをターゲットに設定されている。このジャーニーには、ウェルカムメールを含むメッセージステップ、1 日に設定された遅延ステップ、そして少なくとも 1 つのセッションを持つユーザーとそれ以外のユーザーの 2 つのパスに分かれるオーディエンスパスステップが、それぞれ含まれています。ユーザーがどのオーディエンスパスに該当するかに応じて、後続のメッセージステップが送信されます。

![][1]{:style="max-width:70%"}

ここではテストユーザーがキャンバスの入力条件を満たしているので、キャンバスに入ってユーザージャーニーを進むことができます。しかし、テストユーザーは過去 1 暦日間にアプリを開いていないため、「その他のユーザー」パスを進み、次のようなプッシュ通知を受け取ります。「最後のチャンスです! 最初のタスクを完了すると、限定ボーナスがもらえます。」

![][2]

[1]: {% image_buster /assets/img/preview_user_path_example.png %}
[2]: {% image_buster /assets/img/preview_user_path_results_example.png %}
