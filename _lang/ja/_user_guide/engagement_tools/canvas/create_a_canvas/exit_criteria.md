---
nav_title: 終了条件
article_title: 終了条件 
page_order: 4.1
alias: /exit_criteria/
page_type: reference
description: "このリファレンス記事では、終了基準と、ユーザーが選択した基準に基づいてキャンバスを終了する方法について説明する。"
tool: Canvas
---

# 終了条件

> 例外イベントをキャンバスのエントリルールに直接追加することで、ユーザーはステップの最後に例外イベントが発生するとすぐにキャンバスを終了することができる。これは、キャンバスのメッセージングにおいて、ターゲットをさらに絞ったアプローチを実現するのに役立ちます。

### ユーザー sの終了方法

終了イベントを実行すると、現在のステップが終了するとすぐに、ユーザーs がキャンバスから終了します。たとえば、ユーザーが30 日間遅延ステップにあり、遅延ステップの最初の日に終了イベントを実行した場合、ユーザーはさらに29 日間キャンバスを終了しません。

時間ベースの終了基準を使用する場合は、別の例を考えてみましょう。ユーザーは、7月1日の午前12時に24時間に設定された遅延ステップに入ります。この遅延期間では、終了イベント&quot を実行します。前回の購入が1 時間未満の場合は&quot を実行します(午前3 時)。このユーザーは、7月2日の午前12時に、遅延ステップの期間の終わりである終了基準について評価されます。7月1日の午前3時に購入してから21時間が経過したため、7月2日の遅延ステップを終了してから1時間内に購入しなかったため、キャンバスを終了しません。これは、キャンバス分析の"Exit by Exit Criteria&quotに影響します。これは、ユーザーがキャンバスを完全に終了した後にのみ更新dになります。

## 退団基準の設定

キャンバスフロービルダーの**ターゲットオーディエンス**ステップでは、キャンバスから退出させるユーザーを特定するための終了条件を設定できます。 

終了条件には例外イベントが含まれます。例外イベントは、ユーザーがキャンバスから退出する結果となる可能性がある特定のアクションです。

\![商品をブラウズしたが、まだカートに追加したり、発注したりしていないユーザーを再びエンゲージするために設定された終了基準。]({% image_buster /assets/img/exit_criteria.png %}){: style="max-width:90%;"}

### 例外イベントの選択 {#exception-events}

ユーザーが例外イベントをパフォーマンスすると、キャンバスから退出する。例外イベントは、ユーザーがキャンバスにいて、ユーザージャーニーを進んでいるときにのみトリガーされる点に注意してください。

新製品を宣伝するためにキャンバスを設定したとしよう。この場合、商品の購入が例外イベントとなる。こうすることで、ユーザーが購入した後、すでに購入した商品に関するメッセージを受け取ることがなくなります。例外イベントにより、メッセージングが適切でありパーソナライズされた状態に維持されます。

その他の例外イベントには以下のものがあります。

- 購入する
- セッションを開始する
- カスタムイベントの実行
- コンバージョンイベントの実行
- メールアドレスを追加する
- カスタム属性の値を変更する
- サブスクリプションステータスの更新
- サブスクリプショングループステータスを更新中
- キャンペーンに参加する
- 場所を入力する
- ジオフェンスのトリガー
- SMS インバウンドメッセージの送信
- WhatsAppの受信メッセージを送信
- LINEインバウンドメッセージを送信する
- カート更新済みイベントの実行
- チェックアウト完了済みイベントの実行
- チェックアウト開始済みイベントの実行

#### スケジュールされたステップ

キャンバスステップがスケジュールされたの場合、ユーザーは例外イベントが発生した直後にキャンバスからドロップアウトされます。ユーザーがキャンバスに入り、最初のステップに1週間の遅延と例外イベントがあるとします。ユーザーが5日目に例外イベントを実行した場合、例外イベントを実行した直後(5日目)に終了します。 
 
#### トリガステップs

キャンバス ステップがイベントによってトリガーされた場合、そのトリガーからエンキューされた最後のスケジュールされた送信はキャンセルされますが、ユーザーはウィンドウの間キャンバス内に残ります。つまり、ユーザーがウィンドウ内で再度トリガーを実行した場合でも、ステップを送信できます。ウィンドウが通過すると、ユーザーはキャンバスを終了します。

### セグメンテーションとフィルターを使う

また、終了条件にセグメントやフィルターを追加できます。つまり、Segmentとフィルターをマッチさせるユーザーは、キャンバスを終了し、それ以上のメッセージングを受信しません。 

例えばキャンバスの最初のステップが 5 日間の遅延ステップである場合、終了条件はこのステップの終了時に適用されます。したがって、ユーザーが終了条件を満たしている場合、5 日間が経過した時点で退出します。

{% alert note %}
配列属性は現在、例外イベントの終了基準としてサポートされていない。
{% endalert %}

### 同じ終了イベントとコンバージョンイベントを持つ

終了イベントとコンバージョンイベントが同じ場合、コンバージョンイベントと終了イベントの両方が考慮されます。たとえば、キャンバスに遅延ステップがあり、その遅延ステップ内でユーザーが終了基準を実行した場合、ユーザーが遅延ステップを終了するとすぐに終了イベントが増加します。また、コンバージョンは、イベントがユーザープロファイルに記録されるとすぐに増加します。

コンバージョンはキャンバスが終了しても追跡されますが、ユーザーがキャンバスを終了しても終了は追跡されません。「コンバージョン」ウインドウは、「キャンバス」の最長継続時間よりも3 日間長くなります。つまり、終了のトラッキングが終了した後もコンバージョンs はトラッキングされ続けます。 

コンバージョンウィンドウの最短時間は5分です。コンバージョンイベントs が終了イベントとパリティにできるだけ近づくように、コンバージョンウィンドウを5 分に設定します。また、コンバージョンウィンドウは、少なくともキャンバス内の最も長いパスに合うように設定することをお勧めします。

分析がどのように計算されるかについて、次のサンプルを考えてみましょう。

1. 10ユーザーがキャンバスを通過します。
2. 3 つのユーザーs が5 分以内にコンバージョンイベントを実行します(終了イベントの数は3 で、コンバージョンイベントの数s は3 です)。
3. 5 分後にもう 5 つのユーザーがキャンバスを終了しますが、2 日後にコンバージョンイベントを実行します (終了イベントの回数は変わりませんが、コンバージョンイベントは 8 に増えます)。
4. 最後の2 つのユーザーは、5 分後にキャンバスを終了しますが、コンバージョンイベントを実行しないでください。または、3 日5 分後に実行します(終了イベントまたはコンバージョンイベントメトリクスではカウントされません)。

## 例

例えば、まだバックパック用品会社で購入したことのないユーザーをターゲットにしたいとしよう。終了条件を設定するには、次のようにします。

1. 例外イベントとして [**購入**] を選択します。
2. [**トリガーを追加**] を選択します。 
3. [**セグメント**] で [**過去 1 日以内に使用した**] を選択します。これによりキャンバスの起動時に、購入を行ったユーザーがオーディエンスから除外されます。
4. **フィルターについては**、「**購買行動**」＞「**購買回数**」＞「**購入商品**」を選択する。
5. フィルターグループを`backpack-example exactly 1` に設定する。つまり、バックパック製品を購入したユーザーはキャンバスから退出することになる。

\![Exit Criteria 設定 s with " Make Any Purchase" 例外イベントとして、ユーザーが購入した場合、このキャンバスを終了します。]({% image_buster /assets/img_archive/exit_criteria_example.png %}){: style="max-width:80%;"}


