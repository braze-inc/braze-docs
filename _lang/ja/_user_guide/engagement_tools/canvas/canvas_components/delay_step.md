---
nav_title: 遅延 
article_title: 遅延 
alias: "/delay_step/"
page_order: 3
page_type: reference
description: "この記事では、関連するメッセージを追加することなく、キャンバスに遅延を追加する方法について説明します。"
tool: Canvas

---

# 遅延

> 遅延コンポーネントを使用して、キャンバスにスタンドアロンの遅延を追加できます。関連するメッセージを追加しなくても、キャンバスに遅延を追加することができます。 

遅延によって、すっきりと整理されたキャンバスを作成できます。このコンポーネントを使えば、正確な日付まで、特定の日まで、あるいは特定の曜日まで、別のステップを遅らせることもできます。<br> ![][1]{: style="float:right;max-width:35%;margin-left:15px;"}

## 遅延を作成する

遅延を作成するには、キャンバスにステップを追加します。サイドバーからコンポーネントをドラッグ＆ドロップするか、ステップの一番下にある <i class="fas fa-plus-circle"></i> プラスのボタンを押して、[**延期期間**] を選択します。

キャンバスジャーニーに遅延を作成する場合、考慮すべき点がいくつかあります。

- 遅延制限は 30 日です。
- 遅延コンポーネントは、次の 1 つのステップだけに接続できます。

### パーソナライズされた遅延

{% alert important %}
パーソナライズされた遅延と拡張された遅延は、早期アクセス中です。この初期のアクセスに参加したい場合は、Braze アカウントマネージャーに連絡してください。
{% endalert %}

**パーソナライズされた遅延**トグルを選択して、ユーザーのパーソナライズされた遅延を設定します。これは、[コンテキストステップ]({{site.baseurl}}/user_guide/engagement_tools/canvas/canvas_components/context)で使用して、遅延するコンテキスト変数を選択できます。

次の場合、Braze はステップでユーザーを終了します。

- コンテキスト変数は、どの値にも戻りません。
- 埋め込まれた接続コンテンツコールが失敗します。
- コンテキスト変数の型が一致しません。

今から30日後に歯磨き粉を購入することを、顧客に思い出させたいとしよう。コンテキストステップと遅延ステップの組み合わせを使用して、遅延に使用するコンテキスト変数を選択できます。この場合、コンテキストステップには次のフィールドがあります。

- **コンテキスト変数名:** product_reminder_interval
- **データタイプ:**時刻
- **値:** {% raw %}`{{custom_attribute.${Order_filled_time}}}`{% endraw %}

!["product_reminder_interval"およびその値。][2]

次に、30日後にお客様に注意を促すため、遅延オプションとして**特定の日まで**を選択し、**Personalize delay**を選択してコンテキストステップの情報を使用します。つまり、ユーザーは選択したコンテキスト変数まで遅延します。

![遅延ステップでコンテキスト変数を使用して、"product_reminder_interval"に基づいてユーザを遅延させる例。][3]

#### 遅延の延長

これで、遅延ステップを2年まで延長できます。たとえば、アプリの新しいユーザーをオンボーディングしている場合は、セッションを開始していないユーザーを誘導するために、メッセージステップを送信する前に2か月間の遅延の延長を追加できます。

### 時間の遅延オプション

キャンバスの次のメッセージまでの遅延のタイプを選択できます。ユーザーを指定期間が経過するまで遅延させるか、特定の日時まで遅延させるかを設定できます。

{% tabs %}
  {% tab 期間より後 %}

  [**期間より後**] オプションでは、設定した秒数、分数、時間数、日数、週数、および特定の時刻が経過するまでユーザーを遅延させることができます。例えば、ユーザーを 4 時間遅らせたり、1 日遅らせたりできます。
  
  「日」と「暦日」の計算方法の違いに注意してください。
  
    - A "day" is 24 hours and calculated from the time the user enters the Delay step. 
    - A "calendar day" defines a day as 24 hours after a specified time. When a calendar day is chosen and the time is specified, you can choose to delay at company time or at a user's local time. If a time isn't specified, the user will be delayed until midnight the next day in company time.

  また、**特定の時間**に、ユーザがいつキャンバスに進むかを指定することもできます。このオプションでは、ユーザーが遅延ステップに入った時間を考慮に入れます。この時間が設定で設定された時間を超えている場合は、遅延にさらに時間を追加します。例として、今日が12月11日で、遅延ステップが**1週間後**の UTC 午前8時に設定されているとします。ユーザーが12月4日に遅延ステップに入った場合、最初に遅延ステップに入ったのがUTC午前8時より前であれば、遅延ステップから解放されて今日のジャーニーを続行できます。この時間以降に遅延ステップに入った場合、ユーザーは翌日 (この時間の次の発生) まで遅延されます。 

  {% endtab %}
  {% tab 特定の日まで %}

  [**特定の日付まで**] オプションでは、ユーザーを特定の日時までステップに留めることができます。

  {% alert important %}
  延期期間ステップに進んだ時点で、選択した日時がすでに経過している場合、ユーザーはキャンバスを退出します。キャンバスの開始日から「正確な日付まで待つ」ステップで選択した日付までの期間は最大 31 日間です。
  {% endalert %}
  {% endtab %}
  {% tab 特定の曜日まで %}

  [**特定の曜日まで**] オプションでは、ユーザーを特定の曜日の特定の時刻までステップに留めることができます。例えば、次に会社のタイムゾーンで木曜日の午後 4 時になるまでユーザーを遅らせることができます。 

  この設定を成功させるには、ユーザーが選択した曜日 (例えば、木曜日) の、指定された時刻以降にキャンバスに入った場合の動作も選択する必要があります。ユーザーをその日のうちに先に進めるかか、翌週まで留めるかを選択できます。
  {% endtab %}
{% endtabs %}

## 遅延ステップの使用

今日は 6 月 10 日です。6 月 11 日に、ユーザーにキャンバスに入り、近日行われるプロモーションについてのメッセージを受け取ってもらいたいとします。その後、現地時間の 6 月 17 日午後 3 時までキャンバスにユーザーを留めておきます。そして現地時間の 6 月 17 日午後 3 時に、プロモーションに関するリマインダーメッセージをユーザーに送ることにします。

シーケンスのキャンバスステップは、次のようになります。

1. まず、6月11日にユーザーがキャンバスに入った直後に送信するメッセージステップを追加します。
2. 6月17日の現地時間の午後1時までユーザーを保持する遅延ステップを作成します。
3. 遅延ステップを、メッセージをすぐに送信する別のメッセージステップにリンクします。

### キャンバス終了時の遅延コンポーネント {#delay-as-last-step}

キャンバスに遅延コンポーネントを追加しても、遅延コンポーネントの後にステップがない場合、最後のステップに到達したユーザーは自動的にキャンバスから出るよう誘導されます。これは、延期期間ステップの時間がまだ経過していなくても同じです。したがって、すでに延期期間ステップに達しているユーザーには、延期期間ステップ以降に追加したメッセージは届きません。しかし、もしユーザーが延期期間ステップに到達しておらず、メッセージが追加された場合、そのユーザーはメッセージを受け取ります。

## 遅延分析

遅延には、アクティブなあるいは以前にアクティブだったキャンバスの分析ビューに 3 つの統計があります。

| 指標 | 説明 |
|---|---|
| `Entered` | ステップの入力回数を反映する。キャンバスに再適格性があり、ユーザーが遅延ステップに2回入った場合、2つのエントリが記録されます。 |
| `Proceeded to Next Step` | キャンバスで次のステップに進んだエントリーの数を反映する。 |
| `Exited Canvas` | キャンバスを終了し、次のステップに進まなかったエントリの数を示します。 |
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

これらの分析の時系列は、展開されたコンポーネントビューに表示されます。

[1]: {% image_buster /assets/img/canvas_delay.png %}
[2]: {% image_buster /assets/img/context_step1.png %}
[3]: {% image_buster /assets/img/context_step2.png %}
