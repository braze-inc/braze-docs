---
nav_title: 測定セグメントサイズ
article_title: 測定セグメントサイズ
page_order: 5
page_type: reference
tool: 
- Segments
description: "このページでは、セグメントのメンバーシップとサイズを監視する方法について説明します。"
---

# 測定セグメントサイズ

> このページでは、セグメントのメンバーシップとサイズを監視する方法について説明します。

## セグメントメンバーシップの計算

Braze は、データが当社のサーバーに送り返されて処理されると、通常はユーザーのセグメントメンバーシップを瞬時に更新します。ユーザーのセグメントメンバーシップは、そのセッションが処理されるまで変更されません。例えば、セッションが最初に開始されたときに失効したユーザーセグメントに入ったユーザーは、セッションが処理されるとすぐに離脱ユーザーセグメントから移動されます。

### リーチ可能なユーザーの合計の計算

各セグメントには、そのセグメントのメンバーであるユーザーの総数が表示されます。**すべてのアプリのユーザ** をフィルタリングすると、最も頻繁に使用されるメッセージングチャネル(Web プッシュやメールなど) と、それらの特定のチャネルの到達可能なユーザ数も表示されます。 

ユーザーの合計数は、各チャネルでリーチ可能なユーザー数と異なる場合があります。また、すべてのチャネルが到達可能なユーザーのテーブルにリストされているわけではありません。たとえば、コンテンツカード、ウェブフック、およびWhatsApp は、内訳には表示されません。つまり、到達可能なユーザーの総数が、表示されている各チャネルのユーザーの合計よりも大きくなる可能性があります。

![メール、iOSプッシュ、Androidプッシュ、Web プッシュ、およびKindleプッシュによって到達可能なユーザーごとに分割された到達可能な総ユーザーを表示するテーブル。]({% image_buster /assets/img_archive/segmenter_reachable_users.png %})

ユーザーが特定のチャネルを通じてリーチ可能と表示されるには、次の両方が必要です: 
* プロフィールに関連付けられた有効な電子メールアドレスまたはプッシュトークン。
* アプリをオプトインまたはサブスクライブしていること。

1 人のユーザーが異なるリーチ可能なユーザーグループに属している場合があります。例えば、ユーザーが有効なメールアドレスと有効な Android プッシュトークンの両方を持っていて、両方にオプトインしている一方、iOS プッシュトークンは関連付けられていない場合があります。到達可能なユーザーの総数と、さまざまなチャネルの合計との差は、セグメントの対象でありながら、それらの通信チャネルでは到達できないユーザーの数です。

## セグメント・サイズの統計

推定された統計は、セグメントの一部のみをサンプリングすることで近似されます。そのため、見積もられたサイズが実際の値よりも大きくなったり小さくなったりすることが予想され、ワークスペースが大きくなるほど、エラーのマージンが大きくなる可能性があります。セグメント内のユーザーの正確な数を取得するには、[**正確な統計を計算する**] を選択します。セグメントの正確なメンバーシップは、セグメントがキャンペーンまたはキャンバスで送信されるメッセージの影響を受ける前に常に計算されます。 

Brazeはセグメントサイズについて次のような統計を行っている。 

### フィルター統計

フィルターグループごとに、到達可能なユーザー数の推定を表示できます。チャネル間の内訳を見るには、[**追加の目標到達プロセスの統計を展開する**] を選択します。

![セッション数がちょうど1つであったユーザーsのフィルターをもつフィルター群。]({% image_buster /assets/img_archive/segment_filter_stats.png %}){: style="max-width:80%;"}

## 到達可能ユーザーの推定数

[**到達可能なユーザー**] サイドパネルで、各チャネルの推定ユーザー数を含む、セグメント全体の到達可能ユーザーの推定数を確認できます。この**見積もり**には、セグメントサイズのおおよその範囲と、ユーザーベース全体のどのパーセンテージがこのセグメントに入るかの見積もりが表示されます。セグメントを編集しない限り、推定統計は15 分間キャッシュされることに注意してください。この場合、推定統計は自動的に更新されます。また [**正確な統計情報を計算する**] を選択することで、到達可能なユーザーの正確な数 (セグメント全体とチャネルごとの両方) も確認できます。 


![" Reachable ユーザー s" 2.3M-2.4M の推定ユーザーs があることを示すパネル。]({% image_buster /assets/img_archive/reachable_users_side_panel.png %})

### 推定数に関する考慮事項

ろうそくは、ユーザーのサブセットを照会して推定ユーザー数を測定し、その結果をオーディエンス全体に推定します。この推定数を計算するたびに、Braze がクエリするユーザーのサブセットが異なる可能性があるため、オーディエンスのメンバーシップが実質的には同じである必要があっても、推定数が変わる可能性があります。たとえば、フィルタの順序を変更したり、同じセグメントを別の時間に再チェックしたりすると、見積もりカウントが変更される可能性があります(**Calculate exact stats** は、セグメントが変更されなかった場合に同じ結果を表示します)。

ワークスペースに大規模なユーザー母集団がある場合、正確な計算数と比較して、見積もり数のばらつきが大きくなることがあります。特に、セグメントがワークスペース母集団全体に占める割合が非常に少ない場合に顕著になります。これは、Braze が、ユーザーのサブセットを照会し、その結果をユーザーベース全体に外挿することによって、見積もりを測定するためです。大規模なユーザー群では、推定数と正確な数の差が大きくなることが予想されます。

非常に小さなセグメントには、0 を含む推定範囲があります。つまり、合計ユーザーのパーセンテージは0 に丸めることができます。このような場合、**正確な統計を計算する**を使用すると、セグメントサイズの正確なカウントが表示され、実際には0 ではない可能性があります。

!["Reachable ユーザー S"サイドパネル。]({% image_buster /assets/img_archive/reachable_users_panel.png %})

### チャネル別の到達可能なユーザー

各メッセージチャネルで到達可能なユーザーの数を表示するには、[**到達可能なユーザー**] パネルで [**内訳の表示**] を選択します。これにより、最も頻繁に使用されるメッセージングチャネル(Web プッシュまたはメールなど)と、それらの特定のチャネルの到達可能なユーザ数が表示されます。 

_Total_メトリクスは、一意のユーザーを表します。たとえば、ユーザーにAndroid プッシュとiOS プッシュの両方がある場合、これらの両方の行についてカウントされますが、_Total_ 行では1 ユーザーとしてカウントされます。

ただし、1人のユーザーが複数の到達可能なユーザーグループに属している可能性があるため、総ユーザー数が各チャネルの到達可能なユーザー数の合計と異なる可能性があります。例えば、ユーザーが有効なメールアドレスと有効な Android プッシュトークンの両方を持っていて、両方にオプトインしている一方、iOS プッシュトークンは関連付けられていない場合があります。 

すべてのチャネルが**Reachable users**テーブル(コンテンツカード、ウェブフック、WhatsAppなど)にリストされているわけではないことに注意してください。たとえば、ユーザがWhatsapp 経由でのみ到達可能である場合、_Total_ に反映されますが、チャネル固有の行には反映されません。つまり、到達可能なユーザー数の合計は、表示されている各チャネルのユーザー数の合計とは異なる場合があります。

[_合計_] がチャネルの合計よりも大きい場合、この差は、セグメントの対象であるが、これらのコミュニケーションチャネルでは到達できないユーザーの数を表します。

ユーザーが特定のチャネルで到達可能と表示されるには、次の両方が必要です。
- プロファイルに関連付けられた有効なメールアドレスまたはプッシュトークン、および
- アプリをオプトインまたはサブスクリプション登録していること。

## 正確な統計の計算 

セグメント内のユーザー数の正確なカウントを表示するには、**到達可能なユーザー**ペインで**正確な統計を計算する**を選択します。

以前に実行した計算の統計を更新するには、[**正確な統計を更新**] を選択します。この計算が最後に実行された日付が自動的に更新されます。

計算の精度は99.999% 以上に過ぎないことに注意してください。したがって大規模なセグメントでは、たとえ正確な統計を計算する場合でも、わずかなばらつきに気付くことがありますが、これは通常の動作です。さらに、セグメントを編集しない限り、正確な統計結果は24 時間キャッシュされます。その場合、正確な統計を再計算できます。

{% alert note %}
セグメントを[ランダムバケット番号]({{site.baseurl}}/user_guide/engagement_tools/testing/random_bucket_numbers/)で均等に分割すると、同じサイズにはなりません。たとえば、Segmentを **Random Bucket # less 5000** というフィルターで作成し、**Random Bucket # という 1 つのSegmentを 5000** 以上にすると、Segmentの大きさは、数パーセントのタグ e 点まで変化することがあります。これは、アクティブユーザーが削除され、ユーザーが到達不能になった場合などが原因です。
{% endalert %}

!["Reachable ユーザー s"パネルには、内訳を表示するオプションがあります。]({% image_buster /assets/img_archive/reachable_users_breakdown.png %})

正確な統計を計算する場合でも、フィルターごとのレベルでの統計は常に推定値です。**正確な統計の計算** は、フィルタまたはフィルタグループレベルではなく、セグメントレベルで正確な統計のみを計算します。この計算の実行には数分かかる場合があります。特に、ワークスペースを大きくすると、計算を完了するのに長い期間が必要になる場合があります。進行状況は、[**到達可能なユーザー**] パネルの進行状況バーで追跡できます。計算の実行時間が5分を超えることが予想される場合、Braze は結果をメールで送信します。 

Braze では、ワークスペースごとに一度に1つの計算を優先して実行するため、一度に複数の計算を実行すると遅延が発生します。**計算キューを表示** を選択すると、どのセグメントが前方にあるか、その進行状況、およびイニシエータを確認し、計算が優先される時期を確認できます。

![1 つの計算が含まれる計算キュー。]({% image_buster /assets/img_archive/calculation_queue.png %})

**Cancel**を選択すると、正確な統計計算をキャンセルできます。これは、キューに複数の計算があり、最初に別の計算に優先順位を付けたい場合に役立ちます。 

![キャンセルを選択できる有効な演算]({% image_buster /assets/img_archive/cancel_calculation.png %}){: style="max-width:25%"}

## セグメントメンバーシップの履歴サイズの表示

すべてのセグメントについて、各日の推定セグメントメンバーシップを示す履歴メンバーシップチャートを表示できます。このチャートは、セグメントのサイズが時間の経過とともにどのように変化したかを示します。セグメントのメンバーシップに期間のフィルターを適用するには、ドロップダウンを使用します。

![[過去のメンバーシップ] ドロップダウンを使用して、セグメントのメンバーシップに日付範囲のフィルターを適用します。]({% image_buster /assets/img_archive/historical_membership2.png %})

このチャートの目的は、全体的なセグメントのメンバーシップの傾向を把握することであるため、毎日のカウントは推定値です。これは、[**正確な統計を計算する**] を選択する前にはセグメントサイズが推定値であった状況と同様です。また、このグラフには見積もりが表示されるため、セグメントのサイズが"0&quot として表示される可能性があります。このグラフでは、実際のサイズ(**Calculate Exact Stats**) は"0" ではありませんが、実際のサイズは(<span id="2特に、ワークスペースのユーザー数に比較してセグメントがかなり小さい場合には、チャートに推定値として0が表示される可能性があります。

たとえば、ワークスペースに1億 ユーザー s が含まれ、Segmentに約700 ユーザー s があるとします。数日間、ユーザーsがSegmentに含まれておらず、過去のメンバーシップの推定に使用されたランダムバケット範囲にユーザーsが含まれていないため、1日のメンバーシップ数が0になる可能性があります。

Braze は、ユーザーのサブセットを照会し、その結果をオーディエンス全体に外挿することによって、セグメントのメンバーシップ数を見積もります。つまり、チャートの結果は、その日のセグメントメンバーシップの推定のみを示すものであり、また毎日この推定値を算出するために異なるユーザーサンプルがクエリされる可能性があることから、この推定が日々変動することも予想されます。

{% alert note %}
すべての推定値は、表示されている値よりも、ワークスペース全体の人数の約1%の範囲で高いかまたは低い可能性があります。ユーザ数の多い大きなワークスペースでは、その差が依然としてワークスペースのユーザ母集団の1%である場合でも、正確な計算とは異なる見積もりを持つ可能性が高くなります。つまり大規模なワークスペース間では、推定数と正確な数の差が大きくなることが予想されます。
{% endalert %}

### 大幅な変動の理由

この表のような多くの理由により、メンバーシップ数が大幅に変更される場合があります。

| 理由 | 例 |
| --- | --- |
| 通常のユーザーの行動 | ユーザーは、特に成功したキャンペーンの後にサブスクリプション登録します。 |
| ユーザーは CSV でインポートされる | ユーザのCSVファイルがインポートされ、セグメントのメンバーシップが大幅に増加しました。 |
| セグメントオーディエンス基準が変更される | 既存のセグメントのオーディエンスルール (フィルターなど) が変更され、セグメントメンバーシップに大きな変化が生じました。 |
| ユーザーが削除される | 多数のユーザーが削除されました。 |
| パートナー連携と Braze が同期された | セグメントのメンバーシップに大きく影響するデータがサードパーティから Braze に送信されました。 |
| 休眠ユーザーがアーカイブされる | 多数の非アクティブなプロファイルがアーカイブされました。例えば、CSV でインポートされた多数のユーザーが、アクティビティをログに記録し、かつ同時にアーカイブされることはありません。 |
{: .reset-td-br-1 .reset-td-br-2 role="presentation"}
