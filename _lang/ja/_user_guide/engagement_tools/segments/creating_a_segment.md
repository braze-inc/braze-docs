---
nav_title: セグメントの作成
article_title: セグメントの作成
page_order: 1
page_type: tutorial
description: "この記事では、Braze を使用してセグメントを設定・作成する手順について説明します。"
tool: Segments
search_rank: 3
---

# [![Braze Learning course]({% image_buster /assets/img/bl_icon2.png %})](https://learning.braze.com/segmentation-course){: style="float:right;width:120px;border:0;" class="noimgborder"}セグメントの作成

> セグメンテーションにより、人口統計、行動、または技術的な特徴やアクションに基づいてユーザーをターゲットすることができます。セグメンテーションとメッセージングの自動化を創造的かつインテリジェントに使用することで、ユーザーをファーストタッチから長期顧客へとシームレスに移行できます。セグメントは、データの変更に応じてリアルタイムで更新されます。また、ターゲットおよびメッセージングの目的で必要な数のセグメントを作成できます。

## ステップ 1:セグメントセクションに移動する

[**オーディエンス**] > [**セグメント**] に移動します。

{% alert note %}
[古いナビゲーションを使用している場合は]({{site.baseurl}}/navigation)、[**エンゲージメント**] に [**セグメント**] が表示されます。
{% endalert %}

## ステップ 2: セグメントに名前を付ける

[<i class="fas fa-plus"></i>**セグメントを作成**] をクリックしてセグメントの作成を開始します。セグメントに名前を付けます。絞り込むユーザーのタイプがわかるような名前にしてください。わかりやすい名前を付けることで、このセグメントを正しく使って、今後の複数のキャンペーンやキャンバスのターゲットにできます。セグメントの名前が曖昧だと、後で混乱を招く可能性があります。

必要に応じて、セグメントに説明を追加して、このオーディエンスの意図に関する詳細を提供したり、他のチームメンバーが参照できるようにメモを残したりできます。

![セグメントに「離脱ユーザー」という名前を付け、セグメントの説明に「過去 14 日以内に非アクティブだったユーザーをターゲットとする主な離脱ユーザーセグメント」と書き込んだセグメントの作成モーダル。[キャンセル] と [セグメントを作成] の 2 つのボタン付き] [2]{: style="max-width:70%;"}

## ステップ 3: アプリまたはプラットフォームを選択する

[**すべてのアプリのユーザー**] (デフォルト) または [**特定のアプリのユーザー**] を選択して、ターゲットにするアプリまたはプラットフォームを選択します。[**すべてのアプリのユーザー**] を選択すると、セッションやアプリデータに関係なく、セグメントにはすべてのユーザーが含まれます。[**特定のアプリのユーザー**] を選択すると、セグメントに含めるアプリまたはプラットフォームを選択できます。

例えば、アプリ内メッセージを iOS デバイスのみに送信したい場合は、iOS アプリを選択します。これにより、iOS デバイスと Android デバイスの両方を使用するユーザーは、iOS デバイスのみでメッセージを受信します。特定のアプリのリストで、[**どのアプリも使用していないユーザー**] オプションを選択すると、セッションもアプリデータもないユーザーを含められます (通常はユーザーインポートまたは REST API で作成)。

![[使用したアプリ] セクションで [すべてのアプリのユーザー] オプションが選択されている [セグメント詳細] パネル][5]

## ステップ 4: セグメントにフィルターを追加する

次の図に示すように、セグメントに少なくとも 1 つのフィルタを追加します。セグメンテーションをより具体的にするために、必要な数のフィルターを組み合わせることができます。

{% alert note %}
Braze は、アプリを初めて使用するまでユーザーのプロファイルを生成しないため、アプリをまだ開いていないユーザーをターゲットにすることはできません。
{% endalert %}

![[OR] を選択したセグメントフィルター] [3]

フィルターに [OR] を選択すると、条件の 1 つ、いくつか、またはすべてを満たすユーザーがセグメントに含まれます。一方、[AND] を選択すると、いずれかの条件に一致しないユーザーはセグメントに含まれません。このロジックを組み合わせると、1 つのフィルターに一致したユーザーを、他の 2 つのフィルターのいずれかを [AND] でセグメントできます。

フィルターを増減すると、セグメントの統計情報がリアルタイムで変化します。これらの統計情報は推定値 (+/-1%) であり、正確なセグメントメンバーシップは常に、キャンペーンまたはキャンバスで送信されたメッセージによってセグメントが影響を受ける前に計算されます。ネストされたセグメントの 1 つで参照しているセグメントがアーカイブされている場合、エラーが表示されます。

{% alert important %}
すでにセグメントメンバーシップフィルターを使用しているセグメントは、他のセグメントにさらに含めたり、ネストしたりすることはできません。
{% endalert %}

### セグメントのテスト

セグメントにアプリとフィルターを追加したら、ユーザーを検索してセグメント条件と一致するかどうかを確認することで、セグメントが期待どおりに設定されているかどうかをテストできます。そのためには、[**ユーザーをルックアップ検索**] をクリックして、ユーザーの `external_id` または `braze_id` を検索します。

![[ユーザーをルックアップ検索] ボタンのあるユーザーの検索セクション] [6]{: style="max-width:50%;"}

ユーザールックアップ検索は次の場合に利用できます。
\- セグメントの作成
\- キャンペーンまたはキャンバスオーディエンスの設定
\- オーディエンスパスステップの設定

ユーザーがセグメント、フィルター、およびアプリの条件に一致すると、次のようになります。

![「user007」のユーザー検索により、「user007 はすべてのセグメント、フィルター、およびアプリケーションに一致しました」というアラートがトリガーされます。] [7]{: style=" max-width:60%;"}

ユーザーがセグメント、フィルター、またはアプリの条件の一部またはすべてに一致しない場合、トラブルシューティングのために欠落している条件がリストされます。

![「user1234」のユーザー検索により、「user1234 は次のターゲット基準に一致しません」というアラートが表示され、一致しない 2 つの条件が表示されます。1 つは在職期間が 1 年を超えていること、もう 1 つは今日が記念日であることです。] [8]{: style=" max-width:60%;"}

### シングルユーザーセグメント

ユーザー名やユーザーID などのユーザーを識別する一意の属性を使用して、単一のユーザーセグメント (または少数のユーザーのセグメント) を作成できます。

ただし、セグメント統計は、結果が +/-1% 以内という 95% の信頼区間のランダムサンプルに基づいて計算されるため、セグメンテーション統計またはプレビューにはこの個々のユーザーが表示されない場合があります。ユーザーベースが大きいほど、セグメントのサイズは概算である可能性が高くなります。セグメントにターゲットとする単一ユーザーが含まれていることを確認するには、[****セグメントの詳細**] ページで [**正確な統計を計算**] をクリックします。これにより、セグメント内の正確なユーザー数が 99.999% を超える精度で計算されます。

Braze には、ユーザー ID またはメールアドレスで特定のユーザーをターゲットにするテストフィルターがあります。

## ステップ 5: セグメントを保存する

[**保存**] をクリックすると、ユーザーにメッセージを送信する準備が整います。

## セグメントメンバーシップの計算 {#segment-membership-calculation}

Braze は、データが当社のサーバーに送り返されて処理されると、通常はユーザーのセグメントメンバーシップを瞬時に更新します。ユーザーのセグメントメンバーシップは、そのセッションが処理されるまで変更されません。例えば、セッションが最初に開始されたときに失効したユーザーセグメントに入ったユーザーは、セッションが処理されるとすぐに離脱ユーザーセグメントから移動されます。

### リーチ可能なユーザーの合計の計算

各セグメントには、そのセグメントのメンバーであるユーザーの総数が表示されます。**すべてのアプリのユーザー**をフィルターすると、ウェブプッシュやメールなど、それらのユーザーと通信できるさまざまなチャネルもすべて表示されます。ユーザーの合計数は、各チャネルでリーチ可能なユーザー数と異なる場合があります。これはなぜでしょうか。

![一覧表に、リーチ可能な 9,100 人の合計ユーザー、メールでリーチ可能な 8,899 人のユーザー、ウェブプッシュでリーチ可能な 6,720 人のユーザ、Android プッシュでリーチ可能な 4,521 人のユーザ、および iOS プッシュでリーチ可能な 5,122 人のユーザーを表示][4]

ユーザーが特定のチャネルを通じてリーチ可能と表示されるには、次の両方が必要です: 
\* プロフィールに有効なメールアドレス/プッシュトークンが関連付けられていること。および、
\* アプリをオプトインまたはサブスクライブしていること。

1 人のユーザーが異なるリーチ可能なユーザーグループに属している場合があります。例えば、ユーザーが有効なメールアドレスと有効な Android プッシュトークンの両方を持っていて、両方にオプトインしている一方、iOS プッシュトークンは関連付けられていない場合があります。リーチ可能なユーザーの総数と、異なるチャネルの合計との差は、セグメントの対象でありながら、それらの通信チャネルではリーチできないユーザーの数です。

#### 正確な統計の計算
ユーザーベースが大きいほど、**リーチ可能なユーザー数**は概算になる可能性が高くなります。これにより、毎回ユーザーベース全体を検索するのではなく、フィルターを追加するときにリアルタイムで見積もりを迅速に提供できます。

リーチ可能なユーザーの正確な数を計算するには、[**正確な統計情報を計算**] をクリックします。大きなセグメントでは、正確な統計を計算しても、通常はわずかな変動が見られます。この機能の精度は、99.999% 以上であることが期待されます。

## セグメントのアーカイブ

特定のセグメントが不要になった場合や廃止したい場合は、[**セグメント**]  ページに移動して歯車アイコンをクリックし、ドロップダウンから [**アーカイブ**]  を選択してアーカイブできます。

{% alert warning %}
セグメントをアーカイブすると、そのセグメントを使用しているキャンペーンやキャンバスもアーカイブされます (セグメントが単一のキャンバスコンポーネントでのみ使用されている場合も含む)。これには、両方のセグメントと、それらを使用するキャンペーンやキャンバスをネストしたセグメントもアーカイブに含まれます。
<br><br>
関連するセグメントをアーカイブすると、どのキャンペーンとキャンバスがアーカイブされるかが警告リストに表示されます。
{% endalert %}

セグメントのアーカイブを解除するには、[**セグメント**] ページ内でセグメントに移動し、[**アーカイブ解除**] を選択します。

[1]: {% image_buster /assets/img_archive/Segment1.png %}
[2]: {% image_buster /assets/img_archive/Segment2.png %}
[3]: {% image_buster /assets/img_archive/segment_step4.png %}
[4]: {% image_buster /assets/img_archive/reachable_users.png %}
[5]: {% image_buster /assets/img_archive/segment_app_selection.png %}
[6]: {% image_buster /assets/img_archive/user_lookup.png %}
[7]: {% image_buster /assets/img_archive/user_lookup_match.png %}
[8]: {% image_buster /assets/img_archive/user_lookup_nomatch.png %}