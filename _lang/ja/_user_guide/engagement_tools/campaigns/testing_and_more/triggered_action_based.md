---
nav_title: API トリガーキャンペーンとアクションベースのキャンペーン
article_title: API トリガーキャンペーンとアクションベースのキャンペーンのテスト
page_order: 2
page_type: reference
description: "この記事では、API トリガーキャンペーンとアクションベースのキャンペーンをテストする方法について説明します。"

---

# API トリガーキャンペーンとアクションベースのキャンペーン

> キャンペーンを設定する際は、キャンペーンを開始する前に必ずメッセージをテストすることをお勧めします。この記事では、API リクエストやペイロードを検査したり、配信機能ログを表示したりできる、テストユーザーセグメントの作成について説明します。

## ステップ 1: テストユーザーセグメントの作成

API またはカスタムイベントを使用したキャンペーンのトリガーをテストする唯一の方法は、キャンペーンをライブ配信することです。新しいキャンペーン展開の一環として、配信機能のトリガーをテストする際には、テストユーザーセグメントをキャンペーンに追加することを強くお勧めします。これにより、キャンペーンが誤って送信された場合でも、内部ユーザーにのみ送信されるというセーフティネットが提供されます。

1. **テストユーザーをインポートする**<br>テストユーザーは、CSV 形式で Braze にインポートすることも、[Postman](https://www.braze.com/docs/api/postman_collection/) 経由の 1 回限りのバッチリクエストでインポートすることもできます。これらのユーザーをインポートするときは、テストグループセグメントの作成に使用できるカスタム属性 (`internal_test_user: true` など) をプロファイルに設定することをお勧めします。<br><br>
2. **テストユーザーを Braze 認定テストユーザーとして追加する**<br>ダッシュボードで[テストユーザーを Braze の認定テストユーザーとしてマークする](https://www.braze.com/docs/user_guide/administrative/app_settings/developer_console/internal_groups_tab/)と、各ユーザーの詳細なログにアクセスして、API リクエストとそのペイロードを検査したり、配信機能ログを表示したりできます。これらのログは、エンドユーザーへのキャンペーンの配信に問題があったかどうかを判断するのに役立ちます。<br><br>
3. **セグメントを作成する**<br>テストユーザーセグメントを作成するには、`internal_test_user` カスタム属性を `true` に設定してユーザーのセグメントを作成します。このセグメントは、キャンペーンの開始時に削除できます。 

## ステップ 2: テスト送信

次に、Braze ダッシュボードからテスト送信するか、Inbox Vision (メールのみ) を使用して、キャンペーンがまだ下書きモードのときにレイアウトがどのように表示されるかを確認できます。その後、キャンペーンをテストユーザーセグメントに送信して、期待どおりに動作することを確認できます。キャンペーンが API トリガー型かアクションベースかに関わらず、Postman を使用して 1 回限りのリクエストを Braze API に送信し、キャンペーンをトリガーします。 

## ステップ 3: Braze のログを使って受信結果を調べる

Braze のログを使用して、トリガー、送信、イベントの問題のトラブルシューティングを行います。
- [イベントユーザーログ](https://www.braze.com/docs/user_guide/administrative/app_settings/developer_console/event_user_log_tab/)には、API トリガーリクエストの未処理のペイロード、キャンペーンをトリガーしたカスタムイベント、および関連するトリガーまたはイベントプロパティが表示されます。
- [メッセージアクティビティログ](https://www.braze.com/docs/user_guide/administrative/app_settings/developer_console/message_activity_log_tab/)にはエラーが記録され、特定のメッセージが配信されなかった理由を理解するのに役立ちます。

## ステップ 4: テストセグメントを削除してキャンペーンを開始する

クリックしたすべてのリンクが登録された状態でメッセージがトリガーされ、正しく表示されるようになったら、セグメントを削除してキャンペーンを更新できます。テストユーザーのインプレッションがほとんどない状態で最初からキャンペーンを開始したい場合は、キャンペーンを複製してテストユーザーセグメントなしで再開することもできます。 
