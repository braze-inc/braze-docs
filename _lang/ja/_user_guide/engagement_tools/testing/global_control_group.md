---
nav_title: グローバルコントロールグループ
article_title: グローバルコントロールグループ
alias: /global_control_group/
page_order: 0

description: "この記事では、グローバルコントロールグループを設定して適切に使用する方法について説明します。また、これらのグループの使用によってもたらされるレポートとメトリックを表示する方法についても説明します。"
page_type: reference
tool: Reports
search_rank: 1

---

# グローバルコントロールグループ

> グローバルコントロールグループを使用して、キャンペーンやキャンバスを受け取らないユーザーの割合を指定することで、メッセージング活動の全体的な影響を経時的に分析できます。 

メッセージングを受信するユーザーと受信しないユーザーの行動を比較することで、マーケティングキャンペーンとキャンバスがセッションとカスタムイベントの増加にどのようにつながるかをさらに理解できます。

## グローバルコントロールグループの仕組み

グローバルコントロールグループでは、すべてのユーザーの割合をコントロールグループとして設定できます。保存すると、グループ内のユーザーはキャンペーンやキャンバスを受け取りません。 

{% alert important %}
グローバルコントロールグループは、[API キャンペーン]({{site.baseurl}}/api/api_campaigns)を除くすべてのチャネル、キャンペーン、キャンバスに適用されます。つまりコントロールグループのユーザーは、引き続き API キャンペーンを受け取ります。ただし、この例外はコンテンツカードには適用されません。API トリガーコンテンツカードキャンペーンを使用している場合、コントロールグループのユーザーはコンテンツカードを受け取りません。
{% endalert %}

### ユーザーをグローバルコントロールグループにランダムに割り当てる

Braze は、[ランダムなバケット番号]({{site.baseurl}}/user_guide/engagement_tools/campaigns/ideas_and_strategies/ab_testing_with_random_buckets/#step-1-segment-your-users-by-the-random-bucket-attribute)の複数の範囲をランダムに選択し、選択したバケットのユーザーを含めます。現在、他の目的でランダムバケット番号を使用している場合は、「[注意すべきこと](#things-to-watch-for)」を参照のこと。 

グローバルコントロールグループが生成されると、ランダムなバケット番号を持つすべてのユーザーがグループの一員となる。さらに、この時点以降に参加した新規ユーザー (グローバルコントロールグループの生成後に獲得したユーザー) のうち、これらのランダムバケット番号を持つユーザーも、グローバルコントロールグループに追加されます。同様に、多くのユーザーが削除された場合、削除されたユーザーの何割かがこのグループに属するため、グローバルコントロールグループのサイズは縮小すると予想できます。これにより、利用ベース全体に対するグループの規模が一定の割合で維持されます。

### レポートのために、ユーザーをトリートメントグループにランダムに割り当てます。

Braze では、アップリフトをレポートできるように、トリートメントグループも作成されます。トリートメントグループは、グローバルコントロールグループに属さないユーザーからランダムに選ばれたユーザーのグループで、グローバルコントロールグループと同じランダムバケット番号法を用いて生成されます。 

トリートメントグループのサイズはグローバルコントロールグループと同程度になるが、厳密に同じサイズになる可能性はそれほどありません。[レポート](#reporting)のために、Braze はコントロールグループのユーザーとトリートメントサンプルのユーザーの行動を測定します。各ワークスペースには、最大1つのグローバルコントロールグループと1つのトリートメントサンプルグループがあります。トリートメントサンプルグループは、グローバルコントロールレポートの設定方法に関係なく、同じユーザーグループです。

### フィーチャーフラグからユーザーを除外する

グローバルコントロールグループのユーザーに対して[フィーチャーフラグを]({{site.baseurl}}/user_guide/engagement_tools/canvas/canvas_components/feature_flags/)イネーブルメントにすることはできない。つまり、グローバルコントロールグループのユーザーもフィーチャーフラグの実験には参加できない。

### ユーザーをグローバルコントロールグループから除外する

グローバルコントロールグループから特定のユーザーs を削除することはできませんが、[除外設定s]({{site.baseurl}}/user_guide/engagement_tools/testing/global_control_group/#step-3-assign-exclusion-settings) を追加して、指定されたタグs **don't** のキャンペーンとキャンバスがグローバルコントロールグループを使用するようにすることができます。また、グローバルコントロールグループを無効にして再有効化し、メンバーシップをシャッフルすることもできます。シャッフルユーザーのアイデア時間は、実行中のテストの種類によって異なりますが、月に1 回までシャッフルすることをお勧めします。

## グローバルコントロールグループの作成

### ステップ1: グローバルコントロールグループ設定に移動します

ダッシュボードから、[**オーディエンス**] > [**グローバルコントロールグループ**] に移動します。

### ステップ2: このコントロールグループに全ユーザーの割合を割り当てる

コントロールグループの割合を入力し、[**保存**] を選択します。入力すると、Braze は、グローバルコントロール、トリートメント、およびトリートメントサンプルに分類されるユーザーの推定数を表示します。ワークスペースのユーザーが多ければ多いほど、この見積もりはより正確になることに注意してください。 

グローバルコントロールグループのユーザー数は、ワークスペースにユーザーが追加された場合に、この割合に比例するように、初期設定後に自動的に更新されます。さらに、グローバルコントロールグループの設定後に参加したユーザーで、ランダムなバケット番号を持っているユーザーも、グローバルコントロールグループに追加されます。多数のユーザーが追加されると、グローバルコントロールグループのサイズは、ユーザー群全体に対する割合を一定に保つために大きくなります。グローバルコントロールグループのサイズが大きくなっても、以前グループに所属していたユーザーはそのままグループに残る（グループを無効にして新しいグループを作成するなどの変更を加えない限り）。

割合のガイドラインについては、「[ベストプラクティスのセクション](#percentage-guidelines)」を参照してください。

\![オーディエンス設定を&quot に設定したグローバルコントロールグループ設定;すべてのユーザーの5% をグローバルコントロールグループ" に割り当てます。]({% image_buster /assets/img/control_group/control_group4.png %})

### ステップ 3: 除外設定を割り当てる

タグを使用して、グローバルコントロールグループに除外設定を追加します。除外設定に含まれるタグを使用するキャンペーンやキャンバスでは、グローバルコントロールグループは使用されません。これらのキャンペーンとキャンバスは、グローバルコントロールグループのユーザーを含む、ターゲットオーディエンスのすべてのユーザーに引き続き送信されます。

{% alert tip %}
すべてのユーザーに送信する必要があるトランザクションメッセージがある場合は、除外設定を追加できます。
{% endalert %}

\![グローバルコントロールグループの除外設定を追加または編集する項目。]({% image_buster /assets/img/control_group/control_group5.png %})

### ステップ 4: コントロールグループを保存する

この時点で、Braze はランダムに選択されたユーザーグループを生成し、ユーザー群全体の選択された割合を構成します。保存すると、除外設定のいずれかのタグを含むキャンペーンまたはキャンバスを除き、現在アクティブなキャンペーンと今後のキャンペーンおよびキャンバスはすべて、このグループのユーザーに送信されなくなります。

## グローバルコントロールグループに変更を加える

グローバルコントロールグループを無効にし、新しいグループを作成することによってのみ、グローバルコントロールグループに変更を加えることができる。例えば、オーディエンスの10%を占めるグローバルコントロールグループを設定し、そのサイズを5%に下げたい場合には、現在のグローバルコントロールグループを無効にし、新しいグローバルコントロールグループを再度イネーブルメントにする必要があります。 

グローバルコントロールグループは、[**グローバルコントロールグループ設定**] タブからいつでも無効にできますが、無効にすると、このグループのユーザーはすぐにキャンペーンとキャンバスの対象になることに注意してください。

コントロールグループを無効にする前に、後で参照する必要がある場合に備えて、そのグループ内のユーザーの CSV を[エクスポートする](#export-group-members)ことをお勧めします。コントロールグループを無効にすると、Braze がグループを復元したり、このグループに属していたユーザーを特定したりすることはできません。

コントロールグループを無効にした後、新しいコントロールグループを保存できます。割合を入力して保存すると、Braze はランダムに選択された新しいユーザーグループを生成します。以前と同じ割合を入力しても、Braze はコントロールグループとトリートメントグループに対して新しいユーザーグループを生成します。

\![&quot (グローバルメッセージング設定&クォート) のダイアログボックス。グローバルコントロールグループが無効になると、新しいまたは有効なキャンペーンまたはキャンバスから除外されなくなることを警告するテキストが表示されます。]({% image_buster /assets/img/control_group/control_group2.png %}){: style="max-width:60%" }

## コントロールグループメンバーをエクスポートする {#export-group-members}

グローバルコントロールグループのユーザーを確認したい場合は、CSVまたはAPIでグループのメンバーをエクスポートできる。 

CSV エクスポートを実行するには、[**グローバルコントロールグループ設定**] タブに移動し、[<i class="fas fa-download"></i>**エクスポート**] をクリックします。API 経由でエクスポートするには、[エンドポイント`/users/export/global_control_group`]({{site.baseurl}}/api/endpoints/export/user_data/post_users_global_control_group/)を使用します。

{% alert important %}
履歴コントロールグループは保持されないため、エクスポートできるのは現在のグループのメンバーのみです。コントロールグループを無効にする前に、必要な情報をエクスポートしてください。
{% endalert %}

## ユーザーがグローバルコントロールグループに属しているかどうかを表示する。

グローバルコントロールグループのメンバーシップは、個別のユーザープロファイルの [**エンゲージメント**] タブにある [**その他**] セクションで確認できます。

\![A " Miscellaneous" ユーザーの乱数バケット番号が6356 であり、グローバルコントロールグループにないことを示すセクションレポート。]({% image_buster /assets/img/control_group/control_group1.png %}){: style="max-width:50%;"}

## レポート

レポートメトリックについては、「[グローバルコントロールグループのレポート]({{site.baseurl}}/user_guide/analytics/reporting/global_control_group_reporting/)」を参照してください。

## トラブルシューティング

グローバルコントロールグループを設定し、レポートを表示すると、次のようなエラーが発生する可能性があります。

| 問題 | トラブルシューティング |
| --- | --- |
| グローバルコントロールグループの指定時に入力したパーセンテージeを保存できません。 | この問題は、整数以外または1 ～ 15 (両端を含む) 以外の整数を入力した場合に発生します。 |
| 「Braze はグローバルコントロールグループを更新できません」というエラーがグローバルコントロール設定ページに表示される。 | これは、通常、このページの一部のコンポーネントが変更されたことを示します。これは、おそらく、Brazeのアカウント上の別のユーザーによるアクションが原因です。この場合は、ページを更新して再試行してください。 |
| グローバルコントロールグループレポートにはデータがありません。 | グローバルコントロールグループを保存せずにグローバルコントロールグループレポートにアクセスすると、レポートにデータが表示されません。グローバルコントロールグループを作成して保存し、再試行します。 |
| コンバージョン率が0%であるか、または、発生している事象が0を超えているにもかかわらずグラフディスプレイが表示されていない。 | コンバージョン数が非常に小さく、コントロールグループまたはトリートメントグループが非常に大きい場合、コンバージョン率が 0% に丸められ、グラフに表示されないことがあります。これを確認するには、「イベント数の合計」指標を確認します。インクリメンタルアップリフトパーセントメトリックを使用して、2 つのグループの有効性を比較できます。  |
| データの表示期間によって、コンバージョン率 (または他の測定指標) が劇的に変化している。 | 短期間のデータを表示している場合、指標が日ごとまたは週ごとに変動する可能性があります。少なくとも 1 か月間の指標を表示することをお勧めします。 |
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

### 注意すべき点 {#things-to-watch-for}

#### ランダムなバケット番号の重複

グローバルコントロールグループはランダムバケット番号を使用して形成されるため、ランダムバケット番号セグメントフィルターを使用して他のテストを実行している場合は、作成したセグメントとグローバルコントロールグループユーザーの間に重複がある可能性があることに注意してください。

#### メールアドレスが重複している

異なる外部ユーザー ID を持つ2人のユーザーが同じメールアドレスを持ち、これらのユーザーの1人がコントロールグループに属していて、もう1人がそうでない場合、非コントロールグループユーザーがメールの対象となる場合には常に、そのメールアドレスにメールが送信されます。この場合、両方のユーザープロファイルが、そのメールを含むキャンペーンまたはキャンバスを受信したとマークされます。

#### グローバルコントロールグループおよびメッセージ固有のコントロールグループ

グローバルコントロールグループを持つことも、キャンペーン固有またはキャンバス固有のコントロールグループを使用することもできます。キャンペーン固有またはキャンバス固有のコントロールグループを持つことで、特定のメッセージの影響を測定できます。

グローバルコントロールグループのユーザーは、タグ例外のあるメッセージ以外のメッセージの受信を保留され、キャンペーンまたはキャンバスにコントロールを追加すると、Braze はグローバルトリートメントグループの一部がその特定のキャンペーンまたはキャンバスを受信することを保留します。つまり、グローバルコントロールグループのメンバーが特定のキャンペーンまたはキャンバスを受け取る資格がない場合、その特定のキャンペーンまたはキャンバスのコントロールグループにも存在しません。

> つまり、グローバルコントロールグループのユーザーは、エントリの前にキャンペーンまたはキャンバスオーディエンスから除外されます。キャンペーンまたはキャンバスに入力したユーザーのうち、そのうちの一定割合がコントロールバリアントに割り当てられます。

#### 開発者コンソールのグローバルコントロールグループセグメント

[[API キー]({{site.baseurl}}/user_guide/administrative/app_settings/api_settings_tab/)] ページの [**追加の API 識別子**] セクションに複数の**グローバルコントロール**セグメントが表示される場合があります。これは、グローバルコントロールグループが有効または無効になるたびに、新しいグローバルコントロールグループが形成されるためです。これにより、「グローバルコントロールグループ」というラベルの付いた複数のセグメントが作成されます。

これらのセグメントの1つだけがアクティブであり、[`/users/export/global_control_group`エンドポイント]({{site.baseurl}}/api/endpoints/export/user_data/post_users_global_control_group/)を使用してクエリを実行したり、ダッシュボードからエクスポートしたりできます。ダッシュボードからのエクスポートでは、このグローバルコントロールグループを構成するサブセグメントが明確に示されます。

## テストのベストプラクティス

### 最適なコントロールグループのサイズ {#percentage-guidelines}

覚えておくべき2つの主なルールは次のとおりです\*\*。
1. コントロールグループは1000ユーザー以上である必要があります。
2. コントロールグループは、オーディエンス全体の10%以下にする必要があります。

オーディエンスの合計が10,000人未満の場合は、割合を増やして1,000人を超えるユーザーのグループを作成する必要があります。この場合、割合を15%より大きくしないでください。ワークスペース全体のサイズが小さいほど、統計的に厳密なテストを実行するのが難しくなることに注意してください。

- コントロールグループのサイズを考える際に考慮すべきトレードオフは、作成された行動分析が信頼できるものとなるように、コントロールグループにかなりの数の顧客が必要であることです。ただし、コントロールグループが大きければ大きいほど、キャンペーンを取得する顧客が少なくなります。これはキャンペーンを使用してエンゲージメントとコンバージョンを促進している場合にはデメリットとなります。
- オーディエンス全体に対する理想的な割合は、オーディエンス全体の規模によって異なります。オーディエンスの総数が多ければ多いほど、割合は小さくなります。ただし、オーディエンスが少ない場合は、コントロールグループの割合を大きくする必要があります。

### 実験期間 

#### 理想的な期間を選択する {#reshuffle}

コントロールグループのメンバーシップを再シャッフルするまでにテストを実施する期間は、テストする内容とユーザーのベースライン行動によって異なります。よくわからない場合は、1四半期 (3か月) から始めるのが良いでしょうが、1か月未満にしないでください。

実験の適切な時間を決定するには、どのような質問に答えたいかを検討します。たとえば、セッションに違いがあるかどうかを確認していますか?その場合は、ユーザーがどのくらいの頻度でセッションを組織的に行うかを考えてください。ユーザーが毎日セッションを行うブランドは、ユーザーが月に数回しかセッションを行わないブランドよりも短いテストを実施できます。 

また、カスタムイベントに関心がある可能性があるため、ユーザーがそのカスタムイベントをトリガーする頻度が低い場合には、この実験は、セッションを調べる実験よりも長く実行する必要がある可能性があります。

{% alert tip %}
同じコントロールグループを長く保持すればするほど、トリートメントグループから乖離し、バイアスが生じる可能性があります。グローバルコントロールグループをリセットすると、母集団のバランスが再調整されます。
{% endalert %}

#### 実験の早期終了の制限を試みる

実験を開始する前に実験を実行する時間を決定する必要があります。この事前に決定されたポイントに到達した後で、実験を終了し、最終的な結果を収集する必要があります。実験を早く終わらせたり、有望なデータを見つけたりすると、バイアスが入ってしまいます。

#### 価値ある指標について考える

最も関心のあるメトリックのベースライン動作を検討します。年単位でのみ更新されるサブスクリプションプランの購入料金に関心がありますか?または、顧客は測定したいイベントについて毎週の習慣がありますか?ユーザーがメッセージングによって行動を変える可能性が生じるまでにどのくらいの時間がかかるかを考えてみてください。テストの実行期間を決定したら、テストを早期に終了したり、最終結果を記録したりしないようにしてください。結果にバイアスがかかる可能性があります。

