---
nav_title: グローバルコントロールグループ
article_title: グローバルコントロールグループ
alias: /global_control_group/
page_order: 0

description: "この記事では、グローバルコントロールグループを設定して適切に使用する方法について説明します。また、これらのグループの使用によってもたらされるレポートとメトリックを表示する方法についても説明します。"
page_type: reference
tool: Reports
search_rank: 1

---

# グローバルコントロールグループ

> グローバルコントロールグループを使用して、キャンペーンやキャンバスを受け取らないユーザーの割合を指定することで、メッセージング活動の全体的な影響を経時的に分析できます。 

メッセージングを受信するユーザーと受信しないユーザーの行動を比較することで、マーケティングキャンペーンとキャンバスがセッションとカスタムイベントの増加にどのようにつながるかをさらに理解できます。

## グローバルコントロールグループの仕組み

グローバルコントロールグループでは、すべてのユーザーの割合をコントロールグループとして設定できます。保存すると、グループ内のユーザーはキャンペーンやキャンバスを受け取りません。 

グローバルコントロールグループは、[API キャンペーン]({{site.baseurl}}/api/api_campaigns#api-campaigns)とニュースフィードカード(廃止予定) を除くすべてのチャネル、キャンペーン、キャンバスに適用されます。コントロールグループの利用者は、引き続き API キャンペーンとニュースフィードカードを受け取ります。この例外はコンテンツカードには適用されず、コンテンツカードを使用している場合、コントロールグループのユーザーはコンテンツカードを受け取りません。

### ユーザーをグローバルコントロールグループにランダムに割り当てる

Braze は、[ランダムなバケット番号]({{site.baseurl}}/user_guide/engagement_tools/campaigns/ideas_and_strategies/ab_testing_with_random_buckets/#step-1-segment-your-users-by-the-random-bucket-attribute)の複数の範囲をランダムに選択し、選択したバケットのユーザーを含めます。現在、ランダムバケット番号を他の目的で使用している場合は、「[注意すべき点](#things-to-watch-for)」を確認してください。 

### レポート用のデータ追跡

Braze は、コントロールグループのユーザーとトリートメントサンプルのユーザーの行動を測定します。トリートメントサンプルは、コントロールグループに含まれていないユーザーをランダムに選択したものであり、同じランダムバケット番号メソッドを使用して生成されます。

## グローバルコントロールグループの作成

### ステップ1: グローバルコントロールグループ設定に移動します

ダッシュボードから、[**オーディエンス**] > [**グローバルコントロールグループ**] に移動します。

{% alert note %}
[古いナビゲーション]({{site.baseurl}}/navigation)を使用している場合、このページは [**エンゲージメント**] > [**グローバルメッセージ設定**] > [**グローバルコントロールグループ設定**] の下にあります。
{% endalert %}

### ステップ2: このコントロールグループに全ユーザーの割合を割り当てる

コントロールグループの割合を入力し、[**保存**] をクリックします。入力すると、Braze は、グローバルコントロール、トリートメント、およびトリートメントサンプルに分類されるユーザーの推定数を表示します。ワークスペースのユーザーが多ければ多いほど、この見積もりはより正確になることに注意してください。 

グローバルコントロールグループのユーザー数は、ワークスペースにユーザーが追加された場合に、このオーディエンスの割合に比例するように、初期設定後に自動的に更新されます。たとえば、ワークスペースのユーザー数が増えると、グローバルコントロールグループのユーザー数も増加し、コントロールグループはワークスペースのオーディエンスの一定の割合を維持します。割合のガイドラインについては、次の「[ベストプラクティスのセクション](#percentage-guidelines)」を参照してください。

![オーディエンス設定が「すべてのユーザーの5%をグローバルコントロールグループに割り当てる」に設定されたグローバルコントロールグループ設定。][4]

### ステップ3: 除外設定を割り当てる

タグを使用して、グローバルコントロールグループに除外設定を追加します。除外設定に含まれるタグを使用するキャンペーンやキャンバスでは、グローバルコントロールグループは使用されません。これらのキャンペーンとキャンバスは、グローバルコントロールグループのユーザーを含む、ターゲットオーディエンスのすべてのユーザーに引き続き送信されます。

{% alert tip %}
すべてのユーザーに送信する必要があるトランザクションメッセージがある場合は、除外設定を追加できます。
{% endalert %}

![グローバルコントロールグループに除外設定を追加するオプション。][5]

### ステップ 4: コントロールグループを保存する

この時点で、Braze はランダムに選択されたユーザーグループを生成し、ユーザー群全体の選択された割合を構成します。保存すると、除外設定のいずれかのタグを含むキャンペーンまたはキャンバスを除き、現在アクティブなキャンペーンと今後のキャンペーンおよびキャンバスはすべて、このグループのユーザーに送信されなくなります。

## グローバルコントロールグループの無効化

グローバルコントロールグループは、[**グローバルコントロールグループ設定**] タブからいつでも無効にできますが、無効にすると、このグループのユーザーはすぐにキャンペーンとキャンバスの対象になることに注意してください。

コントロールグループを無効にする前に、後で参照する必要がある場合に備えて、そのグループ内のユーザーの CSV を[エクスポートする](#export-group-members)ことをお勧めします。コントロールグループを無効にすると、Braze がグループを復元したり、このグループに属していたユーザーを特定したりすることはできません。

コントロールグループを無効にした後、新しいコントロールグループを保存できます。割合を入力して保存すると、Braze はランダムに選択された新しいユーザーグループを生成します。以前と同じ割合を入力しても、Braze はコントロールグループとトリートメントグループに対して新しいユーザーグループを生成します。

![「グローバルメッセージング設定を変更しています」というタイトルのダイアログボックスに、次のテキストが表示されます。「グローバルコントロールグループを無効にすると、新規または現在アクティブなキャンペーンやキャンバスから除外されなくなります。このグループ内のユーザーはすぐにメッセージを受信できるようになります。続行してもよろしいですか?」2つのボタン [キャンセル] と [続行]。][2]{: style="max-width:50%" }

## コントロールグループメンバーをエクスポートする {#export-group-members}

グローバルコントロールグループに属するユーザーを確認するには、CSV または API を使用してグループのメンバーをエクスポートします。 

CSV エクスポートを実行するには、[**グローバルコントロールグループ設定**] タブに移動し、[<i class="fas fa-download"></i>**エクスポート**] をクリックします。API 経由でエクスポートするには、[`/users/export/global_control_group`　エンドポイント]({{site.baseurl}}/api/endpoints/export/user_data/post_users_global_control_group/)を使用します。

{% alert important %}
履歴コントロールグループは保持されないため、エクスポートできるのは現在のグループのメンバーのみです。コントロールグループを無効にする前に、必要な情報をエクスポートしてください。
{% endalert %}

## レポート

レポートメトリックについては、「[グローバルコントロールグループのレポート]({{site.baseurl}}/user_guide/data_and_analytics/reporting/global_control_group_reporting/)」を参照してください。

## トラブルシューティング

グローバルコントロールグループを設定し、レポートを表示すると、次のようなエラーが発生する可能性があります。

| 問題 | トラブルシューティング |
| --- | --- |
|グローバルコントロールグループを指定するときに入力した割合を保存できません。|この問題は、整数以外の値、または1から15まで (1と15を含む) 以外の整数を入力した場合に発生します。|
|「Braze はグローバルコントロールグループを更新できません。」というエラーがグローバルコントロール設定ページに表示されます。 | これは通常、このページの一部のコンポーネントが変更されたことを示していますが、これはおそらく Braze アカウントで別のユーザーが行ったアクションが原因です。この場合は、ページを更新して再試行してください。|
|グローバルコントロールグループレポートにはデータがありません。|グローバルコントロールグループを保存せずにグローバルコントロールグループレポートにアクセスすると、レポートにデータは表示されません。グローバルコントロールグループを作成して保存し、再試行してください。|
|0件を上回るイベントが発生しているのにもかかわらず、コンバージョン率が0%か、グラフが表示されません。|コンバージョン数が非常に少なく、コントロールグループまたはトリートメントグループが非常に大きい場合、コンバージョン率は0%に四捨五入され、グラフに表示されないことがあります。これを確認するには、「イベント数の合計」指標を確認します。2つのグループの有効性は、増分上昇率指標を使用して比較できます。 |
|コンバージョン率 (またはその他の指標) は、データを表示する期間によって大きく変化します。|短期間のデータを表示している場合、指標が日ごとまたは週ごとに変動する可能性があります。少なくとも1か月間の指標を表示することをお勧めします。|
{: .reset-td-br-1 .reset-td-br-2}

### 注意すべき点 {#things-to-watch-for}

#### ランダムなバケット番号の重複

グローバルコントロールグループはランダムバケット番号を使用して形成されるため、ランダムバケット番号セグメントフィルターを使用して他のテストを実行している場合は、作成したセグメントとグローバルコントロールグループユーザーの間に重複がある可能性があることに注意してください。

#### メールアドレスが重複している

異なる外部ユーザー ID を持つ2人のユーザーが同じメールアドレスを持ち、これらのユーザーの1人がコントロールグループに属していて、もう1人がそうでない場合、非コントロールグループユーザーがメールの対象となる場合には常に、そのメールアドレスにメールが送信されます。この場合、両方のユーザープロファイルが、そのメールを含むキャンペーンまたはキャンバスを受信したとマークされます。

#### グローバルコントロールグループおよびメッセージ固有のコントロールグループ

グローバルコントロールグループを持つことも、キャンペーン固有またはキャンバス固有のコントロールグループを使用することもできます。キャンペーン固有またはキャンバス固有のコントロールグループを持つことで、特定のメッセージの影響を測定できます。

グローバルコントロールグループのユーザーは、タグ例外のあるメッセージ以外のメッセージの受信を保留され、キャンペーンまたはキャンバスにコントロールを追加すると、Braze はグローバルトリートメントグループの一部がその特定のキャンペーンまたはキャンバスを受信することを保留します。つまり、グローバルコントロールグループのメンバーが特定のキャンペーンまたはキャンバスを受け取る資格がない場合、その特定のキャンペーンまたはキャンバスのコントロールグループにも存在しません。

> つまり、グローバルコントロールグループのユーザーは、エントリの前にキャンペーンまたはキャンバスオーディエンスから除外されます。キャンペーンまたはキャンバスに入力したユーザーのうち、そのうちの一定割合がコントロールバリアントに割り当てられます。

#### 開発者コンソールのグローバルコントロールグループセグメント

[[API キー]({{site.baseurl}}/user_guide/administrative/app_settings/api_settings_tab/)] ページの [**追加の API 識別子**] セクションに複数の**グローバルコントロール**セグメントが表示される場合があります。これは、グローバルコントロールグループが有効または無効になるたびに、新しいグローバルコントロールグループが形成されるためです。これにより、「グローバルコントロールグループ」というラベルの付いた複数のセグメントが作成されます。

これらのセグメントの1つだけがアクティブであり、[`/users/export/global_control_group`エンドポイント]({{site.baseurl}}/api/endpoints/export/user_data/post_users_global_control_group/)を使用してクエリを実行したり、ダッシュボードからエクスポートしたりできます。ダッシュボードからのエクスポートでは、このグローバルコントロールグループを構成するサブセグメントが明確に示されます。

## テストのベストプラクティス

### 最適なコントロールグループのサイズ {#percentage-guidelines}

覚えておくべき2つの主なルールは次のとおりです\*\*。
1\.コントロールグループは1000ユーザー以上である必要があります。
2\.コントロールグループは、オーディエンス全体の10%以下にする必要があります。

オーディエンスの合計が10,000人未満の場合は、割合を増やして1,000人を超えるユーザーのグループを作成する必要があります。この場合、割合を15%より大きくしないでください。ワークスペース全体のサイズが小さいほど、統計的に厳密なテストを実行するのが難しくなることに注意してください。

- コントロールグループのサイズを考える際に考慮すべきトレードオフは、作成された行動分析が信頼できるものとなるように、コントロールグループにかなりの数の顧客が必要であることです。ただし、コントロールグループが大きければ大きいほど、キャンペーンを取得する顧客が少なくなります。これはキャンペーンを使用してエンゲージメントとコンバージョンを促進している場合にはデメリットとなります。
- オーディエンス全体に対する理想的な割合は、オーディエンス全体の規模によって異なります。オーディエンスの総数が多ければ多いほど、割合は小さくなります。ただし、オーディエンスが少ない場合は、コントロールグループの割合を大きくする必要があります。

### 実験期間 

#### 理想的な期間を選択する {#reshuffle}

コントロールグループのメンバーシップを再シャッフルするまでにテストを実施する期間は、テストする内容とユーザーのベースライン行動によって異なります。よくわからない場合は、1四半期 (3か月) から始めるのが良いでしょうが、1か月未満にしないでください。

実験の適切な時間を決定するには、どのような質問に答えたいかを検討します。たとえば、セッションに違いがあるかどうかを確認していますか?その場合は、ユーザーがどのくらいの頻度でセッションを組織的に行うかを考えてください。ユーザーが毎日セッションを行うブランドは、ユーザーが月に数回しかセッションを行わないブランドよりも短いテストを実施できます。 

また、購入行動に関心がある可能性があり、ユーザーの購入頻度が低い可能性が高いため、セッションを調べる実験よりも実験を長く実行する必要がある可能性が高くなります。

{% alert tip %}
同じコントロールグループを長く保持すればするほど、トリートメントグループから乖離し、バイアスが生じる可能性があります。グローバルコントロールグループをリセットすると、母集団のバランスが再調整されます。
{% endalert %}

#### 実験の早期終了の制限を試みる

実験を開始する前に実験を実行する時間を決定する必要があります。この事前に決定されたポイントに到達した後で、実験を終了し、最終的な結果を収集する必要があります。実験を早く終わらせたり、有望なデータを見つけたりすると、バイアスが入ってしまいます。

#### 価値ある指標について考える

最も関心のあるメトリックのベースライン動作を検討します。年単位でのみ更新されるサブスクリプションプランの購入料金に関心がありますか?または、顧客は測定したいイベントについて毎週の習慣がありますか?ユーザーがメッセージングによって行動を変える可能性が生じるまでにどのくらいの時間がかかるかを考えてみてください。テストの実行期間を決定したら、テストを早期に終了したり、最終結果を記録したりしないようにしてください。結果にバイアスがかかる可能性があります。

[2]: {% image_buster /assets/img/control_group/control_group2.png %}
[4]: {% image_buster /assets/img/control_group/control_group4.png %}
[5]: {% image_buster /assets/img/control_group/control_group5.png %}
[6]: {% image_buster /assets/img/control_group/control_group6.png %}
