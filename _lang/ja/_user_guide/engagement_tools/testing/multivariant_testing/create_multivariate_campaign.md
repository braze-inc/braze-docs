---
nav_title: テストの作成
article_title: 多変量テストと AB テストの作成
page_order: 1
page_type: reference
description: "この記事では、Braze で多変量テストと AB テストを作成する方法について説明します。"

local_redirect: #optimizations
  optimizations: '/docs/user_guide/engagement_tools/testing/multivariant_testing/optimizations/'
---

# 多変量テストと AB テストの作成 {#creating-tests}

> [多変量テストや AB テスト]({{site.baseurl}}/user_guide/engagement_tools/testing/multivariant_testing/)は、単一チャネルをターゲットとするキャンペーンならどれでも作成できます。

![][2]{: style="max-width:25%;float:right;margin-left:15px;" }

## ステップ 1: キャンペーンを作成

[**キャンペーンを作成**] をクリックし、多変量テストと AB テストを許可するセクションからキャンペーンのチャネルを選択します。各メッセージングチャネルの詳細なドキュメントについては、「[キャンペーンの作成]({{site.baseurl}}/user_guide/engagement_tools/campaigns/building_campaigns/creating_campaign/)」を参照してください。

## ステップ 2: バリアントを作成

タイトル、コンテンツ、画像などを区別して、メッセージのバリアントを最大8つ作成できます。メッセージ間の違いの数によって、これが多変量であるか、A/B test. An A/B test examines the effect of changing one variable, whereas a multivariate test examines two or more. であるかが決まります。

バリアントの区別を始めるためのアイデアについては、「[さまざまなチャネル向けのヒント](#tips-different-channels)」を参照してください。

![][3]

## ステップ 3: キャンペーンをスケジュールする

多変量キャンペーンのスケジュール設定は、他の Braze キャンペーンのスケジュール設定と同じように機能します。すべての標準 [配送タイプ][4] が利用可能です。

{% alert important %}
[最適化機能]({{site.baseurl}}/user_guide/engagement_tools/testing/multivariant_testing/optimizations/) (一部のチャンネルで利用可能) を使用する場合は、キャンペーンを一度だけ配信するようにスケジュールしてください。繰り返し行われるキャンペーンや再適格性が有効になっているキャンペーンでは、最適化は利用できません。
{% endalert %}

## ステップ 4: セグメントを選択し、さまざまなバリアントにユーザーを分配する

ターゲットとするセグメントを選択し、そのメンバーを選択したバリアントとオプションの[コントロールグループ](#including-a-control-group)に分配します。テストするセグメントの選択に関するベストプラクティスについては、「[セグメントの選択](#choosing-a-segment)」を参照してください。

プッシュキャンペーン、メールキャンペーン、Webhook キャンペーンを1回送信するようにスケジュールしている場合は、[最適化]({{site.baseurl}}/user_guide/engagement_tools/testing/multivariant_testing/optimizations/)を使用することもできます。これにより、ターゲットオーディエンスの一部を AB テストから確保し、最初のテスト結果に基づいて最適化された2回目の送信のために保持します。

### コントロールグループ {#including-a-control-group}

ターゲットオーディエンスの特定の割合をランダム化されたコントロールグループのために予約できます。コントロールグループのユーザーはテストを受けませんが、Braze はキャンペーン期間中のコンバージョン率を監視します。

結果を表示すると、バリアントのコンバージョン率をコントロールグループから提供されたベースラインコンバージョン率と比較できます。これにより、バリアントの効果と、メッセージをまったく送信しなかった場合に発生するコンバージョン率に対するバリアントの効果の両方を比較できます。

![コントロールグループ、バリアント1、バリアント2、バリアント3の割合の内訳を示す AB テストパネル (各グループ25%)][5]

{% alert important %}
開封数またはクリック数で勝者を決定するときにコントロールグループを使用することはお勧めしません。コントロールグループはメッセージを受信しないため、これらのユーザーは開封したりクリックしたりすることはできません。したがって、そのグループのコンバージョン率は定義上0% であり、バリアントとの有意義な比較にはなりません。
{% endalert %}

#### インテリジェントセレクションを使用するコントロールグループ

[インテリジェントセレクション][1]を使用するキャンペーンのコントロールグループのサイズは、バリアントの数に基づいています。各バリアントが20% を超えるユーザーに送信された場合、コントロールグループは20% になり、バリアントは残りの80% に均等に分割されます。ただし、十分な数のバリアントがあり、各バリアントがユーザーの20% 未満に送信される場合は、コントロールグループを小さくする必要があります。インテリジェントセレクションがテストのパフォーマンスの分析を開始すると、その結果に基づいてコントロールグループが拡大または縮小します。

## ステップ5: コンバージョンイベントの指定 (オプション)

キャンペーンにコンバージョンイベントを設定すると、キャンペーンを受信した後に特定のアクションを実行した受信者の数を確認できます。

これは、前のステップで [**1次コンバージョン率**] を選択した場合にのみテストに影響します。詳しくは、「[コンバージョンイベント]({{site.baseurl}}/user_guide/engagement_tools/campaigns/building_campaigns/conversion_events/)」を参照してください。 

## ステップ6: レビューと開始

確認ページで、多変量キャンペーンの詳細を確認して、テストを開始してください。次に、[テスト結果を理解する]({{site.baseurl}}/user_guide/engagement_tools/testing/multivariant_testing/multivariate_analytics/)方法を学びます。

## 知っておくべきこと

{% alert important %}
テスト終了後にメッセージを編集すると、テスト結果が無効になります。
{% endalert %}

### さまざまなチャンネル向けのヒント {#tips-different-channels}

選択したチャンネルに応じて、メッセージのさまざまなコンポーネントをテストできます。何をテストしたいのか、何を証明したいのかを考えてバリアントを作成してみてください。

どのような手段を講じる必要があり、どのような効果が期待できますか。多変量テストと AB テストを使用して調査できる可能性は無数にありますが、始めるための提案をいくつかご紹介します。

| チャンネル | 変更できるメッセージの側面 | 確認すべき結果 |
| ---------------------| --------------- | ------------- |
| プッシュ | コピー <br> 画像と絵文字の使い方 <br> ディープリンク  <br> 数値の表示 (たとえば、「3倍」と「200％増加」)  <br> 時間の表示（たとえば、「午前0時に終了」と「6時間後に終了」）| 開封する  <br> コンバージョン率 |
| メール | 件名 <br> 表示名 <br> あいさつ <br> 本文のコピー <br> 画像と絵文字の使い方 <br> 数値の表示 (たとえば、「3倍」と「200％増加」) <br> 時間の表示（たとえば、「午前0時に終了」と「6時間後に終了」）| 開封する  <br> コンバージョン率 |
| アプリ内メッセージ |「プッシュ」にリストされている側面 <br> [メッセージ形式][7] | クリック <br> コンバージョン率 |
{: .reset-td-br-1 .reset-td-br-2 .reset-td-br-3}

{% alert tip %}
AB テストを実施する際は、各バリアントがコンバージョンファネルにどのような影響を与えたかを把握できる[ファネルレポート]({{site.baseurl}}/user_guide/data_and_analytics/reporting/funnel_reports/)を生成することを忘れないでください。特に、ビジネスの「コンバージョン」に複数のステップやアクションが必要である場合は特にそうです。
{% endalert %}

さらに、テストの理想的な長さもチャネルによって異なる場合があります。ほとんどのユーザーが各チャネルと関わるのに要する平均時間を覚えておいてください。

たとえば、プッシュをテストする場合、ユーザーにはプッシュがすぐに表示されるため、メールをテストする場合よりも早く大きな結果が得られる可能性がありますが、メールが表示または開封されるまでには数日かかる場合があります。アプリ内ッセージをテストする場合、ユーザーはキャンペーンを見るにはアプリを開かなければならないことを覚えておいてください。そのため、最もアクティブなアプリを開くユーザーと一般的なユーザーの両方から結果を収集するには、より長く待機する必要があります。

テストの実行時間がわからない場合は、[インテリジェントセレクション][6] 機能が勝者バリアントを効率的に見つけるのに役立ちます。

### セグメントを選択する {#choosing-a-segment}

ユーザーのセグメントが異なれば、メッセージングに対する反応も異なる場合があるため、特定のメッセージが成功したかどうかは、メッセージ自体とそのターゲットセグメントの両方に何らかの影響を及ぼします。そのため、ターゲットセグメントを念頭に置いてテストを設計するようにしてください。

例えば、アクティブユーザーは「このセールは明日までです!」と「このセールは24時間で終了します! 」に対して同じ応答率を示すかもしれませんが、アプリを1週間開いていないユーザーは、後者の表現の方が切迫感が高まるため、より反応する可能性があります。

さらに、テストを実行するセグメントを選択するときは、そのセグメントのサイズがテストに十分な大きさであるかどうかを必ず検討してください。一般に、多変量テストと AB テストでバリアントの数が多い場合、統計的に有意な結果を得るには、より多くのテストグループが必要になります。これは、バリアントが多いほど、個々のバリアントを見るユーザーが少なくなるためです。

{% alert tip %}
目安として、テスト結果の95% の信頼性を達成するには、バリアント (コントロールを含む) あたり約15,000人のユーザーが必要になる可能性があります。ただし、特定の状況に応じて、必要な正確なユーザー数がこれよりも多くなる場合も少なくなる場合もあります。バリアントのサンプルサイズに関するより正確なガイダンスについては、[Optimizely のサンプルサイズ計算ツール](https://www.optimizely.com/resources/sample-size-calculator/)を参照することを検討してください。
{% endalert %}

### バイアスとランダム化

コントロールグループとテストグループの割り当てに関するよくある質問は、テストにバイアスをもたらす可能性があるかどうかというものです。他の人は、これらの割り当てが本当にランダムかどうかをどうやって知るのか疑問に思うことがあります。

ユーザーは、メッセージバリアント、キャンバスバリアント、またはそれぞれのコントロールグループに割り当てられます。そのためには、(ランダムに生成された) ユーザー ID を (ランダムに生成された) キャンペーン ID またはキャンバス ID と連結し、その値のモジュラスを100とし、次にダッシュボードで選択されたバリアントとオプションコントロールのパーセンテージ割り当てに対応するスライスにユーザーを並べ替えます。そのため、特定のキャンペーンやキャンバスを作成する前のユーザーの行動が、バリアントとコントロールの間で体系的に異なることは実際にはありません。また、この実装よりもランダム (より正確には疑似ランダム) にすることは現実的ではありません。

#### 避けるべき間違い

オーディエンスが正しくフィルタリングされていない場合に、メッセージングチャネルに基づいて相違が発生しないようにするための一般的な間違いがいくつかあります。

たとえば、コントロールを使用して幅広いオーディエンスにプッシュメッセージを送信した場合、テストグループはプッシュトークンを持つユーザーにのみメッセージを送信します。ただし、コントロールグループには、プッシュトークンを持っているユーザーと持っていないユーザーの両方が含まれます。この場合、キャンペーンまたはキャンバスの最初のオーディエンスは、プッシュトークンの有無 (`Push Enabled` は `true`) をフィルタリングする必要があります。他のチャネルでメッセージを受信する資格を得るには、同じことを行う必要があります (オプトイン済み、プッシュトークンあり、サブスクライブ済みなど）。

{% alert note %}
コントロールグループにランダムなバケット番号を手動で使用する場合は、コントロールグループで[注意すべき点]({{site.baseurl}}/user_guide/engagement_tools/testing/global_control_group/#things-to-watch-for)のリストを参照してください。
{% endalert %}

[1]: {{site.baseurl}}/user_guide/sage_ai/intelligence/intelligent_selection/
[2]: {% image_buster /assets/img/ab_create_1.png %}
[3]: {% image_buster /assets/img/ab_create_2.png %}
[4]: {{site.baseurl}}/user_guide/engagement_tools/campaigns/scheduling_and_organizing/delivery_types/
[5]: {% image_buster /assets/img/ab_create_4.png %}
[6]: {{site.baseurl}}/user_guide/sage_ai/intelligence/intelligent_selection/
[7]: {{site.baseurl}}/user_guide/message_building_by_channel/push/best_practices/message_format/
