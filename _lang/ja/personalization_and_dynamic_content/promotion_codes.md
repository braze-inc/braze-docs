---
nav_title: プロモーションコード
article_title: プロモーション・コード
page_order: 5
toc_headers: h2
alias: "/promotion_codes/"
description: "この参考記事では、プロモーションコード・リストを作成し、キャンペーンやキャンバスに追加する方法について説明する。"
---

# プロモーションコード

> このページでは、プロモーションコードリストを作成し、キャンペーンおよびキャンバスに追加する方法について説明します。

## プロモーションコードについて

プロモーションコード（プロモコードとも呼ばれる）は、購入に重点を置いたエンゲージメントを促進することで、ユーザーを引き留める素晴らしい方法である。プロモーションコードのリストからプルするメッセージを作成できます。 

各プロモーションコードには最長6ヶ月の有効期限がある。1つのリストにつき最大2000万個のコードを保存および管理できます。プロモーションコードのパフォーマンスを管理し、分析することで、プロモーション戦略やメッセージングのターゲットを決定できます。

{% alert important %}
プロモーションコードは、キャンバスのアプリ内メッセージでは送信できません。
{% endalert %}

## プロモーションコードのリストを作成する

### ステップ 1: プロモーションコードセクションに進む

![プロモーションコードを作成するボタン。]({% image_buster /assets/img/promocodes/promocode1.png %})({: style="float:right;max-width:30%;margin-left:15px;"})

1. ダッシュボードから [**データ設定**] > [**プロモーションコード**] に移動します。
2. **プロモーションコードリストの作成**を選択します。

### ステップ 2:プロモーションコードの名前は?

1. プロモーションコードのリストに名前を付け、任意の説明を追加する。
2. 次に、プロモーション・コードのコード・スニペットを作成する。 

コードスニペットを作成する際に考慮すべき詳細を次に示します。

- 一度保存したコードスニペットは編集できません。
- スニペットは大文字と小文字を区別する。例えば、"Birthday_promo" と"birthday_promo" は、2つの異なるスニペットとして認識される。
- この一連のプロモーションコードを参照するには、Liquid でスニペット名を使用します。
- コードスニペットが別のリストでまだ使用されていないことを確認します。

![コードスニペット「spring25」が示されている「SpringSale2025」という名前のプロモーションコードリスト。]({% image_buster /assets/img/promocodes/promocode3.png %})({: style="max-width:80%"})

### ステップ 3: プロモーションコードオプションの選択

各プロモーションコード・リストには、作成時に設定された有効期限と時間がある。最長有効期限は、リストを作成または編集した日から6ヶ月先までである。 

その時間内であれば、有効期限を何度でも変更・更新することができる。この有効期限は、このリストに追加されたすべてのコードに適用される。有効期限が切れると、そのコードはBrazeシステムから削除され、そのリストのコードスニペットを呼び出すメッセージは送信されなくなる。

![残りのすべてのコードが2025年4 月30 日の午前12 時に期限切れになる期限設定をリストします。]({% image_buster /assets/img/promocodes/promocode4.png %})({: style="max-width:80%"})

また、オプションでカスタマイズした閾値アラートを設定するオプションもある。これらのアラートを設定すると、リスト内の利用可能なプロモーションコードが少なくなったとき、またはプロモーションコードリストの有効期限が近づいたときに、指定された受信者にEメールが送信される。受信者は 1 日 1 回通知を受け取ります。

!["marketing@abc.com" を通知するしきい値アラートの例。プロモーションコードリストの有効期限が5 日以内の場合。]({% image_buster /assets/img/promocodes/promocode5.png %})({: style="max-width:80%"})

### ステップ 4: プロモーションコードのアップロード

Braze ではコードの作成や償還が管理されません。つまり、プロモーションコードを CSV ファイルに生成し、Braze にアップロードする必要があります。 

CSV ファイルが次のガイドラインに従っていることを確認します。

- プロモーションコードの列も含まれています。
- 1行に1つのプロモーションコードがある。

[Voucherify]({{site.baseurl}}/partners/ecommerce/loyalty/voucherify/) との組み込み統合または [Talon.One]({{site.baseurl}}/partners/ecommerce/loyalty/talonone/) を使用して、プロモーションコードを作成しエクスポートすることができます。

{% alert important %}
最大ファイルサイズは 100 MB、最大リストサイズは 20 MM の未使用コードです。間違ったファイルがアップロードされた場合は、新しいファイルをアップロードすれば、前のファイルは置き換えられる。
{% endalert %}

1. アップロードが完了したら、「**リストを保存**」を選択し、入力したすべての詳細とコードを保存する。

!["springsale" という名前のCSV ファイル。正常にアップロードされました。]({% image_buster /assets/img/promocodes/promocode7.png %})()

{:start="2"}
2\.保存を選択すると、[**インポート履歴**] に新しい行が表示されます。
3\.インポートが完了したかどうかを確認するためにテーブルを更新するには、テーブルの上部にある <span style="font-size: 14px;margin-bottom: .5rem;height: 16px;width: 16px;" class="fas fa-sync" ></span> [**同期**] を選択します。

![アップロード中のプロモーションコード。]({% image_buster /assets/img/promocodes/promocode8.png %})()

{% alert note %}
大きなファイルはインポートに数分かかる。待つ間、インポートが進行している間はページを離れて他の作業をすることができます。インポートが終了すると、ステータスはテーブルの**Complete** に変わります。
{% endalert %}

## プロモーションコード一覧を更新する

リストを更新するには、既存のリストを1つ選択する。名前、説明、リストの有効期限、しきい値アラートを変更できる。また、新しいファイルをアップロードし、「**Update List**」を選択することで、リストにさらにコードを追加することもできる。インポート日に関係なく、リスト内のすべてのコードの有効期限が同じになります。

{% alert important %}
プロモーションコードは削除できない。
{% endalert %}

### 誤ったプロモーションコードのリストを修正する 

間違ったプロモーションコードを含むCSVファイルをアップロードし、**「リストを保存**」を選択した場合、どちらの方法でも解決できる：

- リスト全体を非推奨とする：キャンペーン、キャンバス、テンプレートで現在のプロモーションコードリストの使用を停止する。そして、正しいコードのCSVファイルをアップロードし、メッセージングで使用する。
- 誤ったコードを使用する：不正なコードがすべて使用されるまで、不正なプロモーションコードリストからプレースホルダーにプロモーションコードを送信するキャンペーンを作成する。次に、同じリストに正しいプロモーションコードをアップロードする。

## プロモーションコードの使用 {#update}

メッセージでプロモーションコードを送信するには、[以前に作成した](#create)プロモーションコードリストの横にある**Copy Snippetを**選択する。

![メッセージに貼り付けるスニペットをコピーするオプション。]({% image_buster /assets/img/promocodes/promocode9.png %})({: style="max-width:50%"})

Brazeのメッセージにコードスニペットを貼り付け、[Liquidを使って]({{site.baseurl}}/user_guide/personalization_and_dynamic_content/liquid/)リストからユニークなプロモーションコードを挿入する。そのコードは送信済みとしてマークされ、他のメッセージが同じコードを送信しないようにする。

![「Treat yourself to something nice this spring with our exclusive offer」とその後にコードスニペットが続くメッセージの例。]({% image_buster /assets/img/promocodes/promocode10.png %})({: style="max-width:50%"})

### アクロス キャンバスのステップ

コードスニペットがキャンペーンやマルチチャネルメッセージのキャンバスで使用されると、各ユーザーはユニークなコードを受け取る。プロモーションコードを参照する複数のステップを持つキャンバスでは、ユーザーはステップに入るごとに新しいコードを取得する。

キャンバスで1つのプロモーションコードを割り当て、ステップ間で再利用する：

1. 最初のステップ（ユーザー更新）で、プロモーションコードをカスタム属性として割り当てる。
2. 新しいコードを生成する代わりに、そのカスタム属性を参照するために、後のステップでLiquidを使用する。

ユーザーが複数のチャネルでコードの資格を得た場合、各チャネルで同じコードを受け取る。例えば、メールとプッシュでメッセージを受け取った場合、同じコードが両方に送られる。レポートも単一のコードで反映される。

{% alert note %}
利用可能なプロモーションコードがない場合、コードに依存するテストメッセージやライブメッセージは送信されない。
{% endalert %}

### アプリ内メッセージキャンペーン {#promotion-codes-iam-campaigns}

[アプリ内メッセージキャンペーン]({{site.baseurl}}/user_guide/message_building_by_channel/in-app_messages)を作成した後、[プロモーションコードリストスニペット]({{site.baseurl}}/user_guide/personalization_and_dynamic_content/promotion_codes#creating-a-promotion-code-list)をアプリ内メッセージボディに挿入できます。 

アプリ内メッセージのプロモーションコードは、ユーザがアプリ内メッセージの表示をトリガした場合にのみ控除され、使用されます。

### テストメッセージの場合

テスト送信とシードグループのメール送信では、特にリクエストがない限り、プロモーションコードが使用される。Brazeのアカウントマネージャーに連絡して、この機能の動作を更新し、テスト送信やシードグループのメール送信時にプロモーションコードが使用されないようにする。

### カレントのメッセージ・エキストラ付き

{% multi_lang_include shopify.md section='Liquid promotion codes with Currents' %}

## ユーザープロファイルにプロモーションコードを保存する {#save-to-profile}

後続のメッセージで同じプロモーションコードを参照するには、コードをカスタム属性としてユーザープロファイルに保存する必要があります。これは、メッセージステップの前に直接、"Promo Code "のようなカスタム属性に割引コードを割り当てる[ユーザー更新ステップによって]({{site.baseurl}}/user_guide/engagement_tools/canvas/canvas_components/user_update/)行うことができる。

まず、ユーザー更新ステップの各フィールドで以下を選択する：

- **属性名**プロモコード
- **アクション:**更新
- **キーの値:**プロモーションコードのLiquidコードスニペット、例えば次のようなものだ。 {% raw %}`{% promotion('spring25') %}`{% endraw %}

次に、カスタム属性（この例では{% raw %}`{{custom_attribute.${Promo Code}}`{% endraw %} ）をメッセージに追加する。割引コードはテンプレート化される。

## プロモーションコードの使用状況を見る

残りのコード数は、**プロモーションコード**ページのプロモーションコード一覧の**残り**列にあります。

![未使用コードがあるプロモーションコードの例。]({% image_buster /assets/img/promocodes/promocode11.png %})()

このコード数は、既存のプロモーションコード一覧ページを再訪した際にも確認できる。未使用のコードをCSV ファイルとしてエクスポートすることもできます。 

!["Black Friday Sale"という名前のプロモーションコード。残りのコードが992 個あります。]({% image_buster /assets/img/promocodes/promocode12.png %})({: style="max-width:50%"})

## マルチチャネルとシングルチャネルの送信

マルチチャネル、シングル送信キャンペーン、キャンバスでは、メッセージのリキッドで参照されるすべてのプロモーションコードは、メッセージが送信される**前に**使用されるように差し引かれ、次のことが起こることを確認する：

- マルチチャネル・メッセージでは、同じプロモーション・コードが複数のチャネルで使用される。
- 余分なプロモーションコードは、メッセージが失敗したり中断した場合には使用されない。

リキッド条件ロジックタグによって分割された1つのメッセージの中で、ユーザーが2つのプロモーションコードリストを参照している場合、ユーザーがどちらの条件フローをたどったかにかかわらず、すべてのプロモーションコードが差し引かれる。

ユーザーが新しいキャンバスステップにエントリする場合またはキャンバスに再エントリする場合に、プロモーションコード Liquid スニペットがそのユーザー宛てのメッセージに再度適用されると、新しいプロモーションコードが使用されます。

### 例

以下の例では、プロモーションコード・リスト`vip-deal` と`regular-deal` の両方が差し引かれる。Liquid は以下のとおりです。

{% raw %}
```
{% if user.is_vip %}
  {% promotion('vip-deal') %}
{% else %}
  {% promotion('regular-deal') %}
{% endif %} 
```
{% endraw %}

Brazeでは、使用予定数よりも多くのプロモーションコードをアップロードすることを推奨している。プロモーションコード・リストの有効期限が切れたり、プロモーションコードがなくなったりすると、それ以降のメッセージは中断される。

{% alert tip %}
**Brazeでプロモーションコードがどのように使われるかを例えてみよう。**<br><br>メッセージを送ることは、郵便局で手紙を送るようなものだと想像してほしい。その手紙を店員に渡すと、クーポン券が同封されていることがわかる。店員は1枚目のクーポンを束から取り出し、封筒に入れる。店員は手紙を送ったが、何らかの理由で手紙は郵便物の中に紛れ込んでしまった（クーポンも紛失してしまった）。<br><br>このシナリオでは、ブレイズは郵便局員であり、あなたのプロモーション・コードはクーポンである。Webhookの結果にかかわらず、プロモーションコードのスタックから引き出された後は、それを取得することはできない。
{% endalert %}

## よくある質問

### プロモーション・コードで使用できるメッセージング・チャンネルは？

プロモーションコードは現在、Eメール、モバイルプッシュ、ウェブプッシュ、コンテンツカード、ウェブフック、SMS、WhatsAppに対応している。Brazeのトランザクションメールキャンペーンとアプリ内メッセージは、現在プロモーションコードをサポートしていない。

### テスト送信やシード送信は使用量にカウントされるのか？

デフォルトでは、テスト送信とシードグループのメール送信では、テスト送信ごとにユーザーごとのプロモーションコードが使用されます。ただし、Brazeアカウントマネージャーに連絡して、テスト中にプロモーションコードを使用しないようにこの動作を更新することができる。

### 複数のメッセージングチャネルが同じプロモーションコードスニペットを使用するとどうなるか？

特定のユーザーが複数のチャネルを通じてコードを受け取る資格がある場合、各チャネルを通じて同じコードを受け取ることになる。プロモコードはチャネルに関係なく1つしか使用されない。

### 一つのメッセージの中で、複数のLiquidスニペットで同じプロモーションコード一覧を参照できる？

はい。Brazeは、メッセージ内のそのスニペットのすべてのインスタンスに同じプロモーションコードを適用し、ユーザーが一意のコードを受け取ることを確実にする。

### プロモーションコードのリストが期限切れや空だった場合はどうなるのか？

期限切れのコードは6 か月後に削除されます。

メッセージに空または期限切れのリストからのプロモーションコードが含まれているはずだった場合、メッセージはキャンセルされる。 

メッセージに条件付きでプロモーションコードを挿入するリキッドロジックが含まれている場合、メッセージにプロモーションコードが含まれているはずだった場合のみ、メッセージはキャンセルされる。メッセージにプロモーションコードが含まれていなければ、メッセージは正常に送信される。

### 間違ったプロモーションコードをアップロードした場合、更新は可能か？

はい。リスト全体を非推奨にするか、プレースホルダーを使ってリストを削除することで解決できる。詳しくは、[プロモーションコードの更新を](#update)参照のこと。

### ユーザープロファイルにプロモーションコードを保存して、将来のメッセージングに利用することは可能か？

はい。ユーザー更新ステップで、プロモーションコードをユーザープロファイルに保存できる。詳細については、[ユーザープロファイルへのプロモーションコードの保存を](#save-to-profile)参照のこと。
