---
nav_title: テストメッセージの送信
article_title: テストメッセージの送信
page_order: 0
tool: 
  - Campaigns
page_type: reference
description: "この記事では、さまざまな Braze チャネルにテストメッセージを送信する方法と、カスタムイベントプロパティやユーザー属性を組み込む方法について説明します。"

---

# テストメッセージの送信

> ベストプラクティスとして、メッセージングキャンペーンをユーザーに送信する前に、これが正しく表示され、意図したとおりに動作するかどうかテストすることをお勧めします。Braze ダッシュボードのツールを使用して、選択したデバイスまたはチームメンバーへのテストメッセージを作成して送信できます。

{% alert important %}
テスト後は必ずキャンペーンの下書きを保存して、キャンペーンが削除されないようにしてください。メッセージを下書きとして保存しなくてもテストメッセージを送信することはできます。
{% endalert %}

## ステップ 1: テストユーザーを特定する

メッセージングキャンペーンをテストする前に、テストユーザーを特定することが重要です。これらのユーザーは、既存のユーザー ID やメールアドレス、またはメッセージングキャンペーンのテスト専用に使用される新規ユーザーのいずれでもかまいません。 

### オプション: コンテンツテストグループを作成する

テストユーザーを整理する便利な方法として、キャンペーンからテストメッセージを受け取るユーザーのグループを含む[コンテンツテストグループ]({{site.baseurl}}/user_guide/administrative/app_settings/internal_groups_tab/)を作成することができます。このテストグループをキャンペーンの**テスト受信者の**下にある**コンテンツテストグループの追加**フィールドに追加し、個々のテストユーザーを作成または追加することなくテストを開始することができる。

## ステップ 2: チャネル固有のテストメッセージを送信する

テストメッセージを送信する手順については、それぞれのチャネルの次のセクションを参照してください。

{% tabs local %}
{% tab Email %}

1. メールメッセージの下書きを作成します。
2. **プレビューとテストを**選択する。
3. [**テスト送信**] タブを選択し、[**ユーザーを個別に追加**] フィールドにメールアドレスまたはユーザー ID を追加します。 
4. **Send Testを**選択し、下書きメールを受信トレイに送信する。

![テスト・メール]({% image_buster /assets/img_archive/testemail.png %})({: style="max-width:40%;" })

{% endtab %}
{% tab Push %}

#### モバイルプッシュ

1. モバイルプッシュの下書きを作成します。
2. [**設定**] タブを選択し、[**ユーザーを個別に追加**] フィールドにメールアドレスまたはユーザー ID を追加します。
3. **Send Testを**選択し、下書きメッセージをデバイスに送信する。

![テスト・プッシュ]({% image_buster /assets/img_archive/testpush.png %})()

#### Web プッシュ

1. Web プッシュを作成します。
2. [**テスト**] タブを選択します。 
3. **Send Test to Myselfを**選択する。
4. **Send Testを**選択し、WebブラウザにWebプッシュを送信する。

![ウェブプッシュのテスト]({% image_buster /assets/img_archive/testwebpush.png %})()

Braze ダッシュボードからのプッシュメッセージをすでに受け入れている場合、プッシュは画面の隅に表示されます。それ以外の場合は、メッセージが表示されたら [**許可**] をクリックすると、メッセージが表示されます。

{% endtab %}
{% tab In-App Message %}

{% alert warning %}
[コンテンツ・テスト・グループ]({{site.baseurl}}/user_guide/administrative/app_settings/developer_console/internal_groups_tab/#content-test-groups)または個々のユーザーにテストを送信するには、送信前にテスト・デバイスでプッシュを有効にする必要がある。例えば、テストメッセージが表示される前に通知をタップするには、iOSデバイスでプッシュを有効にしておく必要がある。

アプリ内とテストデバイスでプッシュ通知を設定している場合は、テスト用アプリ内メッセージをアプリに送信して、リアルタイムでどのように表示されるかを確認できます。 

1. アプリ内メッセージの下書きを作成します。
2. [**テスト**] タブを選択し、[**ユーザーを個別に追加**] フィールドにメールアドレスまたはユーザー ID を追加します。 
3. **Send Testを**選択し、プッシュ・メッセージをデバイスに送信する。

テスト用プッシュメッセージがデバイス画面の上部に表示されます。

![アプリ内テスト]({% image_buster /assets/img_archive/test-in-app.png %})()

{% alert important %}
テスト送信の結果、各受信者に複数のアプリ内メッセージが送信される場合がある。
{% endalert %}

プッシュメッセージを直接クリックして開くと、アプリが開いてアプリ内メッセージのテストを確認できます。このアプリ内メッセージのテスト機能では、ユーザーがテストプッシュ通知をクリックしてアプリ内メッセージをトリガーする必要があることに注意してください。そのため、テストプッシュ通知の配信を成功させるために、ユーザーには関連アプリでプッシュ通知を受信する資格が必要です。

### プレビュー

**プレビュー**タブでアプリ内メッセージをプレビューしながら作成できる。これは、ユーザーの視点から最終的なメッセージがどのように見えるかを視覚化するのに役立つはずだ。ランダムなユーザー、特定のユーザー、またはカスタマイズされたユーザーに対して、あなたのメッセージがどのように見えるかをプレビューすることができる。また、携帯端末やタブレットでもメッセージをプレビューすることができる。

![アプリ内メッセージを作成する際の「作成」タブに、メッセージのプレビューが表示される。ユーザーが選択されていないため、本文に追加された Liquid はそのまま表示されます。]({% image_buster /assets/img/in-app-message-preview.png %})

Braze には 3 世代のアプリ内メッセージが用意されています。どの端末がどの世代をサポートしているかによって、どの端末にメッセージを送るかを細かく設定できる。

![アプリ内メッセージのプレビュー時に世代を切り替える。]({% image_buster /assets/img/iam-generations.gif %}){: height="50%" width="50%"}

{% alert warning %}
**プレビューでは**、あなたのメッセージの表示は、ユーザーのデバイス上での実際のレンダリングと同一ではないかもしれない。メディア、コピー、パーソナライズ、カスタム属性が正しく生成されることを確認するため、デバイスにテストメッセージを送信することを常に推奨する。
{% endalert %}

### テスト・チェックリスト

- 画像やメディアは期待通りに表示され、機能しているか？
- 液体は期待通りに機能しますか？Liquid が情報を返さない場合の[デフォルト属性値を]({{site.baseurl}}/user_guide/personalization_and_dynamic_content/liquid/conditional_logic/#accounting-for-null-attribute-values)考慮したか？
- あなたのコピーは明確で簡潔で正しいですか？
- あなたのボタンは、ユーザーをどこに誘導しているだろうか？

### アクセシビリティスキャナー

アクセシビリティのベストプラクティスを促進するために、Braze は従来のHTML エディターを使用して作成されたアプリ内メッセージのコンテンツを、アクセシビリティ標準に照らして自動的にスキャンします。このスキャナーは、Web Content Accessibility Guidelines ([WCAG](https://www.w3.org/WAI/standards-guidelines/wcag/)) 標準を満たしていない可能性があるコンテンツを特定するのに役立ちます。WCAG は、World Wide Web Consortium (W3C) が作成し、国際的に認知された技術標準のセットで、多くの人にとってアクセスしやすい Web コンテンツを作成するためのものです。

![アクセシビリティスキャンの結果]({% image_buster /assets/img/Accessibilty_Scanner_IAM.png %})()

{% alert note %}
アプリ内メッセージアクセシビリティスキャナーは、カスタム HTML で作成されたメッセージに対してのみ実行されます。
{% endalert %}

#### CDI の仕組み

このスキャナーはカスタム HTML メッセージに対して自動的に実行され、[WCAG 2.1 AA ルールセット](https://www.w3.org/WAI/WCAG22/quickref/?versions=2.1&currentsidebar=%23col_customize&levels=aaa)全体に照らして HTML メッセージ全体を評価します。フラグが設定された各問題について、次の情報が表示されます。

- 関連する特定の HTML 要素
- アクセシビリティの問題の説明
- 追加のコンテキストまたは修復ガイダンスへのリンク

#### 自動アクセシビリティテストについて

{% multi_lang_include accessibility/automated_testing.md %}

{% endtab %}
{% tab Content Card %}

{% alert warning %}
テストを[コンテンツテストグループ]({{site.baseurl}}/user_guide/administrative/app_settings/developer_console/internal_groups_tab/#content-test-groups)または個々のユーザーに送信するには、送信する前にテストデバイスでプッシュが有効になっており、テストユーザーの有効なプッシュトークンが登録されている必要があります。iOSユーザーの場合、テストコンテンツカードを表示するには、Brazeから送信されたプッシュ通知をタップする必要があります。この動作はテストコンテンツカードにのみ適用されます。
{% endalert %}

コンテンツカードを作成したら、テストコンテンツカードをアプリに送信して、リアルタイムでどのように表示されるかを確認できます。

1. コンテンツカードの下書きを作成します。
2. [**テスト**] タブを選択し、このテストメッセージを受信するコンテンツテストグループを少なくとも 1 つ、あるいは個々のユーザーを少なくとも 1 人選択します。 
3. **Send Testを**選択し、コンテンツカードをアプリに送信する。

![コンテンツカードのテスト]({% image_buster /assets/img/contentcard_test.png %})()

### プレビュー

**プレビュー**タブでカードを作成しながらプレビューできる。これは、ユーザーの視点から最終的なメッセージがどのように見えるかを視覚化するのに役立つはずだ。

{% alert note %}
作成者の**プレビュー**タブでは、メッセージの表示がユーザーのデバイスでの実際のレンダリングと同じでない場合があります。メディア、コピー、パーソナライゼーション、およびカスタム属性が正しく生成されることを確認するために、常にデバイスにテストメッセージを送信することをお勧めします。
{% endalert %}

### テスト・チェックリスト

- 画像やメディアは期待通りに表示され、機能しているか？
- 液体は期待通りに機能しますか？Liquid が情報を返さない場合の[デフォルト属性値を]({{site.baseurl}}/user_guide/personalization_and_dynamic_content/liquid/conditional_logic/#accounting-for-null-attribute-values)考慮したか？
- あなたのコピーは明確で簡潔で正しいですか？
- リンクはユーザーを目的の場所に誘導していますか？

### デバッグ

コンテンツカードが送信された後、開発者コンソールの[イベントユーザーログ]({{site.baseurl}}/user_guide/administrative/app_settings/event_user_log_tab/)から問題を分解またはデバッグできます。 

一般的なユースケースは、ユーザーが特定のコンテンツカードを見られない理由をデバッグしようとすることです。そのためには、セッション開始時にSDKに配信されたコンテンツカードをインプレッションの前に**イベントユーザーログ**で確認し、それらを特定のキャンペーンに遡ることができます。

1. **設定** > **イベントユーザーログ** に移動します。
2. テストユーザーのSDKリクエストを見つけて展開します。
3. [**生データ**] をクリックします。
4. セッションの`id`を見つけてください。次に例の抜粋を示します:

    ```json
    [
      {
        "session_id": "D1B051E6-469B-47E2-B830-5A728D1D4AC5",
        "data": {
          "ids": [
            "NDg2MTY5MmUtNmZjZS00MjE1LWJkMDUtMzI1NGZiOWU5MDU3"
          ]
        },
        "name": "cci",
        "time": 1636106490.155
      }
    ]
    ```
    
{: start="5"}
5. [Base64 Decode and Encode](https://www.base64decode.org/)のようなデコードツールを使用して、Base64形式から`id`をデコードし、関連する`campaign_id`を見つけます。この例では、次のようになります。

    ```
    4861692e-6fce-4215-bd05-3254fb9e9057_$_cc=c3b25740-f113-c047-4b1d-d296f280af4f&mv=6185005b9d9bee79387cce45&pi=cmp
    ```

    Where `4861692e-6fce-4215-bd05-3254fb9e9057` is the `campaign_id`.<br><br>

6. **キャンペーン**ページに移動し、`campaign_id`を検索します。

![キャンペーンページでcampaign_id を検索する。]({% image_buster /assets/img_archive/cc_debug.png %}){: style="max-width:80%;"}

そこから、メッセージ設定とコンテンツを確認して、ユーザーが特定のコンテンツカードを見られない理由を詳しく調べることができます。

{% endtab %}
{% tab Banners %}

{% alert important %}
Braze でバナーメッセージをテストする前に、Braze でバナーキャンペーンを作成する必要があります。さらに、テストする配置がアプリまたはウェブサイトに既に[配置されていることを確認します]({{site.baseurl}}/developer_guide/banners/placements)。
{% endalert %}

バナーメッセージを作成した後、バナーをプレビューしたり、テストメッセージを送信することができる。

1. バナーのメッセージを下書きする。
2. **プレビューを**選択してバナーをプレビューするか、テストメッセージを送信する。
3. テストメッセージを送信するには、コンテンツテストグループまたは1人以上の個人ユーザーを**テスト受信**者として追加し、「**テスト送信**」を選択する。 

最長5分間、テストメッセージを端末で見ることができる。

![バナーコンポーザーのプレビュータブ。]({% image_buster /assets/img/banners/preview_banner.png %})

{% alert note %}
ハードウェアの違いにより、プレビューがユーザーのデバイス上での最終的なレンダリングと同一でない可能性があることに留意してほしい。
{% endalert %}

### テスト・チェックリスト

- バナーキャンペーンはプレースメントに割り当てられているか？
- 対象とするデバイスの種類や画面サイズにおいて、画像やメディアが表示され、期待通りに動作するか。
- リンクやボタンは、ユーザーが行くべき場所に誘導しているか？
- 液体は期待通りに機能しますか？Liquidが情報を返さない場合に、デフォルト属性値を考慮しましたか？
- あなたのコピーは明確で簡潔で正しいですか？

{% endtab %}
{% tab SMS/MMS %}

SMS または MMS メッセージを作成した後、スマートフォンにテストメッセージを送信して、リアルタイムでどのように表示されるかを確認できます。 

1. SMS または MMS メッセージの下書きを作成します。
2. [**テスト**] タブを選択し、このテストメッセージを受信するコンテンツテストグループを少なくとも 1 つ、あるいは個々のユーザーを少なくとも 1 人選択します。 
3. **テスト**メッセージを送信するには、**Send Testを**選択する。

![コンテンツカードのテスト]({% image_buster /assets/img/sms_test.png %})()

{% endtab %}
{% tab Webhook %}

Webhook を作成した後、テスト送信を実行して Webhook の応答を確認できます。[**テスト**] タブを選択し、[**テストを送信**] を選択して、指定された Webhook URL にテスト送信を送信します。個々のユーザーを選択して、特定のユーザーとして応答をプレビューすることもできます。 

![コンテンツカードのテスト]({% image_buster /assets/img/webhook_test.png %})()

{% endtab %}
{% endtabs %}

## パーソナライズされたキャンペーンのテスト 

ユーザーデータを入力したり、カスタムイベントプロパティを使用するキャンペーンをテストしたりする場合は、追加または別の手順を実行する必要があります。

### ユーザー属性でパーソナライズされたキャンペーンのテスト

メッセージに[パーソナライゼーションを]({{site.baseurl}}/user_guide/personalization_and_dynamic_content/overview/)使用している場合は、キャンペーンを適切にプレビューし、ユーザーデータがコンテンツに正しく入力されているかチェックするための追加ステップが必要になる。

テストメッセージを送信するときは、必ず [**既存のユーザーを選択**] オプションか、[**カスタムユーザー**] としてプレビューするオプションを選択します。

![パーソナライズされたメッセージをテストする]({% image_buster /assets/img_archive/personalized_testing.png %}){: style="max-width:70%;" }

#### 既存のユーザーの選択

既存のユーザーを選択する場合は、検索フィールドに特定のユーザー ID またはメールを入力します。次に、ダッシュボードプレビューを使用してメッセージがそのユーザーにどのように表示されるかを確認し、そのユーザーに表示される内容を反映したテストメッセージをデバイスに送信します。

![ユーザーを選択する]({% image_buster /assets/img_archive/personalized_testing_select.png %})

#### カスタムユーザーの選択

カスタムユーザーとしてプレビューする場合は、ユーザーの名やカスタム属性など、パーソナライズできるさまざまなフィールドにテキストを入力します。繰り返しになりますが、自分のメールアドレスを入力して、デバイスにテストを送信できます。

![カスタムユーザー]({% image_buster /assets/img_archive/personalized_testing_custom.png %})

#### 既存のユーザーをカスタマイズする

ランダムまたは既存のユーザーから個々のフィールドを編集し、メッセージ内のダイナミックなコンテンツのテストに役立てることができる。選択したユーザーを変更可能なカスタム・ユーザーに変換するには、**Editを**選択する。

![ユーザーとしてプレビュー」タブには「編集」ボタンがある。]({% image_buster /assets/img_archive/edit_user_preview.png %}){: style="max-width:50%;"}

### カスタムイベントプロパティでパーソナライズされたキャンペーンのテスト

[カスタムイベントプロパティ]({{site.baseurl}}/user_guide/data/custom_data/custom_events/#custom-event-properties)でパーソナライズされたキャンペーンのテストは、ここで説明する他のタイプのキャンペーンのテストとは少し異なります。 

{% tabs local %}
{% tab Trigger manually %}

#### 方法1:手動でキャンペーンをトリガーする

カスタムイベントプロパティを使用してパーソナライズされたキャンペーンをテストするための堅牢な方法として、自分でキャンペーンをトリガーすることができる：

1. イベント・プロパティを含むコピーを書き上げる。 

![プロパティを使ってテストメッセージを作成する]({% image_buster /assets/img_archive/testeventproperties-compose.png %})

{: start="2"}
2\.[アクションベースの配信]({{site.baseurl}}/user_guide/engagement_tools/campaigns/building_campaigns/delivery_types/triggered_delivery/)を使用して、イベントの発生時にキャンペーンを配信します。

{% alert note %}
iOSのプッシュキャンペーンをテストしている場合、iOSは現在開封中のアプリに対してプッシュ通知を配信しないため、アプリを終了する時間を確保するために遅延を1分に設定する必要がある。他のタイプのキャンペーンは、即座に配信するように設定できます。
{% endalert %}

![テスト・メッセージ配信]({% image_buster /assets/img_archive/testeventproperties-delivery.png %})

{: start="3"}
3. テストフィルターを使用したり、自分のメールアドレスをターゲットにしたりして、通常どおりにテスト用のユーザーをターゲットにして、キャンペーンの作成を完了します。 

![テスト・メッセージのターゲティング]({% image_buster /assets/img_archive/testeventproperties-target.png %})

{: start="4"}
4. アプリを開いて、カスタムイベントを完了します。

キャンペーンがトリガーされ、イベントプロパティでカスタマイズされたメッセージが表示されます。

![テストメッセージの例]({% image_buster /assets/img_archive/testeventproperties-message2.png %})

{% endtab %}
{% tab Test message %}

#### 方法2:自分自身にテストメッセージを送る

また、カスタムユーザー ID を保存する場合は、カスタマイズされたテストメッセージを自分に送信してキャンペーンをテストすることもできます。

1. キャンペーンのコピーを書きます。
2. [**テスト**] タブを選択し、[**カスタマイズされたユーザー**] を選択します。 
3. ページの一番下にカスタムイベントプロパティを追加し、一番上のボックスにユーザーIDまたはメールアドレスを追加する。
4. プロパティをパーソナライズされたメッセージを受信するには、「**テストを送信**」を選択する。

![カスタマイズされたユーザーを使ったテスト]({% image_buster /assets/img_archive/testeventproperties-customuser.png %})

{% endtab %}
{% tab Liquid %}

#### 方法1:Liquid の使用

カスタムイベントプロパティは、Liquidで手動で値を入力してテストできる。 

1. メッセージエディターで、カスタムイベントプロパティの値を入力する。
2. **ユーザーとしてプレビュー**」タブを選択し、正しいメッセージが表示されることを確認する。

{% endtab %}
{% endtabs %}

## トラブルシューティング

### アプリ内メッセージ

アプリ内メッセージキャンペーンがプッシュキャンペーンによってトリガーされない場合、アプリ内キャンペーンのセグメンテーションをチェックし、ユーザーがプッシュメッセージの受信**前に**、ターゲットオーディエンスに合致していることを確認してください。

Android および iOS でのテスト送信の場合、クリック時に**プッシュ通知の許可を要求**する動作を使用するアプリ内メッセージが、一部のデバイスで表示されないことがあります。回避策として
- **Android :**デバイスは Android 13、かつ当社の Android SDK バージョン21.0.0 である必要があります。もう1つの理由は、アプリ内メッセージが表示されるデバイスに、すでにシステムレベルのプロンプトがあることかもしれない。[**再び表示しない**] を選択している可能性があるため、再びテストする前にアプリを再インストールして、通知の許可をリセットしなければならない場合があります。
- **iOS: **開発チームは、アプリのプッシュ通知の実装を見直し、プッシュ許可を要求するコードを手動で削除することを推奨する。詳細については、[アプリ内メッセージのプッシュプライマー]({{site.baseurl}}/user_guide/message_building_by_channel/push/best_practices/push_primer_messages/)を参照してください。

アクションベースのアプリ内メッセージキャンペーンを配信するためには、REST APIではなく、Braze SDKを通じてカスタムイベントを記録し、ユーザーが対象のアプリ内メッセージをデバイスに直接受信できるようにする必要がある。ユーザーは、セッション中にイベントを実行すると、アプリ内メッセージを受け取る。
