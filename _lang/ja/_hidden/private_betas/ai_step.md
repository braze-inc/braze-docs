---
nav_title: AI ステップ
article_title: AI ステップ
permalink: /ai_step/
description: "この参照記事では、Canvas AI ステップについて説明します。"
Tool:
  - Canvas
hidden: true
---

# AI ステップ

> Canvas 内のAI ステップでは、ChatGPT を活用して、ユーザーが生成した入力(アンケートフィードバックなど) を解釈し、適切な応答を決定し、Braze 内のすべてのメッセージをトリガーすることで、カスタマイズされたマーケティングを自動化します。ChatGPT は、サードパーティのOpenAI によって電源供給されます。

{% alert note %}
AIステップは現在ベータ機能として利用可能です。このベータ・トライアルへの参加に興味がある場合は、カスタマー・サクセス・マネージャーに連絡してください。
{% endalert %}

## AI ステップの作成 {#create-ai-step}
 
1. キャンバスに新しいステップを追加し、**AI Step**を選択します。<br><br>![Canvas ビルダーのAI ステップ][1]{: style="max-width: 30%;"}<br><br>
2. さまざまなユーザーアクションへの対応方法をAI に指示するプロンプトを作成します。レスポンスには、カスタム属性の更新やメッセージの送信を含めることができます。このプロンプトでは、Liquidを使用して、異なるユーザー属性または入力に基づいて異なる応答出力を割り当てることができます。<br><br>同じキャンバス内で将来のメッセージをパーソナライズするために使用できる出力を割り当てるには、特定の名前(「message」や「sentiment score」など)で変数を保存するプロンプトを作成します。<br><br> ![AIステップ設定で使用されるサンプルAIプロンプト。生成されたセンチメントスコアに基づいてパーソナライズされたメッセージを送信します。この例は、"Customer Sentiment responses" section.][2] の下に記載されています。 <br><br>
3. **Preview** タブを使用して、AI が特定のユーザに対して出力する可能性があるものをテストします。<br><br> ![AI ステップ設定のプレビュータブで、キャメロンのファーストネーム、靴の製品名、テキスト"comfy ですが、靴のレースはすでに壊れています"][3]の3 つのパラメータについて、AI が生成したパーソナライズメッセージを表示します。

## 液体を使用したAI 出力の参照
Liquid logic `{% raw %}{{ai_step_output.${key_name}}}{% endraw %}` を挿入して、後の手順でAI 出力を参照します。AI ステップのプロンプトで`key_name` を設定できます。

たとえば、変数"message" と"sentiment score" を使用する場合、`{% raw %}{{ai_step_output.${message}}}{% endraw %}` を使用して、後続のメッセージを同じキャンバスでカスタマイズできます。

ユーザーupdate Canvas ステップを使用して、AI ステップの出力をカスタム属性としてログに記録することもできます。このステップでは、AI ステップ出力(`{% raw %}{{ai_step_output.${sentiment_score}}}{% endraw %}` など) を読み込みます。出力がカスタム属性として保存されていない場合、同じキャンバスの後続のステップ以外では使用できません。

## AIステップ統計

AI ステップには、以下のステップレベルの統計があります。

- 次のステップに進行済みキャンバス内で次のステップに進んだユーザーの数
- キャンバスを終了済みAI ステップが最後のステップであったためにキャンバスを終了したユーザーの数
- **出力成功:**AIステップが正常に出力を生成したユーザーの数
- **出力失敗:**AI ステップが出力の生成に失敗したユーザーの数。この場合、ユーザーは以降のステップに進みます。

### AI ステップ出力について

Braze がAI ステップの出力を破棄し、次のステップに顧客を送信するいくつかのシナリオがあります。
\- 出力が1024文字を超える場合
\- 出力がJSON にない場合
\- プロンプトがOpenAI の[モデレーション](https://platform.openai.com/docs/guides/moderation/overview) 要件に失敗した場合、不適切なユーザー生成コンテンツにフラグを設定します

## AI ステップの使用例

### 顧客センチメント対応

[AIステップの作成](#create-ai-step)の例で示されているように、AIに顧客フィードバックから生成されたセンチメントスコアに基づいてフォローアップメッセージを送信するように依頼することができます。
\- 肯定的なセンチメントスコア- ユーザにレビューを終了するように求めるプッシュ通知をトリガします
\- センチメントスコア中- ユーザに追加のヘルプを求めるメールをトリガします
\- センチメントスコアが低い- サポート担当者が微妙なフォローアップを作成できるように、ユーザヘルプデスクに通知するウェブフックをトリガします

#### AI プロンプトの例

この例は、[AIステップの作成](#create-ai-step)で使用されました。

顧客が"`{% raw %}{{canvas_entry_properties.${product_name}}}{% endraw %}`" を購入し、製品フィードバック:"`{% raw %}{{canvas_entry_properties.${text}}}{% endraw %}`" を与えました。センチメントスコアを0 ～100 の整数で作成します。次に、カスタマイズされたメッセージを作成します。これにより、"message"および"sentiment score."という2つの変数が返されます。

### 調査フォロー

無料応答セクションを使用してアプリ内またはブラウザ内のアンケートを実行する場合は、AI ステップを使用して無料応答を分析し、適切にフォローアップすることができます。 

例えば、メイクアップ小売業者が「今年の美容賞にどんな商品をノミネートしたいですか?」と尋ねるアンケートを持っている場合、ユーザーのお気に入りの商品タイプやブランドの属性を特定し、割り当てるプロンプトを使って、このデータに基づいて将来のコンテンツをパーソナライズすることができます。

#### AI プロンプトの例

ユーザーの好きなブランドを、そのレスポンスを使って特定する。そして、アンケートにご記入いただきありがとうございましたメッセージを作成し、ビューティーエキスパートもお気に入りのブランドをどのように愛しているかをお伝えします。これにより、"message"および"favorite brand."という2つの変数が返されます。

! [AI ステップ設定のプレビュータブで、&quot のアンケート回答パラメータにAI が生成したパーソナライズメッセージが表示されます。Estee Lauder face creams&quot が大好きです。アンケートに記入していただき、フェイスクリームをお勧めしていただき、ありがとうございます。] [4]

### 行動主導の推奨事項

ユーザーは、AI にユーザーの動作の分析を依頼し、推奨メッセージを送信できます。 

たとえば、ユーザの最新の購入を50 件分析し、最も一般的に購入されるカテゴリを新しいカスタム属性として設定するプロンプトを作成できます。次に、各ユーザのお気に入りカテゴリに合わせて、カスタマイズされた電子メールのおすすめを送信できます。

#### AI プロンプトの例

顧客が以下の製品を購入しました: "`{% raw %}{{custom_attribute.${Products Purchased}}}{% endraw %}`".ユーザが最も購入した製品カテゴリを特定します。これにより、" ほとんどの購入カテゴリ。" の新しい変数が返されます。

![AI ステップ設定のプレビュータブで、"book"のAI 生成変数が表示されます。ほとんどの購入カテゴリのパラメータ。][5]

## レート制限

1 企業あたり10 リクエスト/分(RPM) の制限があります。つまり、AI ステップでは、10 人までのユーザが1 分間にそのステップを受け取ることができ、10 を超えるユーザは自動的に次のステップに進みます。次の分が始まると、ユーザーはAIステップを再度受信できますが、レート制限をトリガーした以前のユーザーは再試行されません。

## AIステップの制限

- この機能はGPT-3.5を利用します。
- この機能は、Braze OpenAI API キーを使用します。独自のOpenAI API キーは使用できません。
- ワークスペースあたり1 分あたり5 件の要求(RPM) と会社あたり10 RPM の制限があります。
- この機能はHIPAA に準拠していないため、お客様は個人識別情報(PII) または保護された健康情報(PHI) を送信しないでください。

## 私のデータはどのように使用され、OpenAIに送信されますか?

メッセージコンテンツを分析して作成するために、Braze はプロンプトをOpenAI のAPI プラットフォームに送信します。Braze からOpenAI に送信されるすべてのクエリーは匿名化されます。つまり、指定したメッセージコンテンツに一意に識別可能な情報を含めない限り、OpenAI はクエリーの送信元を識別できません。[OpenAI のAPI Platform Commitments](https://openai.com/policies/api-data-usage-policies)に詳述されているように、Braze 経由でOpenAI のAPI に送信されるデータはモデルのトレーニングや改善には使用されず、30 日後に削除されます。[Usage Policy](https://openai.com/policies/usage-policies)など、ユーザーに関連するOpenAI のポリシーを遵守してください。Braze は、AI で生成されたコンテンツに関していかなる種類の保証も行いません。 

[1]: {% image_buster /assets/img/ai_step1.png %}
[2]: {% image_buster /assets/img/ai_step2.png %}
[3]: {% image_buster /assets/img/ai_step3.png %}
[4]: {% image_buster /assets/img/ai_step4.png %}
[5]: {% image_buster /assets/img/ai_step5.png %} 