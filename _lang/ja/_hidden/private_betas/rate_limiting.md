---
article_title: キャンペーンとキャンバスのレート制限
permalink: /rate_limiting/
page_type: reference
description: "この参考記事では、以前のBrazeの配信速度レート制限動作について説明している。"
---

# レート制限

> この記事では、以前のBrazeの配信速度レート制限動作について説明する。更新されたレート制限の動作については、[ここで]({{site.baseurl}}/user_guide/engagement_tools/campaigns/building_campaigns/rate-limiting#rate-limiting)説明する。

Brazeでは、キャンペーンやキャンバスのレート制限を行い、プラットフォームからの発信トラフィック量を調整することで、マーケティングの圧力をコントロールすることができる。キャンペーンには2種類のレート制限をかけることができる：

1. **配信速度レート制限は**、サーバーの帯域幅を考慮する。
2. **ユーザー中心のレート制限は**、ユーザーにとって最高の体験を提供することに重点を置いている。 

詳しくは[レート制限についてを]({{site.baseurl}}/user_guide/engagement_tools/campaigns/building_campaigns/rate-limiting/#about-rate-limiting)参照のこと。

## 配信速度レート制限について

大規模なキャンペーンでユーザーのアクティビティが急増し、サーバーに過負荷がかかることが予想される場合、1分あたりのメッセージ送信レート制限を設定することができます。 

キャンペーン作成時にユーザーをターゲットにする場合、**ターゲットオーディエンス**（キャンペーンの場合）または**送信設定**（キャンバスの場合）のいずれかに移動して、メッセージ配信速度のレート制限を選択することができる（最小10～最大500,000メッセージ/分までさまざまな単位）。レート制限のないキャンペーンは、これらの配信制限を超える場合があることに注意してください。

たとえば、1分あたり1万通のレート制限で7万5000通のメッセージを送ろうとすると、配信は8分間に分散される。キャンペーンでは、最初の7分間は10,000、最後の1分間は5,000のメッセージを配信する。 

### 考慮事項

レート制限を使用して送信されたメッセージは、レート制限設定（1分あたり10,000など）が60秒にわたって均等に送信されることはない。その代わり、Brazeは1分間に10,000件以上のメッセージが送信されないようにする（これは、10,000件のメッセージのうち、最初の30分以内に送信される割合と、最後の30分以内に送信される割合が高くなることを意味する）。 

このようなレート制限を行うと、時間に敏感なメッセージを遅らせることになるので注意が必要だ。メッセージのオーディエンスが3,000万人であるにもかかわらず、レート制限を毎分10,000に設定した場合、ユーザー群の大部分は翌日までメッセージを受け取らないことになる。 

レート制限のため72時間以上遅れた場合、メッセージは中断されるので注意しよう。キャンペーンを作成したユーザーは、レート制限が低すぎる場合、ダッシュボードとメールでアラートを受け取ります。

## キャンペーン配信速度レート制限

### シングルチャネルキャンペーン

配信速度レート制限のあるシングルチャネルキャンペーンを送信する場合、レート制限はすべてのメッセージに適用される。例えば、レート制限10,000メッセージ/分のメールキャンペーンは、1分間に最大10,000メッセージを送信する。


| 1分あたりの最大メール送信数 | 1分あたりの最大総送信メッセージ数 |
|--------------------------------|----------------------------------------|
| 10,000                         | 10,000                                 |
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

### マルチチャネルキャンペーン

速度レート制限のあるマルチチャネルキャンペーンを送信する場合、各チャネルは他のチャネルから独立して送信される。その結果、以下のようなことが起こる可能性がある：

- 1分間に送信されるメッセージの総数がレート制限を超える可能性がある。例えば、キャンペーンのレート制限が毎分10,000で、メールとSMSを利用する場合、Brazeは毎分最大20,000の合計メッセージ（メール10,000、Webhook10,000）を送信できる。

| 1分あたりの最大メール送信数 | 1分間に送信される最大SMSメッセージ数 | 1分あたりの最大総送信メッセージ数 |
|--------------------------------|--------------------------------------|----------------------------------------|
| 10,000                         | 10,000                               | 20,000                                 |
{: .reset-td-br-1 .reset-td-br-2 .reset-td-br-3 role="presentation" }

- ユーザーは異なるチャンネルを異なる時間に受信する可能性があり、どのチャンネルを最初に受信するかは必ずしも予測できない。 

例えば、メールとSMSを含むキャンペーンを送る場合、有効な電話番号を持つユーザーが10,000人いても、有効なメールアドレスを持つユーザーが50,000人いるかもしれない。キャンペーンを1分あたり100メッセージ（キャンペーンサイズに対して遅いレート制限）を送信するように設定した場合、ユーザーは最初の送信バッチでSMSを受信し、最後の送信バッチでほぼ9時間後にメールを受信する可能性がある。

### マルチプラットフォームプッシュ通知キャンペーン

複数のプラットフォームで配信されるプッシュ通知キャンペーンの場合、選択されたレート制限はプラットフォーム間で均等に分配されます。1 分あたり 10,000 件のレート制限がある Android と iOS を活用したプッシュ通知キャンペーンでは、10,000 件のメッセージが 2 つのプラットフォームに均等に配信されます。

| 1分間に送信されるAndroid通知の最大数 | 1分間に送信されるiOSプッシュ通知の最大数 | 1分間に送信されるプッシュ通知の最大総数 |
|--------------------------------|--------------------------------------|----------------------------------------|
| 10,000                         | 10,000                               | 10,000                                 |
{: .reset-td-br-1 .reset-td-br-2 .reset-td-br-3 role="presentation" }

## キャンバスの配信速度レート制限

レート制限のあるキャンバスを送信する場合、各チャンネルは他のチャンネルから独立して送信される。その結果、以下のようなことが起こる可能性がある：

- 1分間に送信されるメッセージの総数がレート制限を超える可能性がある。 
    - 例えば、キャンバスのレート制限が毎分10,000で、メールとアプリ内メッセージを利用する場合、Brazeは毎分合計20,000メッセージ（メール10,000、アプリ内メッセージ10,000）まで送信できる。

- レート制限は、ユーザーがキャンバスでメッセージを受信する順番に影響を与える可能性がある。 
    - 例えば、メールとプッシュ通知を含むキャンバスを50,000人のユーザーに送信する場合、50,000人全員が有効なメールアドレスを持っていても、有効なプッシュトークンを持っているのは10,000人かもしれない。この場合、1分間に1,000メッセージを送信するようにキャンバスを設定し、メールとプッシュ通知の両方を含むマルチチャネルキャンバスステップがある場合、プッシュ通知のみを受信し、まだメールを受信していないユーザーが次のキャンバスステップに進むことができる（そして、この次のステップを受信する資格がある）可能性がある。 

## 新旧レート制限動作の概要

お客様のBrazeアカウントは現在、以前の配信速度レート制限動作を使用している。以下の情報は、以前と新しい配信速度レート制限動作の全体的な違いの詳細である：

- **単一チャネルキャンペーンとキャンバス：**レート制限は常にすべてのメッセージに適用される。
- **マルチチャネルキャンペーンとキャンバス（マルチプラットフォームプッシュを含む）：**


<style>
table td {
    word-break: normal;
}
</style>

<table>
  <tr>
    <th></th>
    <th><b>キャンペーン</b></th>
    <th><b>キャンバス</b></th>
  </tr>
  <tr>
    <td><b>前へ</b></td>
    <td>各チャネルに個別に適用され、プッシュプラットフォーム*はまとめて上限を共有する</td>
    <td>各チャネルに個別に適用され、プッシュプラットフォーム*はまとめて上限を共有する</td>
  </tr>
  <tr>
    <td><b>新規</b></td>
    <td>チャネルおよびプッシュ・プラットフォームごとに個別に適用される。</td>
    <td>共同で共有する</td>
  </tr>
</table>

_\*プッシュプラットフォームが含まれる：Android、iOS、Webプッシュ、Kindle。_