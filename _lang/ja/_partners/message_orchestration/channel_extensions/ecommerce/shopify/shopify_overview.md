---
nav_title: Shopify概要
article_title: "Shopify概要"
description: "このリファレンス記事では、Braze と Shopify のパートナーシップについて説明します。Shopify はグローバルなコマース企業であり、Shopify ストアを Brazeとシームレスに接続して、選択した Shopify Webhook を Braze に渡すことができます。Braze クロスチャネル戦略とキャンバスを活用して、顧客が購入を完了するように促し、購入履歴に基づいてユーザーをリターゲティングできます。"
page_type: partner
search_tag: Partner
alias: /shopify_overview/
page_order: 0
---

# Shopify概要

> [Shopifyは](https://www.shopify.com/)、あらゆる規模のビジネスを開始、成長、マーケター、管理するための信頼できるツールを提供する世界的なコマースのリーディングカンパニーである。Shopifyは、信頼性の高いプラットフォームとサービスを提供し、世界中の消費者により良いショッピング体験を提供することで、すべての人にとって商取引をより良くします。

BrazeとShopifyの統合は、カスタマーエンゲージメントを強化し、パーソナライズされたマーケティング活動を推進したいと考えているeコマース企業に強力なソリューションを提供する。この統合は、Shopifyの堅牢なeコマース機能と当社の高度なカスタマーエンゲージメントプラットフォームをシームレスに接続し、リアルタイムのショッピング行動や顧客データに基づいて、ターゲットを絞った適切かつタイムリーなメッセージをユーザー群に配信することを可能にする。

## 要件

| 要件 | 説明 |
| --- | --- |
| Shopify ストア | Shopifyストアをアクティブにしている。 |
| Shopifyストアオーナーまたはスタッフの権限 | {::nomarkdown}<ul><li>すべての一般設定とオンラインストア設定にアクセスできる。</li><li> 追加の管理者権限：</li><ul><li>注文数:ビュー</li><li>顧客だ：リードライト</li><li>顧客イベントを見る（Webピクセル）</li><li>設定の管理</li><li>スタッフ／共同開発者のアプリを見る</li><li>アプリとチャネルをマネージャー／インストールする</li><li>カスタムピクセルのマネージャー／追加</li></ul></ul>{:/} |
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

## どのように統合するか 

Brazeは、Shopify加盟店向けに、eコマースビジネスの多様なニーズを満たすように設計された2つの統合オプションを提供している：**標準統合と** **顧客統合**。

### 標準的な統合

[標準的な統合は]({{site.baseurl}}/shopify_standard_integration/)Shopifyオンラインストア用に調整されており、シームレスで簡単なセットアッププロセスを提供する。このオプションを使用すると、ShopifyストアをBrazeにすばやく接続することができ、専門知識がなくても強力なカスタマーエンゲージメントツールを活用することができる。この統合オプションにより、顧客データの同期、パーソナライズされたメッセージングの自動化、包括的なBraze機能によるマーケティングの強化が可能になる。

### 顧客統合

カスタムインテグレーションは、Shopify Hydrogenを使用している場合やヘッドレスストアをサポートしている場合に、より柔軟でコンポーザブルなソリューションを提供する。このオプションは、Shopify環境に直接Braze SDKを実装し、より深い統合とカスタマイズされた機能を可能にする。ユニークなカスタマーエクスペリエンスを作りたい場合でも、特定のワークフローを最適化したい場合でも、[カスタムインテグレーションは]({{site.baseurl}}/shopify_custom_integration/)、ヘッドレスセットアップでBrazeの機能をフルに活用するために必要なツールを提供する。

## 連携の仕組み

コンフィギュレーション設定でヒストリカル・バックフィルをすでに設定し、オンにしている場合は、最初のデータ同期がすぐに開始される。Brazeは、Shopifyに接続する90日前のすべての顧客と注文イベントをインポートする。BrazeがShopify顧客をインポートする際、設定にて選択した`external_id` タイプを割り当てる。

最初のデータ同期後、BrazeはShopifyとBraze SDKから直接、新しいデータと更新を継続的に追跡する。

{% alert note %}
既存のBraze顧客で、アクティブなキャンペーンやCanvasesをご利用の場合は、[Shopifyの履歴を]({{site.baseurl}}/shopify_features#historical-backfill)確認し、重要な情報を入手する。具体的にどのような顧客データが埋め戻されているかは、[Shopifyの機能を]({{site.baseurl}}/shopify_features/#shopify-data)参照されたい。
{% endalert %}

### ユーザーとデータの同期

統合が始まると、BrazeはShopifyとの統合を通じて2つの主要なソースからユーザーデータを収集する：
- **Shopify Web Pixel APIとアプリ埋め込み：**これにより、Braze Web SDKとJavascript SDKがパワーアップし、オンサイトトラッキング、ID管理、eコマース行動データ、アプリ内メッセージなどのメッセージングチャネルをサポートする。
- **ShopifyのWebhook：**eコマースの行動データ、商品同期、サブスクライバー収集

統合オンボーディングの際に、Braze SDKが初期化され、Shopifyサイトを読み込むタイミングを選択する必要がある： 
- 訪問時（セッション開始時など）
    - **何をするのか？**ゲストショッパーなどの匿名ユーザーをトラッキング追跡し、より深いパーソナライゼーションのためのデータにアクセスする。 
- アカウント登録時（アカウントログインなど） 
    - **何をするのか？**より保守的でプライバシーを重視したアプローチのため、匿名ユーザーによるトラッキング追跡を防止し、ユーザーがアカウントにサインインした*後に*ユーザーのアクティビティが追跡される。

{% alert note %}
- Webサイトへの訪問（セッション）は、月間アクティブユーザー数（MAU）の割り当てにカウントされる。
- Braze Web SDKとJavaScript SDKのバージョンは自動的にv5.4.0に設定される。
{% endalert %}

Brazeは、Shopifyの統合を使用して、ユーザーがゲストとしてショッピングを体験してから識別されたユーザーになるまでを追跡する複数の識別子をサポートする：

| ブレイズ識別子 | 説明 |
| --- | --- |
| Braze `device_id` | Braze SDKを通じて匿名ユーザーの活動をトラッキングするために、ブラウザに保存されるランダムに生成されるID。 |
| カートクンユーザーエイリアス | Brazeがカート更新イベントをトラッキングするために作成するエイリアス。このトークンは、Shopifyカートトークンを使用して作成される。 |
| チェックアウトトークンユーザーエイリアス | ユーザーがチェックアウトプロセスを開始する際にBrazeが作成するエイリアス。このトークンは、Shopifyのチェックアウトトークンを使用して作成される。 |
| Shopify顧客IDエイリアス | Shopify顧客IDは、アカウントログイン時または注文時に外部IDが割り当てられる際にエイリアスとして割り当てられる。 |
| Braze `external_id` | デバイスやプラットフォームを横断して顧客を追跡するのに役立つ一意の識別子。これにより、ユーザーがデバイスを切り替えたり、アプリを再インストールしたりしても、ユーザープロファイルが複数存在しないため、一貫したユーザーエクスペリエンスが維持され、分析が向上する。<br><br>Shopifyとの統合は、以下の`external_id` ：<br><br>{::nomarkdown}<ul><li>Shopify顧客ID（デフォルト）</li><li>ハッシュされたメール (SHA-256)</li><li>ハッシュされたメール (SHA-1)</li><li>ハッシュされたメール (MD5)</li><li>メール</li></ul>{:/}Brazeは、SDKのchangeUserメソッドを呼び出すことで、ユーザーに`external_id` ：<br><br>{::nomarkdown}<ul><li>ユーザーがログインするか、アカウントを作成する。</li><li>発注が行われている</li></ul>{:/}<br> 匿名プロファイルに`external_id` を割り当てた場合の詳細については、[ユーザープロファイルのライフサイクルを]({{site.baseurl}}/user_guide/data/user_data_collection/user_profile_lifecycle#what-happens-when-you-identify-anonymous-users)参照のこと。<br><br>Brazeはまた、`external_id` を活用して、ShopifyのWebhookから下流のeコマース行動データを属性化する。|
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

この統合には、Braze SDKとShopifyサービスが連携し、Shopifyデータをほぼリアルタイムで適切に追跡し、適切なユーザーに属性付けする必要がある。統合によってトラッキング, 追跡されるデータの詳細については、[Shopifyデータを]({{site.baseurl}}/shopify_features#shopify-data)参照のこと。

{% alert note %}
- 統合をテストしている場合は、シークレットモードを使用するか、CookieをクリアしてBraze`device_id` をリセットし、匿名ユーザーの行動を模倣することをお勧めする。
- Shopifyの顧客IDは、Shopifyのニュースレターフッターにメールが入力された時や、注文前のチェックアウトプロセス中に生成されるにもかかわらず、その顧客IDはShopify Web Pixelsからはアクセスできない。このため、Brazeはこの2つの状況では`changeUser` 。
{% endalert %}

### ShopifyのメールとSMSマーケティングのオプトインを同期する

コンフィギュレーション設定でサブスクライバーコレクションを有効にした場合、Brazeに接続する各ストアにサブスクリプショングループを割り当てる必要がある。つまり、顧客はあなたのストアのサブスクリプショングループに「サブスクライバー」または「配信停止」のどちらかに分類される。

メールとSMSマーケティングのShopifyマーケティングオプトインステータスは、以下の方法で更新できる：
- **手動更新だ：**ユーザーのメールまたはSMSマーケティングのオプトインステータスは、Shopifyの管理画面で手動で変更することができる。
- **Shopifyニュースレターのフッター：**ユーザーがShopifyデフォルトのニュースレターフッターにメールを入力すると、オプトインステータスが更新される。
- **チェックアウトのプロセス：**ユーザーがチェックアウト中にオプトインのステータスを更新した場合。

{% alert note %}
Shopifyからのメールマーケティングオプトインステータスは、Brazeのユーザーの[グローバルメール購読ステータスを]({{site.baseurl}}/user_guide/message_building_by_channel/email/managing_user_subscriptions/)変更しない。ユーザープロファイルが作成されたときのデフォルトのサブスクリプション状態は、"subscribe "である。サブスクリプショングループをキャンペーンまたはキャンバスのエントリ基準の一部として使用することを忘れないこと。
{% endalert %}

この表は、どのShopifyマーケティングのオプトインのステータスが、サブスクリプショングループ内のステータスと関連しているかを示している。 

| Shopifyマーケティングのオプトイン状態 | サブスクリプショングループの状態 |
| --- | --- |
| メールがサブスクライバーに登録される | 配信登録済み |
| メールが配信停止になっている | 配信停止済み |
| メールは確認中である。 | 配信停止済み |
| メールが無効です | 配信停止済み |
| SMSサブスクライバー | 配信登録済み |
| SMS配信停止 | 配信停止済み |
{: .reset-td-br-1 .reset-td-br-2 role="presentation"}

### 登録フォーム

#### Shopifyニュースレターフッター

Shopifyのニュースレターフッターにメールアドレスを入力したユーザーは、これらのワークフローのいずれかを経験することになる：

##### アカウントにログインしていないユーザー

1. 顧客が作成または更新されるたびに、BrazeはShopifyのWebhookを受信する。
2. Brazeは、そのユーザーに関連付けられているメール・アドレスとShopify顧客IDエイリアスを含むユーザープロファイルを作成する。
3. Braze SDKは、匿名プロファイルをメールで更新する。

{% alert note %}
その結果、ユーザーがアカウントを作成したり、アカウントにログインしたり、注文を行うなどして識別するまで、プロファイルが重複する可能性がある。Brazeは、重複プロファイルの照合を自動化するための一括マージツールを提供している。詳細は[重複ユーザーを]({{site.baseurl}}/user_guide/engagement_tools/segments/user_profiles/duplicate_users/)参照のこと。
{% endalert %}

##### アカウントにログイン済みのユーザー

Brazeは、そのユーザーに関連付けられているメール・アドレスとShopify顧客IDエイリアスを含むユーザープロファイルを作成する。Brazeは、ログインユーザーのメールアドレスを更新しない。なぜなら、Shopifyがすでにこの情報を提供していると想定しているからだ。

#### Braze登録フォーム

Brazeは2種類の登録フォームテンプレートを提供している：
- **[メール登録フォーム]({{site.baseurl}}/user_guide/message_building_by_channel/in-app_messages/drag_and_drop/templates/email_capture/)：**ドラッグ＆ドロップ・エディターを使って作成する。
- **[伝統的なエディターのメールキャプチャフォーム]({{site.baseurl}}/user_guide/message_building_by_channel/in-app_messages/traditional/customize/email_capture_form/)：**メールアドレスを取得するための、よりわかりやすいフォームだ。

これらのサインアップフォームテンプレートを使用すると、Brazeは自動的にユーザープロファイルのグローバルメール購読ステータスを更新する。グローバルサブスクリプションの状態がどのように扱われるかについての詳細（メールのバリデーションに関する情報を含む）については、各フォームテンプレートタイプのドキュメントを参照のこと。

{% alert note %}
キャンペーンまたはキャンバスに、グローバルメールサブスクリプションステータスと、Shopifyストアに接続されているサブスクリプショングループの両方を含むエントリ基準を必ず含めること。これにより、適切なオーディエンスをターゲットにしていることを確認できる。
{% endalert %}

#### サードパーティの登録フォーム 

サードパーティのプラットフォームやShopifyのプラグインをサインアップフォームに使用している場合は、フォーム送信からメールアドレスとグローバルメール購読ステータスを取得するために、開発者と協力してBraze SDKコードを統合する必要がある。詳細については、[Shopify標準統合セットアップと]({{site.baseurl}}/shopify_standard_integration/) [Shopifyカスタム統合セットアップを]({{site.baseurl}}/shopify_custom_integration/)確認する。

### 製品同期 

Brazeは、Shopifyストアの商品をBrazeカタログに同期する機能をサポートしている。詳細は[Shopify product syncs]({{site.baseurl}}/shopify_catalogs/) を参照。

## データ対象者の要求

BrazeプラットフォームのShopify統合の一環として、Brazeは[ShopifyのコンプライアンスWebhookを](https://shopify.dev/docs/apps/build/privacy-law-compliance/)自動的に受信する。ただし、顧客はそのエンドユーザーデータのデータコントロール者であるため、顧客は、Brazeのエンドユーザーデータ（Shopify統合を通じて受領したエンドユーザーデータを含む）に関して受領したデータ件名リクエストに対応するために必要なアクションを実行しなければならない。詳細は[データ保護テクニカル・アシスタンス]({{site.baseurl}}/dp-technical-assistance)・ドキュメントを参照のこと。