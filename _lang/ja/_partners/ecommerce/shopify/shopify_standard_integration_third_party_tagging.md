---
nav_title: Shopify標準統合とサードパーティタギング
article_title: "Shopify標準統合とサードパーティタギング"
description: "この参考記事では、Shopifyの標準的な統合とサードパーティのタグツールの設定方法について概説している。"
page_type: partner
search_tag: Partner
alias: /shopify_standard_integration_third_party_tagging/
page_order: 2
---

# Shopify標準のサードパーティタグツールとの統合

> このページでは、Googleタグマネージャーのようなサードパーティツールを[Shopify標準インテグレーションで]({{site.baseurl}}/shopify_standard_integration/)使用し、Braze Web SDKを初期化して読み込む方法をご案内します。

Shopifyオンラインストアの場合は、Brazeの標準的な統合方法を使用して、サイトでBraze SDKをサポートすることを推奨する。しかし、Googleタグマネージャーのようなサードパーティツールの使用を希望されることも理解している。BrazeのShopifyコネクターでサードパーティツールを使用する場合は、Brazeインテグレーションとアプリ埋め込みがチェックアウトプロセス中にSDKを管理することに留意すること。

## 要件

- **サードパーティツールとShopifyコネクタ間のAPIキーを統一する：**APIキーは、Brazeとサードパーティツールの両方で一貫していなければならない。これにより、ユーザーの重複を防ぎ、SDK間の互換性を保つことができる。 
  - **APIキーの場所：**標準の統合パスでオンボーディングした後、統合は自動的に "Shopify "という名前のBrazeウェブアプリを作成する。サードパーティツールの設定で使用される統合内のAPIキーを取得する。 
- **サードパーティツールとShopifyコネクタのSDKバージョンを統一する：**SDKのバージョンは、サードパーティ・ツール内部で`5.4` 。誤ったバージョン番号を使用すると、古いバージョンには存在しないSDKメソッドがあるため、非互換性の問題が発生する可能性がある。
- **SDK 初期化のタイミングを統一する：**Shopifyの標準統合設定の中で、セッション開始時またはアカウントログイン時に初期化するSDKを選択することができる。この設定は、サードパーティツールとBrazeの間で一貫している必要がある。不整合は、ユーザーやデータ同期における下流の問題につながる可能性がある。 

{% alert note %}
Braze SDKとサードパーティ製ツールの間でコンフリクトが発生する可能性があるため、サードパーティ製タグマネージャーと併用するのではなく、標準的な統合方法のみを使用することを推奨する。サードパーティ製のツールを使用する場合は、すべてが期待通りに機能することをテストして確認すること。
{% endalert %}

## サードパーティ製ツールとの統合設定

提供されたステップから外れると、思わぬ問題を引き起こす可能性があるので、必ず忠実に守ってほしい。

1. [Shopify標準の統合セットアップで]({{site.baseurl}}/shopify_standard_integration/)提供されているステップに従う。[Braze Web SDKをイネーブルメント]({{site.baseurl}}/partners/ecommerce/shopify/shopify_standard_integration/#step-2-enable-braze-web-sdks)する際、サードパーティツールを使用してShopifyサイトにBraze Web SDKを追加していることを示すボックスにチェックを入れる。

!["Braze SDK設定 "セクションに、サードパーティツールを使用してBraze Web SDKを追加することを示すチェックボックスを追加する。]({% image_buster /assets/img/Shopify/third_party_enable.png %}){: style="max-width:80%;"}

{: start="2"}
2\.**設定**＞**アプリ設定に**進み、**Shopify**Webアプリを選択し、**Shopify on WebのAPIキーを**コピーする。
3\.APIキーをサードパーティツールのウェブSDK設定に貼り付け、SDKバージョンを`5.4` に設定する。

## Shopifyのデータを取得し、ユーザーを同期する。

Web SDKがサードパーティツールを通してShopifyサイトのフロントエンドでアクセス可能である限り、標準の統合は期待通りにShopifyデータを取得し、ユーザーを同期する。

## 考察と免責事項

- **初期化の設定：**サードパーティ製ツールで初期化設定を変更した場合、ユーザーとデータの同期に影響が出る可能性がある。例えば、Cookie同意フォームが受け入れられたときにSDKを初期化するように選択した場合、ユーザーが同意するまで、Brazeは匿名ユーザーやデータのトラッキングを受け取らない。 
- **`dataLayer` 、直接アトリビューションを設定することはサポートされていない：**`dataLayer` 、代わりに`window.braze` 、属性を設定する。
- **重複ユーザーの可能性がある：**APIキーがBrazeとサードパーティツールで一致しない場合、重複したユーザーが作成される可能性がある。
- **SDKの非互換性：**正しくないバージョン番号を使用すると、SDKのメソッドで問題が発生する可能性がある。