---
nav_title: Tealium AudienceStream
article_title:Tealium オーディエンスストリーム
page_order:2
alias: /partners/tealium_audience_stream/
description:「この参考記事では、BrazeとTealiumのパートナーシップについて概説しています。Tealiumは、モバイル、ウェブ、代替データを他のサードパーティソースに接続できるようにするユニバーサルデータハブです。「
page_type: partner
search_tag:Partner

---

# Tealium オーディエンスストリーム

> Tealium [AudienceStreamは](https://docs.tealium.com/server-side/getting-started/audiencestream-cdp/introduction/)、オムニチャネルの顧客セグメンテーションおよびリアルタイムアクションエンジンです。AudienceStreamは、イベントストリームに流入するデータを取り込み、顧客と貴社のブランドとのエンゲージメント最も重要な属性を表す訪問者プロファイルを作成します。 

BrazeとTealiumの統合では、AudienceStreamの訪問者プロファイルが活用されます。行動の共有によってこれらのプロファイルがSegment され、オーディエンスと呼ばれる共通の特徴を持つ訪問者が集まります。これらのオーディエンスは、コネクターを介してマーケティングテクノロジースタックをリアルタイムで強化するのに役立ちます。 

{% alert important %}
Tealium AudienceStreamsとEventStreamsは、バッチコネクターアクションと非バッチコネクターアクションの両方を提供します。リアルタイムリクエストがユースケースにとって重要で、BrazeのAPIレート制限仕様にぶつかる心配がない場合は、非バッチコネクタを使用する必要があります。ご不明な点がございましたら、Braze [サポートまたは顧客]({{site.baseurl}}/braze_support/)サクセスマネージャーにお問い合わせください。
{% endalert %}

## 前提条件

| 名前 | 説明 |
| ---- | ----------- |
| Tealium アカウント | [サーバー側にアクセスできるTealiumアカウントが必要です](https://my.tealiumiq.com/)。このパートナーシップを活用するには、クライアント側の統合も使用することをお勧めします。 |
| REST API キー | 、`users.track`、`users.delete``subscription.status.set`権限が付いた Braze REST API キーです。<br><br>これは **Braze ダッシュボード > デベロッパーコンソール > REST API キー > 新しい API キーの作成で作成できます**|
| \[Braze] REST エンドポイント][6] | あなたの REST エンドポイント URL。エンドポイントは、[インスタンスの Braze URL]({{site.baseurl}}/api/basics/#endpoints) によって異なります。 |
{: .reset-td-br-1 .reset-td-br-2}

## 統合

### ステップ1:属性とバッジの設定

#### 属性を理解する

AudienceStreamを使用する最初のステップは、属性を作成することです。属性を使用すると、訪問者の習慣、好み、行動、ブランドとのエンゲージメントを表す重要な特性を定義できます。 

**訪問属性**:訪問属性は、ユーザーの現在の訪問（またはセッション）に関連しています。これらの属性に保存されたデータは、訪問期間中保持されます。訪問属性の例には次のものがあります。
- 訪問時間 (数)
- 現在のブラウザ (文字列)
- 現在のデバイス (文字列)
- ページビュー数 (数値)

**訪問者の属性**:訪問者属性は現在のユーザーに関連しています。これらの属性に保存されたデータは、ユーザー存続期間中保持されます。訪問者属性の例には次のものがあります。 
- 生涯注文額 (数値)
- ファーストネーム (文字列)
- 生年月日 (日付)
- 購入ブランド (タリー)

利用可能なデータタイプの全リストについては、[Tealiumをご覧ください][1]。

##### 属性強化

必要な属性を特定したら、[エンリッチメント](https://docs.tealium.com/server-side/getting-started/audiencestream-cdp/attributes-enrichments/) (属性の値を更新するタイミングと方法を決定するビジネスルール) を使用して属性を設定できます。各データタイプには、属性の値を操作するための独自のエンリッチメントが用意されています。これは「WHEN」設定に関連付けられています。訪問と訪問者属性ごとに以下のオプションを使用できます。

- 新規訪問者:訪問者が初めてサイトにアクセスしたときに発生します。
- 新規訪問:訪問者による新規訪問時に発生します。
- すべてのイベント:任意のイベントで発生します。
- 訪問終了:訪問が終了したときに発生します。

また、エンリッチメントがいつ行われるかを決定するルールと呼ばれるカスタム条件を作成することもできます。

#### バッジ

バッジは、貴重な行動パターンを表す特別な訪問者属性です。バッジは、エンリッチメントのロジックに基づいて訪問者に割り当てられたり削除されたりします。このロジックは通常、複数の条件を組み合わせて訪問者セグメントを把握したり、特定の値に達したときの閾値を設定したりします。

#### 属性とバッジの例

{% tabs local %}
{% tab Attribute %}

完了したすべての注文（購入イベント）について顧客費やした累積金額（`order_total`）を計算する訪問者属性「Lifetime Order Value」を作成します。Tealiumアカウントで生涯注文額を設定するには、以下の指示に従ってください。

1. **AudienceStream > 訪問者/訪問属性に移動し****、「属性を追加」をクリックします。**
2. スコープを「**訪問者**」として選択し、「**続行**」をクリックします。
3. データタイプ「**番号**」を選択し、「**続行**」をクリックします。
4. 「生涯注文額」という属性名前を入力します。
5. 「**エンリッチメントを追加」をクリックし、「インクリメント**」**または「デクリメント番号**」を選択します。
6. (`order_total`) でインクリメントする値を含む属性を選択します。
7. 「WHEN」は「任意のイベント」のままにして、「**新しいルールを作成**」をクリックします。
8. 購入イベントがいつ発生したかを識別するルールを作成します。
9. 「**保存**」をクリックし、「**完了**」をクリックします。

これで、すべての顧客に生涯注文金額属性関連付けられます。

{% endtab %}
{% tab Badge %}

バッジを作成すると、ユーザーが共有する特定の属性に基づいてユーザーを分類し、ターゲットを絞ることができます。次の例では、「生涯注文額」が500ドルを超えるユーザー向けにVIPバッジを作成します。

1. **AudienceStream > 訪問者/訪問属性に移動し****、「属性を追加」をクリックします。**
2. スコープを「**訪問者**」として選択し、「**続行**」をクリックします。
3. データタイプ「**バッジ**」を選択し、「**続行**」をクリックします。
4. バッジの名前「VIP」を入力します。
5. 「**エンリッチメントを追加**」をクリックし、「**バッジを割り当て**」を選択します。
6. 「WHEN」は「任意のイベント」のままにしておきます。
7. 「ルールを作成」を選択して、**バッジ割り当てのルールを作成します**。このルールにタイトルを割り当て、以前に作成した属性を使用してルールを「...「生涯注文額が500より大きい」という属性があります。
8. \[**保存**] をクリックし、\[**完了**] をクリックします。

{% endtab %}
{% endtabs %}

### ステップ2:オーディエンススを作成

Tealium ホームページから、サイドバーのナビゲーションにある「****AudienceStream」の下にある「オーディエンス****」を選択します。ここでは、共通の属性を持つユーザーのオーディエンス作成できます。ユーザーがこのオーディエンスエントリったり出たりすると、ステップで設定するコネクターアクションがトリガーされ、この情報がBrazeのユーザープロファイル渡されます。 

まず、オーディエンス名前を付けてから、作成しようとしているオーディエンススのタイプにどのような属性が当てはまるかを検討します。たとえば、VIP ユーザーのオーディエンス作成するには、**VIP バッジを持っている訪問者のオーディエンス**作成できます。

終了したら、必ずオーディエンス**保存/公開してください**。

### ステップ3:イベントコネクタの作成

コネクタは、Tealiumとデータ送信に使用される他のベンダーとの統合です。これらのコネクタには、パートナーがサポートする API を表すアクションが含まれています。 

1. Tealiumのサイドバーの「**サーバー側」から、「AudienceStream**」>「**オーディエンスコネクター**」に移動します。
2. 青い \[**\+ コネクタを追加**] ボタンを選択して、コネクタマーケットプレイスを確認します。表示される新しいダイアログボックスで、**スポットライト検索を使用してBrazeコネクタを見つけます**。
3. このコネクタを追加するには、**Braze** コネクタータイルをクリックします。クリックすると、接続の概要と、必要な情報、サポートされているアクション、および設定手順のリストが表示されます。設定は、ソース、構成、アクションの 3 つのステップで構成されます。

#### ソース

**表示されるソースダイアログで**、前のステップで作成したオーディエンスと、状況に適していると思われるトリガーを選択します。フリークエンシーキャップをオンに切り替えて、このアクションがトリガーされる頻度をコントロールすることもできます。 

![] ({% image_buster /assets/img/tealium/create_source.png %}){: style="max-width:90%;"}

#### コンフィギュレーション

次に、**設定ダイアログが表示されます**。ページの下部にある \[**コネクタの追加**] を選択します。コネクタに名前を付け、Braze API エンドポイントと Braze REST API キーをここに入力してください。

![] ({% image_buster /assets/img/tealium/create_configuration.png %}){: style="max-width:70%;"}

以前にコネクタを作成したことがある場合は、オプションで利用可能なコネクタリストから既存のコネクタを使用し、鉛筆アイコンを使用してニーズに合わせて変更したり、ゴミ箱アイコンで削除したりできます。 

このオーディエンスリンクするコネクタを作成または選択したら、「完了」をクリックして続行します。

#### アクション (Action)

次に、コネクタアクションに名前を付け、設定したマッピングに従ってデータを送信するアクションタイプを選択します。ここでは、BrazeアトリビュートをTealium属性名にマップします。選択したアクションタイプに応じて、Tealiumが必要とするフィールドはさまざまです。次に、これらのフィールドの例と説明を示します。

{% alert important %}
入力されたすべてのフィールドが必須というわけではありません。

![] ({% image_buster /assets/img/tealium/minimize.gif %}){: style="max-width:90%"}
{% endalert %}

{% tabs local %}
{% tab Track User (Batch and Non-Batch) %}

このアクションにより、ユーザー、イベント、購入の属性をすべて1つのアクションで追跡できます。ユーザー追跡アクションはAudienceStreamとEventStreamの両方で同じですが、Tealiumでは、AudienceStreamアクションでユーザー属性マッピングを設定し、EventStreamアクションでイベントと購入のマッピング設定することを推奨しています。

| パラメーター | 説明 |
| ---------- | ----------- |
| ユーザー ID | このフィールドを使用して、Tealiumユーザー ID フィールドを対応するBrazeフィールドにマップします。1 つ以上のユーザー ID 属性をマップします。複数の ID を指定すると、空白でない最初の値が次の優先順位に基づいて選択されます。外部 ID、Braze ID、エイリアス名、エイリアスラベル<br><br>-プッシュトークンをインポートする場合、外部IDとBraze IDを指定しないでください。<br>-ユーザーエイリアスを指定する場合は、エイリアス名とエイリアスラベルを設定する必要があります。<br><br>詳細については、Braze [`/users/track`エンドポイント]({{site.baseurl}}/api/endpoints/user_data/post_user_track/)をご覧ください。 |
| ユーザー属性 | Braze の既存のユーザープロファイルフィールド名を使用して、Braze ダッシュボードのユーザープロファイル値を更新したり、[独自のカスタムユーザー属性データをユーザープロファイルに追加したりできます]({{site.baseurl}}/api/objects_filters/user_attributes_object/)。<br><br>-デフォルト、ユーザーが存在しない場合は新しいユーザーが作成されます。<br>-「**既存のみ更新**」を設定すると`true`、既存のユーザーのみが更新され、新しいユーザーは作成されません。<br>-Tealiumの属性が空の場合、その属性はnullに変換され、Brazeユーザープロファイルから削除されます。ユーザー属性削除するためにヌル値をBrazeに送信したくない場合は、エンリッチメントを使用する必要があります。 |
| ユーザー属性の変更 | このフィールドを使用して、特定のユーザー属性をインクリメントまたはデクリメントします。<br><br>-整数属性は、正または負の整数でインクリメントできます。<br>-配列属性は、既存の配列に値を追加または削除することで変更できます。 |
| イベント | イベントは、特定のユーザータイムスタンプ時にカスタムイベントを 1 回だけ発生させたことを表します。このフィールドを使用して、Braze [イベントオブジェクト内のようなイベント属性を追跡およびマッピングします]({{site.baseurl}}/api/objects_filters/event_object/)。<br><br>-`Name` イベント属性は、マップされたすべてのイベントに必要です。<br>-`Time` イベント属性は、明示的にマッピングされていない限り、自動的に now に設定されます。<br>-デフォルト、イベントが存在しない場合は新しいイベントが作成されます。設定`Update Existing Only``true`、既存のイベントのみが更新され、新しいイベントは作成されません。<br>-配列タイプの属性をマップして複数のイベントを追加します。配列型の属性は同じ長さでなければなりません。<br>-単一値属性を使用して各イベントに適用できます。 |
| イベントテンプレート | ボディデータで参照されるイベントテンプレートを提供します。テンプレートを使用して、Braze に送信する前にデータを変換できます。詳細については、[Tealiumのテンプレートガイドを参照してください](https://docs.tealium.com/server-side/connectors/webhook-connectors/trimou-templating-engine/)。 |
| イベントテンプレート変数 | イベントテンプレート変数をデータ入力として提供します。詳細については、[Tealiumのテンプレート変数ガイドを参照してください](https://docs.tealium.com/server-side/connectors/webhook-connectors/template-variables/)。 |
| 購入 | このフィールドを使用して、Braze [購入オブジェクトにあるようなユーザー]({{site.baseurl}}/api/objects_filters/purchase_object/)購入属性を追跡およびマッピングします。<br><br>-購入属性`Product ID`、`Currency`、`Price`は、マップされたすべての購入に必須です。<br>-Purchase `Time` 属性は、明示的にマッピングされていない限り、自動的に now に設定されます。<br>-デフォルト、新規購入品が存在しない場合は新規購入品が作成されます。設定`Update Existing Only``true`、既存の購入のみが更新され、新しい購入は作成されません。<br>-配列タイプの属性をマップして、複数の購入アイテムを追加します。配列型の属性は同じ長さでなければなりません。<br>-単一値属性を使用でき、各項目に適用されます。|
| 購入テンプレート | テンプレートを使用して、Braze に送信する前にデータを変換できます。<br>-ネストされたオブジェクトのサポートが必要な場合は、購入テンプレートを定義してください。<br>-購入テンプレートが定義されている場合、アクションの購入セクションで設定された設定は無視されます。<br>-詳細については、[Tealiumのテンプレートガイドを参照してください](https://docs.tealium.com/server-side/connectors/webhook-connectors/trimou-templating-engine/)。|
| 購入テンプレート変数 | データ入力として製品テンプレート変数を指定します。詳細については、[Tealiumのテンプレート変数ガイドを参照してください](https://docs.tealium.com/server-side/connectors/webhook-connectors/template-variables/)。 |
{: .reset-td-br-1 .reset-td-br-2}

![] ({% image_buster /assets/img/tealium/track_user_example2.png %}){: style="max-width:90%"}

{% endtab %}
{% tab Delete User (Non-Batch) %}

このアクションにより、Braze ダッシュボードからユーザーを削除できます。

| パラメーター | 説明 |
| ---------- | ----------- |
| ユーザー ID | このフィールドを使用して、TealiumユーザーIDフィールドを対応するBrazeフィールドにマップします。<br><br>-1 つ以上のユーザー ID 属性をマップします。複数の ID を指定すると、空白でない最初の値が次の優先順位に基づいて選択されます。外部 ID、Braze ID、エイリアス名、エイリアスラベル<br>-ユーザーエイリアスを指定する場合、エイリアス名とエイリアスラベルの両方を設定する必要があります。<br><br>詳しくは、Braze [`/users/delete`エンドポイント]({{site.baseurl}}/api/endpoints/user_data/post_user_delete/)をご覧ください。 |
{: .reset-td-br-1 .reset-td-br-2}

![] ({% image_buster /assets/img/tealium/track_user_delete2.png %}){: style="max-width:90%"}

{% endtab %}
{% tab Update User Subscription Group Status (Non-Batch) %}
アクションにより、Braze SMS またはメールサブスクリプショングループにユーザーを追加または削除できます。

| パラメーター | 説明 |
| ---------- | ----------- |
| グループタイプ | このフィールドを使用して、これが SMS サブスクリプショングループか E メールサブスクリプショングループかを示します。 |
| 更新タイプ | このアクションを購読解除イベントまたはサブスクリプションイベントにマップします 
| 属性 | -購読グループ ID (必須):前のフィールドマップされたグループタイプに関連するサブスクリプショングループの ID。<br>-外部ID:ユーザー外部 ID。<br><br>メールグループ固有:<br>-電子メール:ユーザーメールアドレス。<br>**外部 ID が定義されていない場合は、メールが必要です。**<br><br>SMS グループ固有:<br>-電話:E.164 形式の電話番号。たとえば、+14155552671 と入力します。<br>**外部 ID が定義されていない場合は、電話が必要になります。** |
{: .reset-td-br-1 .reset-td-br-2}

![] ({% image_buster /assets/img/tealium/update_subscription.png %}){: style="max-width:90%"}

{% endtab %}
{% endtabs %}

\[**完了**] を選択します。

#### まとめ

作成したコネクタの概要を表示します。選択したオプションを変更する場合は、\[**編集に戻る**] または \[**完了**] を選択して完了します。

これで、Tealiumホームページのコネクタのリストにコネクタが表示されます。

終了したら、必ずコネクタを保存または公開してください。設定したアクションは、トリガー接続が満たされたときに実行されるようになりました。 

### ステップ 4:お使いの Tealium コネクタをテストしてください

コネクタが起動したら、テストして正しく動作していることを確認する必要があります。これをテストする最も簡単な方法は、**Tealiumトレースツールを使用することです**。Traceを使い始めるには、Tealium Toolsのブラウザ拡張機能を追加していることを確認してください。

1. 新しいトレースを開始するには、サイドバーの \[**サーバー側オプション**] で \[**トレース**] を選択します。\[**開始**] をクリックし、トレース ID をキャプチャします。
2. ブラウザー拡張機能を開き、AudienceStream トレースにトレース ID を入力します。
3. リアルタイムログを調べてください。
4. 「Actions **Triggered」エントリをクリックして展開し、検証するアクションを確認します**。
5. 検証したいアクションを探し、ログステータス。 

Tealiumのトレースツールを参照してください's [Trace documentation][21] for more detailed instructions on implementing Tealium'。

## インテグレーションデモ

<div class="video-container">
  <iframe width="560" height="315" src="https://drive.google.com/file/d/1m2JI4vdFt3fDePBdVvVcQWEjbC82ApGA/preview" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

## データポイント超過の可能性

Tealiumを通じてBrazeを統合する際に、誤ってデータオーバーに陥る主な原因は3つあります。

#### 重複データの送信-属性のBrazeデルタのみを送信
't send Braze deltas of user attributes. For example, if you have an EventStream action that tracks a user'Tealiumは名、電子メール、携帯電話番号を入力するので、アクションがトリガーされるたびに、Tealiumは3つの属性すべてをBrazeに送信します。Tealiumは、変更点や更新内容を探すことはせず、その情報のみを送信します。<br><br> 
**解決策**:<br>バックエンドをチェックして属性変更されたかどうかを評価し、変更された場合は、Tealiumの関連メソッドを呼び出してユーザープロファイル更新できます。**これは、Brazeを直接統合するユーザーが通常行うことです。**<br>**または**<br> 't store your own version of a user profile in your backend and can'属性が変更されたかどうかわからない場合は、[AudienceStreamを使用してエンリッチメントを作成し](https://docs.tealium.com/server-side/attributes/manage-enrichments/add-enrichment/)、値が変更された場合にのみユーザー属性を送信できます。 

#### 無関係なデータを送信したり、データを不必要に上書きしたりする
同じイベントフィードをターゲットとする複数のEventStreamがある場合、**そのコネクタで有効になっているすべてのアクションは**、1つのアクションがトリガーされるたびに自動的に起動します。**これにより、Brazeでデータが上書きされる可能性もあります**。<br><br>
**解決策**:<br>個別のイベント仕様またはフィードを設定して、各アクションを追跡します。<br>**または**<br> Tealiumダッシュボードのトグルを使用して、起動させたくないアクション（またはコネクタ）を無効にします。

#### Braze の初期化が早すぎる
Braze Web SDKタグを使用してTealiumと統合したユーザーは、MAUが劇的に増加することがあります。**ページの読み込む時に Braze が初期化されると、ウェブユーザー初めてWeb サイトに移動するたびに Braze は匿名プロファイル作成します。**MAU数を減らすために、ユーザーが「サインイン」や「ビデオ視聴」などの何らかのアクションを完了したときのみユーザー行動を追跡したい場合があります。<br><br>
**解決策**:<br>[読み込むルールを設定して](https://docs.tealium.com/iq-tag-management/load-rules/about/)、サイトのタグが読み込まれるタイミングと場所を正確に決定します。

[1]: https://docs.tealium.com/server-side/attributes/about/
[15]: {% image_buster /assets/img/tealium/create_configuration.png %}
[6]: {{site.baseurl}}/api/basics?redirected=true#endpoints
[21]: https://docs.tealium.com/server-side/connectors/trace/about/
[17]: {% image_buster /assets/img/tealium/save_publish.png %}
