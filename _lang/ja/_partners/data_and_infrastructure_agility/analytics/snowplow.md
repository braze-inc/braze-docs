---
nav_title: Snowplow
article_title:除雪車
description:「この参考記事では、Brazeとオープンソースデータ収集プラットフォームであるSnowplowのパートナーシップについて概説しています。これにより、Googleタグマネージャーのサーバー側タグ付けを通じてSnowplowイベントをBrazeに転送できます。「
alias: /partners/snowplow/
page_type: partner
search_tag:Partner

---

# 除雪車

> [Snowplow][1] は、高品質、低レイテンシーデータ収集を実現するスケーラブルなオープンソースプラットフォームです。エンタープライズビジネス向けの高品質で完全な行動データを収集するように設計されています。

BrazeとSnowplowの統合により、ユーザーはGoogleタグマネージャーのサーバー側のタグ付けを通じてSnowplowイベントをBrazeに転送できます。Snowplow Brazeタグを使用すると、柔軟性とコントロール性を向上させながら、Brazeにイベントを送信できます。
- データ上のすべての変換を完全に可視化
- 時間をかけて洗練を進化させる能力
- 転送を選択するまで、すべてのデータはプライベートクラウドに残ります
- 豊富なタグライブラリと使い慣れた Google タグマネージャー UI によるセットアップのしやすさ

Snowplowの豊富な行動データを活用して、Brazeで顧客中心の強力なインタラクションを促進し、パーソナライズされたメッセージをリアルタイムで配信します。

## 前提条件

| 必要条件 | 説明 |
| ----------- | ----------- |
| 除雪車パイプライン | Snowplow パイプラインが稼働している必要があります。 |
| Google タグマネージャーサーバーサイド | GTM-SS をデプロイし、GTM-SS 用の [Snowplow クライアントをセットアップする必要があります][2]。 |
| Braze REST API キー | `users.track`権限のあるBraze REST APIキー。<br><br> これは Braze ダッシュボードの **\[設定] > \[**API キー**]** から作成できます。 |
| Braze REST エンドポイント | [あなたの REST エンドポイント URL][3]。エンドポイントは、インスタンスの Braze URL によって異なります。 |
{: .reset-td-br-1 .reset-td-br-2}

## ユースケース

### パーソナライズされたアクションベースの配信
Snowplowがデフォルト収集する多数の豊富なイベントのいずれかを使用するか、カスタムイベントを定義して、ビジネスにとって意味のあるより詳細な顧客マージャーニーを形成します。Snowplow の豊富な行動データを活用して顧客ファネルを設計し、マーケティングチームや製品チームに価値をもたらし、Braze を通じてコンバージョン率と製品利用率を最大化できるようにします。

### ダイナミックセグメンテーション
Snowplowの高品質な行動データに基づいて、Brazeでダイナミックなオーディエンスを作成しましょう。ユーザーが製品、アプリ、またはWeb サイトでアクションを実行すると、Snowplowが収集するリアルタイムの行動データを活用して、Brazeの関連セグメントにユーザーを自動的に追加または削除できます。

## 統合

### ステップ1:テンプレートインストール

#### 手動インストール

1. [`template.tpl`][7]テンプレートファイルをダウンロードします。
2. Google **タグマネージャーサーバーコンテナのテンプレートセクションに新しいタグを作成します**。
3. 右上隅の \[**その他のアクション**] メニューをクリックし、\[**インポート**] を選択します。
4. ダウンロードしたテンプレートファイルをインポートして保存します。

#### タグマネージャーギャラリー

近日公開！このタグは GTM ギャラリーへの掲載が承認待ちです。

### ステップ2:Braze タグセットアップ

テンプレートをインストールしたら、GTM-SS コンテナに Braze タグを追加します。

1. 「**タグ**」タブから「**新規**」を選択し、タグ設定として **Braze タグを選択します**。
2. Brazeに転送したいイベントのトリガーを選択してください。
3. 必要なパラメータを入力し、タグを設定します (詳細については、次の「カスタマイズ」セクションを参照してください)。
4. \[**保存**] をクリックします。

## カスタマイズ

### 必須タグパラメーター

次の表は、Braze タグ設定に含める必要のある必須タグパラメーターの一覧です。

| パラメーター | 説明 |
| --------- | ----------- |
| Braze REST API エンドポイント | これをお使いの Braze REST [エンドポイント][3]の URL に設定してください。 |
| Braze API キー | これを、各リクエストに含まれる Braze [API キーに設定します][4]。 |
| Braze `external_id` | このキーを、`external_id`ユーザーのものに対応するクライアントイベントプロパティに設定し、[Braze ユーザー識別子][5]として使用します。 |
{: .reset-td-br-1 .reset-td-br-2}

### イベントマッピング

[次の表は、Snowplowクライアント要求するSnowplowイベントに関するイベントマッピングオプションを示しています。][2]

| マッピングオプション | 説明 |
| --------- | ----------- |
| 自己記述型イベントを含める | デフォルトではオンになっています。Snowplowの自己記述型イベントデータが、Brazeに送信されるイベントのプロパティオブジェクトに含まれるかどうかを示します。 |
| 除雪車のイベントコンテキストルール | Braze タグが Snowplow イベントに添付されたコンテキストエンティティをどのように使用するかについて説明します。 |
| 単一要素の場合、配列からエンティティを抽出 | 同じエンティティを複数イベントにアタッチできるため、Snowplow エンティティは常に配列になっています。このオプションは、配列に要素が 1 つしかない場合、配列から 1 つの要素を選択します。 |
| すべてのエンティティをイベントオブジェクトに含める | デフォルトではオンになっています。イベントのすべてのエンティティを Braze イベントのプロパティオブジェクトに含めます。このオプションを無効にすると、含めるエンティティを個別に選択できます。 |
{: .reset-td-br-1 .reset-td-br-2}

### 高度なイベントマッピング

#### イベントプロパティルール

クライアントイベントの他のプロパティを含めて Braze イベントにマッピングする場合は、次の表のルールを参照してください。 

| イベントプロパティルール | 説明 |
| --------- | ----------- |
| 共通のイベントプロパティを含める | このオプションはデフォルト有効になっており、[共通イベント定義のイベントプロパティをBrazeイベントのプロパティに自動的に含めるかどうかを設定します][6]。 |
| その他のユーザープロパティとイベントプロパティのマッピングルール | クライアントイベントのプロパティキーと、それをマップするプロパティのオブジェクトキーを指定します (または、マップされたキーを空白のままにして同じ名前を維持します)。ここでは、キーパス表記を使用するか（`x-sp-tp2.p`たとえば、`x-sp-contexts.com_snowplowanalytics_snowplow_web_page_1.0.id` SnowplowイベントプラットフォームまたはSnowplowイベントページのビューID（配列インデックス0））、代替クライアントを使用する場合はSnowplow以外のプロパティを選択できます。<br><br>イベントプロパティマッピングルールは Braze イベントプロパティオブジェクトに入力されます。|
| 共通のユーザープロパティを含める| このオプションはデフォルト有効になっており、`user_data`共通イベント定義のプロパティを Braze ユーザー属性オブジェクトに含めるかどうかを設定します。|
| イベント時間プロパティ | このオプションでは、クライアントイベントプロパティを指定してイベント時間を入力するか (ISO-8601形式)、空のままにして現在の時刻を使用できます (デフォルト動作)。 |
{: .reset-td-br-1 .reset-td-br-2}

### エンティティマッピング

Snowplow エンティティマッピングテーブルを使用すると、エンティティを Braze で別の名前に再マップし、イベントプロパティまたはユーザー属性オブジェクトに含めることができます。 

エンティティは次の 2 つの形式で指定できます。
- メジャーバージョンマッチ`x-sp-contexts_com_snowplowanalytics_snowplow_web_page_1`:`com_snowplowanalytics_snowplow`はイベントベンダー、`web_page`はスキーマ名、`1`はメジャーバージョン番号です。`x-sp-`必要に応じてこれを省略することもできます。
- スキーマの完全一致: `iglu:com.snowplowanalytics.snowplow/webPage/jsonschema/1-0-0`
<br><br>

| エンティティマッピングオプション | 説明 |
| --------- | ----------- |
| マップされていないエンティティをイベントに含める | 前述のカスタマイズで一部のエンティティをユーザー属性に再マップまたは移動する場合、このオプションを使用すると、マップされていないすべてのエンティティ（[イベントプロパティルールにないエンティティなど）がBrazeイベントのプロパティオブジェクトに確実に含まれるようになります](#event-property-rules)。 |
{: .reset-td-br-1 .reset-td-br-2}

[1]: https://snowplowanalytics.com
[2]: https://docs.snowplowanalytics.com/docs/forwarding-events-to-destinations/forwarding-events/google-tag-manager-server-side/snowplow-client-for-gtm-ss/
[3]: {{site.baseurl}}/developer_guide/rest_api/basics/#endpoints
[4]: {{site.baseurl}}/developer_guide/rest_api/basics/#app-group-rest-api-keys
[5]: {{site.baseurl}}/developer_guide/rest_api/basics/#external-user-id-explanation
[6]: https://developers.google.com/tag-platform/tag-manager/server-side/common-event-data
[7]: https://github.com/snowplow/snowplow-gtm-server-side-braze-tag/blob/main/template.tpl
