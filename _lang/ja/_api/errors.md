---
nav_title: エラーとレスポンシブ
article_title: APIエラーとレスポンス
description: "この参考記事では、Braze APIの使用中に発生する可能性のあるさまざまなエラーとサーバーレスポンス、およびそれらのトラブルシューティング方法について説明する。"
page_type: reference
page_order: 2.3

---
# APIのエラーとレスポンス

> この参考記事では、Braze APIの使用中に発生する可能性のあるさまざまなエラーとサーバーレスポンス、およびそれらのトラブルシューティング方法について説明する。

{% raw %}

## サーバーの応答

POSTペイロードがサーバーに受け入れられた場合、成功したメッセージには以下のレスポンスが返される：

```json
{
  "message" : "success"
}
```

成功とは、RESTful API ペイロードが正しく形成され、プッシュ通知やメール、またはその他のメッセージングサービスに渡されたことだけを意味することに注意してください。これは、メッセージが実際に配信されたことを意味するものではない。メッセージが配信されるのを妨げる要因が追加される可能性があるからだ（たとえば、デバイスがオフラインになっていたり、プッシュトークンがアップルのサーバーによって拒否されたり、不明なユーザーIDを入力した可能性がある）。

メッセージは成功したが致命的でないエラーがあった場合、次のようなレスポンシブが返ってくる：

```json
{
  "message" : "success", "errors" : [<minor error message>]
}
```

成功の場合、`errors` のエラーに影響されなかったメッセージは、そのまま配信される。メッセージに致命的なエラーがあった場合、次のようなレスポンシブが返ってくる：

```json
{
  "message" : <fatal error message>, "errors" : [<minor error message>]
}
```

## 追跡された送信 ID に対する応答

アナリティクスは常にキャンペーンで利用できる。さらに、キャンペーンがブロードキャストとして送信された場合、特定のキャンペーン送信インスタンスに対してアナリティクスが利用できる。特定のキャンペーン送信インスタンスでトラッキング追跡が利用可能な場合、以下のレスポンスを受け取る：

```json
{
  "message": "success", "send_id" : "example_send_id"
}
```

指定された送信 id は、`/send/data_series` エンドポイントのパラメーターとして使用して、送信固有の分析をプルすることができます。

## エラー数

サーバーレスポンスのステータスコード要素は3桁の数字であり、コードの最初の桁がレスポンスのクラスを定義する。

- **2XX クラス**のステータスコード (致命的ではない) は、**リクエスト**が正常に受信され、理解され、受け入れられたことを示します。
- **4XX クラス**のステータスコード (致命的) は、**クライアントのエラー**を示します。4XXエラーコードの全リストと説明については、致命的エラーチャートを参照のこと。
- **5XX クラス**のステータスコード (致命的) は、**サーバーエラー**を示します。考えられる原因はいくつかあります。たとえば、アクセスしようとしているサーバーがリクエストを実行できない、サーバーがメンテナンス中でリクエストを実行できない、サーバーのトラフィックが高いレベルになっているなどです。このような場合、エクスポネンシャルバックオフでリクエストを再試行することを推奨する。インシデントまたは停止が発生した場合、Braze はインシデント期間中に失敗した REST API 呼び出しを再実行することはできません。インシデントウィンドウ中に失敗したコールを再試行しなければならない。
  - **502 エラー**は、宛先サーバーに到達する前に発生した失敗です。
  - **503 エラー**は、リクエストが宛先サーバーに到達したが、十分な容量がない、ネットワークに問題がある、または同様の理由でリクエストを完了できないことを意味します。
  - **504 エラー**は、サーバーが上流の別のサーバーから応答を受信しなかったことを示します。

### 致命的なエラー

リクエストが致命的なエラーに遭遇した場合、以下のステータスコードと関連するエラーメッセージが返される。

{% endraw %}
{% alert warning %}
以下のエラーコードはすべて、メッセージが送信されていないことを示す。
{% endalert %}
{% raw %}

| エラーコード | 説明 |
|---|---|
| `5XX Internal Server Error` | 指数バックオフでリクエストを再試行してください。|
| `400 Bad Request` | 構文が正しくありません。|
| `400 No Recipients` | リクエストに外部 ID やセグメント ID、プッシュトークンがありません。|
| `400 Invalid Campaign ID` | 入力されたキャンペーンIDに該当するメッセージングAPIキャンペーンが見つからなかった。|
| `400 Message Variant Unspecified` | キャンペーンIDは提供されているが、メッセージのバリエーションIDは提供されていない。|
| `400 Invalid Message Variant` | 有効なキャンペーンIDを入力したが、メッセージのバリエーションIDがそのキャンペーンのどのメッセージとも一致しない。|
| `400 Mismatched Message Type` | 少なくとも1つのメッセージに、誤ったメッセージタイプのメッセージバリエーションを指定しました。|
| `400 Invalid Extra Push Payload` | `apple_push` または `android_push` のいずれかに `extra` キーを指定しますが、これはディクショナリではありません。|
| `400 Max Input Length Exceeded` | `/users/track` エンドポイントにヒットしたときに、75を超える外部ID を呼び出すことによって発生します。|
| `400 The max number of external_ids and aliases per request was exceeded` | 50以上の外部IDを呼び出したことが原因。|
| `400 The max number of ids per request was exceeded` | 50以上の外部IDを呼び出したことが原因。|
| `400 No message to send` | メッセージにペイロードが指定されていない。|
| `400 Slideup Message Length Exceeded` | スライドアップメッセージには140文字以上が含まれる。|
| `400 Apple Push Length Exceeded` | JSONペイロードは1,912バイトを超える。|
| `400 Android Push Length Exceeded` | JSONペイロードは4,000バイトを超える。|
| `400 Bad Request` | `send_at` 日時を解析できません。|
| `400 Bad Request` | リクエストでは、`in_local_time` は true ですが、会社のタイムゾーンで `time` が経過しています。|
| `401 Unauthorized` | 無効なAPI キーです。このエラーは、次の場合にも発生します。<br><br> \- リクエストを間違った[インスタンス]({{site.baseurl}}/user_guide/administrative/access_braze/sdk_endpoints/)に送信しています。たとえば、アカウントが EU インスタンス(`https://dashboard-01.braze.eu`) にある場合、リクエストは `https://rest.fra-01.braze.eu` に送信する必要あります。<br>\- API キーの構文では、一重引用符または二重引用符が使用されています。正しい構文は `Authorization: Bearer {YOUR-API-KEY}` です。 |
| `403 Forbidden` | 料金プランが対応していない、またはアカウントが無効になっている。|
| `403 Access Denied` | 使用しているREST APIキーに十分なパーミッションがないため、**設定**ページでAPIキーのパーミッションを確認する。|
| `404 Not Found` | 無効な URL です。 |
| `429 Rate Limited` | レート制限を超える。 |
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

{% endraw %}
