---
nav_title: Webhook および接続されたコンテンツリクエストのトラブルシューティング
article_title: Webhook および接続されたコンテンツリクエストのトラブルシューティング
page_order: 3
channel:
  - webhooks
description: "この記事では、Webhook およびConnected Content エラーコードのトラブルシューティング方法について説明します。エラーの内容と、エラーを解決する手順についても説明します。"
---

# Webhook および接続コンテンツリクエストのトラブルシューティング

> この記事では、Webhook とConnected Content の一般的なエラーコードをトラブルシューティングする方法について説明し、リクエストでこれらのエラーがどのように発生するかについても詳しく説明します。

## 4XXエラー

`4XX` エラーは、エンドポイントに送信された要求に問題があることを示します。これらのエラーは、通常、誤った形式のパラメーター、認証ヘッダーの欠落、不正な URL など、誤ったリクエストによって発生します。

エラーコードの詳細と解決する手順については、次の表を参照してください。

<style>
table td {
    word-break: break-word;
}
</style>

<table>
  <thead>
    <tr>
      <th>エラーコード</th>
      <th>意味</th>
      <th>解決する手順</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><b>400 不正なリクエスト</b></td>
      <td>リクエストに無効な構文があります。</td>
      <td>
        <ul>
          <li>構文エラーがないか要求ペイロードを確認します。</li>
          <li>すべての必須フィールドが含まれ、正しくフォーマットされていることを確認します。</li>
          <li>JSON ペイロードを送信する場合は、JSON 構造を検証します。</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><b>401 未許可</b></td>
      <td>リクエストにはユーザー認証が必要です。</td>
      <td>
        <ul>
          <li>正しい認証資格情報 (API キーやトークンなど) がリクエストヘッダーに含まれていることを確認します。</li>
          <li>エンドポイントにアクセスするためのユーザー権限があることを確認します。</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><b>403禁</b></td>
      <td>エンドポイントはリクエストを理解しますが、承認は拒否します。</td>
      <td>
        <ul>
          <li>API キーまたはトークンに必要な権限があるかどうかを確認します。</li>
          <li>エンドポイントにアクセスするためのユーザー権限があることを確認します。</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><b>404 見つかりません</b></td>
      <td>エンドポイントは、要求されたリソースを見つけることができません。</td>
      <td>
        <ul>
          <li>エンドポイントのURL にタイプミスや不正なパスがないかどうかを確認します。</li>
          <li>アクセスしようとしているリソースが存在することを確認します。</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><b>405 メソッドが許可されていません</b></td>
      <td>リクエストメソッドはエンドポイントによって認識されますが、ターゲットリソースによってサポートされていません。</td>
      <td>
        <ul>
          <li>リクエストで使用されているHTTP メソッド(DELETE、GET、POST、PUT) を確認します。</li>
          <li>エンドポイントが使用しているメソッドをサポートしていることを確認します。</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><b>408 リクエストのタイムアウト</b></td>
      <td>エンドポイントが要求の処理をタイムアウトしました。</td>
      <td>
        <ul>
          <li>リクエストで使用されているHTTP メソッド(DELETE、GET、POST、PUT) を確認します。</li>
          <li>エンドポイントが使用しているメソッドをサポートしていることを確認します。</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><b>409 競合</b></td>
      <td>リソースの現在の状態と競合するため、要求は不完全です。</td>
      <td>
        <ul>
          <li>リクエストで使用されているHTTP メソッド(DELETE、GET、POST、PUT) を確認します。</li>
          <li>エンドポイントが使用しているメソッドをサポートしていることを確認します。</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><b>429 リクエストが多すぎます</b></td>
      <td>特定の時間内に送信されたリクエストが多すぎます。</td>
      <td>
        <ul>
          <li>キャンペーンまたはキャンバスステップのレート制限を下げます。</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

## 5XXエラー

`5XX` エラーは、エンドポイントに問題があることを示します。これらのエラーは通常、サーバー側の問題によって発生します。

| エラーコード                    | 意味                                                                                                                                         |
|-------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|
| **500 内部サーバーエラー** | エンドポイントで予期しない状態が発生したため、リクエストを完了できませんでした。                                                       |
| **502 不正なゲートウェイ**           | エンドポイントは、アップストリームサーバーから無効な応答を受信しました。                                                                                   |
| **503 サービス利用不可**   | エンドポイントは、現在、一時的な過負荷またはメンテナンスのために要求を処理できません。                                                    |
| **504 ゲートウェイタイムアウト**       | エンドポイントは、アップストリームサーバーからタイムリーな応答を受け取りませんでした。                                                                               |
| **529 ホストのオーバーロード**       | エンドポイントホストが過負荷になり、応答できませんでした。 |
| **598 ホスト異常**        | エンドポイントホストが一時的に異常とマークされるため、Braze は応答をシミュレートしました。詳細については、[Unhealthy host detection](#unhealthy-host-detection)を参照してください。 |
| **599 接続エラー**      | エンドポイントへの接続を確立しようとしたときに、ブレーズでネットワーク接続タイムアウトエラーが発生しました。つまり、エンドポイントが不安定またはダウンしている可能性があります。 |
{: .reset-td-br-1 .reset-td-br-2 role="presentation" }

### 5XX エラーの解決

一般的な`5XX` エラーのトラブルシューティングのヒントを次に示します。

- **Message Activity Log**で利用可能な特定の詳細については、エラーメッセージを確認してください。Webhook の場合は、Braze ホームページの**Performance Over Time** セクションに移動し、Webhook の統計を選択します。ここから、エラーが発生した日時を示すタイムスタンプが見つかります。
- 大量のリクエストを送信してエンドポイントを過負荷にしないようにしてください。一括で送信するか、レート制限を調整してエラーが発生しないかどうかを確認できます。

## 不健全ホストの検出

Braze webhooks とコネクテッドコンテンツは、不健全ホストの検出メカニズムを採用して、タイムアウト、過剰なリクエスト、または Braze がターゲットエンドポイントと正常に通信することを妨げるその他の結果が発生する原因となる、ターゲットホストの著しい速度低下または過負荷の発生を検出します。これは、ターゲットホストに問題を引き起こす可能性のある不必要な負荷を軽減するための保護手段として機能します。また、Brazeインフラストラクチャを安定化し、高速メッセージング速度を維持するのにも役立ちます。

一般に、**障害の数が (エンドポイントパスごと**ではなく**、ホスト名とアプリグループの一意の組み合わせごとに) 1分間の移動時間ウィンドウで3,000を超えると**、Braze はターゲットホストへのリクエストを一時的に停止し、代わりに正常性が低いことを示す `598` エラーコードで応答をシミュレートします。1分後、ホストが正常であることが判明した場合、Braze はリクエストをフルスピードで再開します。ホストがまだ不健全である場合、Braze はもう1分待ってから再試行します。

次のエラーコードは、不健全なホスト検出器の失敗回数に影響します。`408`、`429`、`502`、`503`、`504`、`529`。

Webhook の場合、Braze は異常なホストディテクタによって停止されたHTTP リクエストを自動的に再試行します。この自動再試行は指数バックオフを使用し、失敗する前に数回だけ再試行します。Webhook エラーの詳細については、[エラー、再試行ロジック、およびタイムアウト]({{site.baseurl}}/user_guide/message_building_by_channel/webhooks/creating_a_webhook#errors-retry-logic-and-timeouts) を参照してください。

コネクテッドコンテンツの場合、ターゲットホストへのリクエストが不健全ホスト検出器によって停止された場合、Braze はメッセージのレンダリングを続行し、エラー応答コードを受け取ったかのように Liquid ロジックに従います。これらのコネクテッドコンテンツリクエストが不健全なホスト検出器によって停止されたときに再試行されるようにするには、`:retry` オプションを使用します。`:retry` オプションの詳細については、[Connected Content retries]({{site.baseurl}}/user_guide/personalization_and_dynamic_content/connected_content/connected_content_retries) を参照してください。

異常なホスト検出が問題を引き起こしている可能性があると思われる場合は、[Braze Support]({{site.baseurl}}/support_contact/)までご連絡ください。
