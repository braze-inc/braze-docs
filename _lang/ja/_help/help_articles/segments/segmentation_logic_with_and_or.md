---
nav_title: セグメンテーション ロジック
article_title: セグメンテーション ロジック 
page_order: 3

page_type: solution
description: "この記事では、AND演算子とOR演算子の違い、およびそれらを使用して強力なセグメントを作成する方法について説明します。"
tool: Segments
---

# セグメンテーションロジック 

`AND`と`OR`の演算子は、[セグメントを作成する]({{site.baseurl}}/user_guide/engagement_tools/segments/creating_a_segment/)ときに強力なフィルタリングを可能にします。これらのオペレーターを使用すると、キャンペーンやキャンバスの構築の**ターゲットオーディエンス**ステップで、ユーザーの行動や振る舞いに基づいてターゲットにすることができます。

## ANDおよびOR演算子の理解

`AND`と`OR`の演算子は異なる方法で機能します。オーディエンスをSegmentするときの目的に応じて、それぞれの演算子を使用できます。 

### AND演算子を使用するタイミング

一般的に、特定の属性に対して2つ以上の値の交差に興味がある場合は、`AND`を使用してください。

キャンペーンでカナダとアメリカ合衆国以外のすべての国のユーザーをターゲットにする方法を考えてみましょう。この場合、`AND`演算子を使用すると、これらのユーザーをフィルターするのに役立ちます。この文`Country is not United States AND Country is not Canada`は、アメリカ合衆国出身ではなく、カナダ出身でもないユーザーのみを含みます。したがって、この論理を使用することにより、カナダとアメリカ合衆国の両方のユーザーが除外されます。

### OR演算子を使用するタイミング

`OR` を使用して、条件のセットの中で少なくとも1つの条件を満たすユーザーをターゲットにすることが目的の場合。3つの条件が`OR`で結びついている場合、実際の文が真であるためには、1つ、2つ、またはすべての条件が真である可能性があります。

例えば、バージョン1.0または1.1のアプリを使用しているすべてのユーザーにメッセージを送信したいと想像してください。バージョン1.0およびバージョン1.1のユーザーをターゲットにするには、セグメントでフィルター `Is 1.0` および `Is 1.1` を`OR` 演算子とともに使用できます。これにより、バージョン1.0または1.1を使用しているすべてのユーザーが対象になります。

次の例では、米国とカナダの両方のユーザーに有効なプロモーションを考えてみましょう。プロモーションが有効な地域のユーザーのみがプロモーションを受け取るようにします。このシナリオでは、次の文を使用してキャンペーンをターゲットにします: `Country is United States OR Country is Canada`。`OR` 演算子を使用すると、国がカナダまたは米国のユーザーにのみキャンペーンが送られます。

#### OR演算子を避けるべき場合

ユーザーをターゲットにする状況では、`OR`演算子の使用を避けるべき場合があります。`OR` 演算子は、ユーザーがステートメント内の1つ以上のフィルターの基準を満たす場合にtrueと評価されるステートメントを作成します。たとえば、"foodies"に属するが、"non-foodies"または"candy-lovers"のいずれにも属さないユーザーのSegmentを作成する場合は、`OR`演算子を使用します。

![]({% image_buster /assets/img_archive/or_operator_segment.png %})

ただし、「foodies」セグメントに属し、「non-foodies」および「candy-lovers」セグメントのいずれにも属さないユーザーをセグメント化することが目的の場合は、`AND` 演算子を使用します。このようにして、キャンペーンまたはキャンバスを受け取るユーザーは、意図されたセグメント（「フーディーズ」）に属し、同時に他のセグメント（「非フーディーズ」および「キャンディー愛好家」）には属しません。 

次の否定的なターゲティング基準は、2つ以上のフィルターが同じ属性を参照している場合、`OR`演算子と一緒に使用しないでください:

- `is not`
- `does not equal`
- `does not match regex`

`is not`、`does not equal`、または`does not match regex`が`OR`演算子とともに文中で2回以上使用される場合、関連する属性のすべての値を持つユーザーが対象となります。

### 両方の演算子を使用する

次の例では、`AND`と`OR`の両方の演算子を使用します。ここで、ターゲットオーディエンスには、Nike スニーカーまたは Adidas スニーカーを購入し、メール通知を受信するためにオプトインしたユーザーが含まれます。

![ユーザーのお気に入りのブランドがナイキやアディダスと等しく、]({% image_buster /assets/img_archive/NikeSneakers.png %})にメールを送ることを選択したスニーカーショッパーのセグメントの構築

適切なロジックを構築する別の方法は、セグメントを作成し、フィルターに基づいてそのセグメントに分類される[ユーザーをプレビュー]({{site.baseurl}}/user_guide/data_and_analytics/reporting/viewing_and_understanding_segment_data/)することです。この方法を使用すると、属性、アプリバージョン、またはその他のセグメンテーションが表示されている内容と一致していることを確認できます。

それでもサポートが必要な場合は、[サポートチケットを]({{site.baseurl}}/braze_support/)を登録してください。

_最終更新日：2022年6月3日_

